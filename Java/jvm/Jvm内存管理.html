<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.itdrizzle.cn/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html"><meta property="og:site_name" content="Blog"><meta property="og:title" content="JVMå†…å­˜ç®¡ç†"><meta property="og:type" content="article"><meta property="og:image" content="https://www.itdrizzle.cn/blog/"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="JVMå†…å­˜ç®¡ç†"><title>JVMå†…å­˜ç®¡ç† | Blog</title><meta name="description" content="DevelopNote and Blog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/blog/assets/style.03678e8d.css">
    <link rel="modulepreload" href="/blog/assets/app.024849fa.js"><link rel="modulepreload" href="/blog/assets/Jvmå†…å­˜ç®¡ç†.html.bb1ddc7b.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog/assets/Jvmå†…å­˜ç®¡ç†.html.8c6815b8.js"><link rel="prefetch" href="/blog/assets/home.html.47397180.js"><link rel="prefetch" href="/blog/assets/index.html.7d30cc84.js"><link rel="prefetch" href="/blog/assets/slide.html.60900976.js"><link rel="prefetch" href="/blog/assets/index.html.8704b022.js"><link rel="prefetch" href="/blog/assets/index.html.6f5cb701.js"><link rel="prefetch" href="/blog/assets/article10.html.77feb948.js"><link rel="prefetch" href="/blog/assets/article11.html.0a62477e.js"><link rel="prefetch" href="/blog/assets/article12.html.0b963e0f.js"><link rel="prefetch" href="/blog/assets/article9.html.b358c2f5.js"><link rel="prefetch" href="/blog/assets/Tablespace.html.0b19118f.js"><link rel="prefetch" href="/blog/assets/index.html.7d22017f.js"><link rel="prefetch" href="/blog/assets/index.html.85c367f3.js"><link rel="prefetch" href="/blog/assets/index.html.9ac293f9.js"><link rel="prefetch" href="/blog/assets/index.html.a706e77f.js"><link rel="prefetch" href="/blog/assets/mybatis-generator.html.28df4ffa.js"><link rel="prefetch" href="/blog/assets/mybatis-plus.html.3fa0b517.js"><link rel="prefetch" href="/blog/assets/mybatis.html.5e9dad89.js"><link rel="prefetch" href="/blog/assets/mybatisæºç å‰–æ.html.fa814eb0.js"><link rel="prefetch" href="/blog/assets/tk-mybatis.html.82ee5630.js"><link rel="prefetch" href="/blog/assets/db2.html.986f307e.js"><link rel="prefetch" href="/blog/assets/Oracle.html.e449c86e.js"><link rel="prefetch" href="/blog/assets/innodb.html.f54e0c7f.js"><link rel="prefetch" href="/blog/assets/jdbc.html.b1c099cf.js"><link rel="prefetch" href="/blog/assets/mysql-index.html.ce424929.js"><link rel="prefetch" href="/blog/assets/mysql.html.0c8aff2c.js"><link rel="prefetch" href="/blog/assets/sql.html.5ed963f5.js"><link rel="prefetch" href="/blog/assets/sqlä¼˜åŒ–.html.643d26c3.js"><link rel="prefetch" href="/blog/assets/Redis.html.7f6721dc.js"><link rel="prefetch" href="/blog/assets/Redisæºç .html.8f4fc340.js"><link rel="prefetch" href="/blog/assets/index.html.d42f6808.js"><link rel="prefetch" href="/blog/assets/gc.html.57697c19.js"><link rel="prefetch" href="/blog/assets/Jvmç±»åŠ è½½.html.70a9dcdf.js"><link rel="prefetch" href="/blog/assets/Specification.html.5149959a.js"><link rel="prefetch" href="/blog/assets/article1.html.c9355f77.js"><link rel="prefetch" href="/blog/assets/article2.html.1de2313c.js"><link rel="prefetch" href="/blog/assets/article3.html.4790b5b1.js"><link rel="prefetch" href="/blog/assets/article4.html.4ba7a1ae.js"><link rel="prefetch" href="/blog/assets/article5.html.8e5d7205.js"><link rel="prefetch" href="/blog/assets/article6.html.d57d531d.js"><link rel="prefetch" href="/blog/assets/article7.html.5123fa28.js"><link rel="prefetch" href="/blog/assets/article8.html.3a977b4b.js"><link rel="prefetch" href="/blog/assets/disable.html.df7fe42f.js"><link rel="prefetch" href="/blog/assets/encrypt.html.dfe29285.js"><link rel="prefetch" href="/blog/assets/markdown.html.bd0a35bc.js"><link rel="prefetch" href="/blog/assets/index.html.5346c78d.js"><link rel="prefetch" href="/blog/assets/index.html.55dec906.js"><link rel="prefetch" href="/blog/assets/Docker.html.b04ca486.js"><link rel="prefetch" href="/blog/assets/kubernetes.html.3ac6fbd7.js"><link rel="prefetch" href="/blog/assets/Linux-install.html.e25f57da.js"><link rel="prefetch" href="/blog/assets/Linux.html.1ecea965.js"><link rel="prefetch" href="/blog/assets/shell.html.6dfc6824.js"><link rel="prefetch" href="/blog/assets/vim.html.342a8ea2.js"><link rel="prefetch" href="/blog/assets/git.html.ce119a67.js"><link rel="prefetch" href="/blog/assets/Gradle.html.8fd63484.js"><link rel="prefetch" href="/blog/assets/maven.html.efa698b6.js"><link rel="prefetch" href="/blog/assets/idea.html.f12c1077.js"><link rel="prefetch" href="/blog/assets/windows.html.3fa064b6.js"><link rel="prefetch" href="/blog/assets/collection.html.6adacdda.js"><link rel="prefetch" href="/blog/assets/generics.html.eacc8603.js"><link rel="prefetch" href="/blog/assets/HashMapæºç åˆ†æ.html.70f3c007.js"><link rel="prefetch" href="/blog/assets/setå’Œmap.html.e40d87b7.js"><link rel="prefetch" href="/blog/assets/JaråŒ…çš„å¯¼å…¥.html.42e18cc4.js"><link rel="prefetch" href="/blog/assets/Javaå†å²åŠç®€ä»‹.html.717d3cb8.js"><link rel="prefetch" href="/blog/assets/JavaåŸºç¡€.html.7dd5cf86.js"><link rel="prefetch" href="/blog/assets/Javaå¸¸ç”¨ç±»åº“.html.b359beb0.js"><link rel="prefetch" href="/blog/assets/Javaé¢å‘å¯¹è±¡.html.8ba23325.js"><link rel="prefetch" href="/blog/assets/åŸç åç å’Œè¡¥ç .html.0bb15e36.js"><link rel="prefetch" href="/blog/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html.8dba9f48.js"><link rel="prefetch" href="/blog/assets/Lambda.html.3d1df8c9.js"><link rel="prefetch" href="/blog/assets/Stream.html.1fb1bdc8.js"><link rel="prefetch" href="/blog/assets/Annotation.html.1b439d5e.js"><link rel="prefetch" href="/blog/assets/Enum.html.bbb4d530.js"><link rel="prefetch" href="/blog/assets/Reflection.html.81b8417f.js"><link rel="prefetch" href="/blog/assets/zookeeper.html.c221500b.js"><link rel="prefetch" href="/blog/assets/404.html.0b36b055.js"><link rel="prefetch" href="/blog/assets/index.html.bab2af12.js"><link rel="prefetch" href="/blog/assets/index.html.e41e87d3.js"><link rel="prefetch" href="/blog/assets/index.html.7787152c.js"><link rel="prefetch" href="/blog/assets/index.html.cef3111a.js"><link rel="prefetch" href="/blog/assets/index.html.c90b33f8.js"><link rel="prefetch" href="/blog/assets/index.html.9b9d8436.js"><link rel="prefetch" href="/blog/assets/index.html.f8e39c2d.js"><link rel="prefetch" href="/blog/assets/index.html.5d331ca5.js"><link rel="prefetch" href="/blog/assets/index.html.267b9d3d.js"><link rel="prefetch" href="/blog/assets/index.html.dbbba9a7.js"><link rel="prefetch" href="/blog/assets/index.html.df38ef9c.js"><link rel="prefetch" href="/blog/assets/index.html.a9e7b934.js"><link rel="prefetch" href="/blog/assets/index.html.0a3a7cd7.js"><link rel="prefetch" href="/blog/assets/index.html.b2c9c053.js"><link rel="prefetch" href="/blog/assets/index.html.6eb84cb8.js"><link rel="prefetch" href="/blog/assets/index.html.80f037bb.js"><link rel="prefetch" href="/blog/assets/index.html.b4f94eaf.js"><link rel="prefetch" href="/blog/assets/index.html.93d4b516.js"><link rel="prefetch" href="/blog/assets/index.html.9f380a09.js"><link rel="prefetch" href="/blog/assets/index.html.564cd1b7.js"><link rel="prefetch" href="/blog/assets/index.html.d2850d4e.js"><link rel="prefetch" href="/blog/assets/index.html.1903a545.js"><link rel="prefetch" href="/blog/assets/home.html.364e2263.js"><link rel="prefetch" href="/blog/assets/index.html.f3b90fed.js"><link rel="prefetch" href="/blog/assets/slide.html.771e26a7.js"><link rel="prefetch" href="/blog/assets/index.html.29e87976.js"><link rel="prefetch" href="/blog/assets/index.html.2550048e.js"><link rel="prefetch" href="/blog/assets/article10.html.5cbecb64.js"><link rel="prefetch" href="/blog/assets/article11.html.1733530e.js"><link rel="prefetch" href="/blog/assets/article12.html.0f4e2655.js"><link rel="prefetch" href="/blog/assets/article9.html.e7185796.js"><link rel="prefetch" href="/blog/assets/Tablespace.html.19b97971.js"><link rel="prefetch" href="/blog/assets/index.html.d2326b55.js"><link rel="prefetch" href="/blog/assets/index.html.cc961b2e.js"><link rel="prefetch" href="/blog/assets/index.html.40ab8ec0.js"><link rel="prefetch" href="/blog/assets/index.html.3b895ad5.js"><link rel="prefetch" href="/blog/assets/mybatis-generator.html.2dcdac50.js"><link rel="prefetch" href="/blog/assets/mybatis-plus.html.7166ba13.js"><link rel="prefetch" href="/blog/assets/mybatis.html.457c7e92.js"><link rel="prefetch" href="/blog/assets/mybatisæºç å‰–æ.html.ff92c0e9.js"><link rel="prefetch" href="/blog/assets/tk-mybatis.html.691fc2bd.js"><link rel="prefetch" href="/blog/assets/db2.html.784c3356.js"><link rel="prefetch" href="/blog/assets/Oracle.html.ce229653.js"><link rel="prefetch" href="/blog/assets/innodb.html.eef47cdd.js"><link rel="prefetch" href="/blog/assets/jdbc.html.3a5ab256.js"><link rel="prefetch" href="/blog/assets/mysql-index.html.68787ce8.js"><link rel="prefetch" href="/blog/assets/mysql.html.bc4ef395.js"><link rel="prefetch" href="/blog/assets/sql.html.581cfb9b.js"><link rel="prefetch" href="/blog/assets/sqlä¼˜åŒ–.html.1f93f865.js"><link rel="prefetch" href="/blog/assets/Redis.html.3fdbc006.js"><link rel="prefetch" href="/blog/assets/Redisæºç .html.a5f2fd2e.js"><link rel="prefetch" href="/blog/assets/index.html.0fdaeb53.js"><link rel="prefetch" href="/blog/assets/gc.html.29e4f143.js"><link rel="prefetch" href="/blog/assets/Jvmç±»åŠ è½½.html.39c20c2a.js"><link rel="prefetch" href="/blog/assets/Specification.html.3b852d09.js"><link rel="prefetch" href="/blog/assets/article1.html.d4d8933a.js"><link rel="prefetch" href="/blog/assets/article2.html.d4482d1b.js"><link rel="prefetch" href="/blog/assets/article3.html.70261b90.js"><link rel="prefetch" href="/blog/assets/article4.html.53354bd4.js"><link rel="prefetch" href="/blog/assets/article5.html.60c31cb8.js"><link rel="prefetch" href="/blog/assets/article6.html.a1276baf.js"><link rel="prefetch" href="/blog/assets/article7.html.d7290115.js"><link rel="prefetch" href="/blog/assets/article8.html.9512bc4c.js"><link rel="prefetch" href="/blog/assets/disable.html.7145e521.js"><link rel="prefetch" href="/blog/assets/encrypt.html.3134316d.js"><link rel="prefetch" href="/blog/assets/markdown.html.88f7186e.js"><link rel="prefetch" href="/blog/assets/index.html.2104c879.js"><link rel="prefetch" href="/blog/assets/index.html.f4b50a59.js"><link rel="prefetch" href="/blog/assets/Docker.html.4f19f6a1.js"><link rel="prefetch" href="/blog/assets/kubernetes.html.193f7123.js"><link rel="prefetch" href="/blog/assets/Linux-install.html.9c690974.js"><link rel="prefetch" href="/blog/assets/Linux.html.3fb230e6.js"><link rel="prefetch" href="/blog/assets/shell.html.8e3fa040.js"><link rel="prefetch" href="/blog/assets/vim.html.e3eec9f4.js"><link rel="prefetch" href="/blog/assets/git.html.4aa8baf6.js"><link rel="prefetch" href="/blog/assets/Gradle.html.c06c9629.js"><link rel="prefetch" href="/blog/assets/maven.html.1936a02a.js"><link rel="prefetch" href="/blog/assets/idea.html.91599074.js"><link rel="prefetch" href="/blog/assets/windows.html.22411e79.js"><link rel="prefetch" href="/blog/assets/collection.html.a4820df9.js"><link rel="prefetch" href="/blog/assets/generics.html.daf80e92.js"><link rel="prefetch" href="/blog/assets/HashMapæºç åˆ†æ.html.bd51130a.js"><link rel="prefetch" href="/blog/assets/setå’Œmap.html.31f934cd.js"><link rel="prefetch" href="/blog/assets/JaråŒ…çš„å¯¼å…¥.html.af62ce61.js"><link rel="prefetch" href="/blog/assets/Javaå†å²åŠç®€ä»‹.html.21d28580.js"><link rel="prefetch" href="/blog/assets/JavaåŸºç¡€.html.cf55cdce.js"><link rel="prefetch" href="/blog/assets/Javaå¸¸ç”¨ç±»åº“.html.37b5353b.js"><link rel="prefetch" href="/blog/assets/Javaé¢å‘å¯¹è±¡.html.b062744d.js"><link rel="prefetch" href="/blog/assets/åŸç åç å’Œè¡¥ç .html.d9c93df5.js"><link rel="prefetch" href="/blog/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html.f1c819cc.js"><link rel="prefetch" href="/blog/assets/Lambda.html.07de4509.js"><link rel="prefetch" href="/blog/assets/Stream.html.4172f5bd.js"><link rel="prefetch" href="/blog/assets/Annotation.html.bd76c980.js"><link rel="prefetch" href="/blog/assets/Enum.html.6b889f7f.js"><link rel="prefetch" href="/blog/assets/Reflection.html.674d571f.js"><link rel="prefetch" href="/blog/assets/zookeeper.html.874f9655.js"><link rel="prefetch" href="/blog/assets/404.html.6e1fd07c.js"><link rel="prefetch" href="/blog/assets/index.html.b19cbbd0.js"><link rel="prefetch" href="/blog/assets/index.html.5b34e54e.js"><link rel="prefetch" href="/blog/assets/index.html.4413e123.js"><link rel="prefetch" href="/blog/assets/index.html.9603cbf5.js"><link rel="prefetch" href="/blog/assets/index.html.bb557e88.js"><link rel="prefetch" href="/blog/assets/index.html.cd3db027.js"><link rel="prefetch" href="/blog/assets/index.html.8cebb3c9.js"><link rel="prefetch" href="/blog/assets/index.html.4d5b9935.js"><link rel="prefetch" href="/blog/assets/index.html.b32b5836.js"><link rel="prefetch" href="/blog/assets/index.html.b7839d94.js"><link rel="prefetch" href="/blog/assets/index.html.3f3acc40.js"><link rel="prefetch" href="/blog/assets/index.html.60931be8.js"><link rel="prefetch" href="/blog/assets/index.html.ea74c132.js"><link rel="prefetch" href="/blog/assets/index.html.b6b1c4f2.js"><link rel="prefetch" href="/blog/assets/index.html.2ebd1e5c.js"><link rel="prefetch" href="/blog/assets/index.html.b1ed1296.js"><link rel="prefetch" href="/blog/assets/index.html.b148e8bf.js"><link rel="prefetch" href="/blog/assets/index.html.60b7ac1b.js"><link rel="prefetch" href="/blog/assets/index.html.586c8be2.js"><link rel="prefetch" href="/blog/assets/index.html.684ec00e.js"><link rel="prefetch" href="/blog/assets/index.html.6b433d1a.js"><link rel="prefetch" href="/blog/assets/index.html.d15fb1ac.js"><link rel="prefetch" href="/blog/assets/404.db7e1d98.js"><link rel="prefetch" href="/blog/assets/Layout.67e658b5.js"><link rel="prefetch" href="/blog/assets/Slide.a27027e1.js"><link rel="prefetch" href="/blog/assets/Blog.ca83b8f2.js"><link rel="prefetch" href="/blog/assets/auto.264f6c8c.js"><link rel="prefetch" href="/blog/assets/index.d8a59108.js"><link rel="prefetch" href="/blog/assets/index.1842ee54.js"><link rel="prefetch" href="/blog/assets/mermaid.esm.min.fac286bf.js"><link rel="prefetch" href="/blog/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/blog/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/blog/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/blog/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/blog/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/blog/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/blog/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/blog/assets/Playground.1c21c64c.js"><link rel="prefetch" href="/blog/assets/photoswipe.esm.218074cd.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/blog/" class="brand"><img class="logo" src="/blog/logo.svg" alt="Blog"><!----><span class="site-name hide-in-pad">Blog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><span class="icon iconfont icon-edit"></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaSE</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/javase/JavaBase/Java%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="JavaåŸºç¡€/é¢å‘å¯¹è±¡"><!---->JavaåŸºç¡€/é¢å‘å¯¹è±¡<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javase/Collection/collection.html" class="nav-link" aria-label="Javaé›†åˆ/æ³›å‹"><!---->Javaé›†åˆ/æ³›å‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javase/Senior/Enum.html" class="nav-link" aria-label="æšä¸¾/åå°„/æ³¨è§£"><!---->æšä¸¾/åå°„/æ³¨è§£<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javase/Lambda/Lambda.html" class="nav-link" aria-label="Lambdaè¡¨è¾¾å¼å’ŒStreamæµ"><!---->Lambdaè¡¨è¾¾å¼å’ŒStreamæµ<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JVMè™šæ‹Ÿæœº</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" class="router-link-active router-link-exact-active nav-link active" aria-label="JVMå†…å­˜ç®¡ç†/åƒåœ¾å›æ”¶"><!---->JVMå†…å­˜ç®¡ç†/åƒåœ¾å›æ”¶<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/jvm/Jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD.html" class="nav-link" aria-label="JVMæŒ‡ä»¤/ç±»åŠ è½½"><!---->JVMæŒ‡ä»¤/ç±»åŠ è½½<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JUCå¹¶å‘ç¼–ç¨‹</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/juc/Thread.md" class="nav-link" aria-label="Javaå¤šçº¿ç¨‹"><!---->Javaå¤šçº¿ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/juc/juc.md" class="nav-link" aria-label="JUCå¹¶å‘ç¼–ç¨‹"><!---->JUCå¹¶å‘ç¼–ç¨‹<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>IOå’Œç½‘ç»œç¼–ç¨‹</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/io/io.md" class="nav-link" aria-label="JavaIOæµ/ç½‘ç»œç¼–ç¨‹"><!---->JavaIOæµ/ç½‘ç»œç¼–ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/io/nio.md" class="nav-link" aria-label="Java BIOå’ŒNIO"><!---->Java BIOå’ŒNIO<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/io/Netty.md" class="nav-link" aria-label="Nettyæ ¸å¿ƒåŸç†"><!---->Nettyæ ¸å¿ƒåŸç†<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaEE</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/javaee/Servlet.md" class="nav-link" aria-label="Servlet/JSP/MVC"><!---->Servlet/JSP/MVC<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javaee/tomcat.md" class="nav-link" aria-label="Tomcatæºç å‰–æ"><!---->Tomcatæºç å‰–æ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring"><span class="title"><!---->Spring</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SpringåŸºç¡€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Spring/spring/Spring.md" class="nav-link" aria-label="Spring"><!---->Spring<!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/spring/SpringMVC.md" class="nav-link" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/spring/SpringBoot.md" class="nav-link" aria-label="SpringBoot"><!---->SpringBoot<!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/spring/Security.md" class="nav-link" aria-label="Spring Security And Shiro"><!---->Spring Security And Shiro<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Springæºç å‰–æ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Spring/resources/Spring.md" class="nav-link" aria-label="Springæºç "><!---->Springæºç <!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/resources/SpringMVC.md" class="nav-link" aria-label="SpringMVCæºç "><!---->SpringMVCæºç <!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/resources/SpringBoot.md" class="nav-link" aria-label="SpringBootæºç "><!---->SpringBootæºç <!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/resources/design.md" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼è¯¦è§£"><!---->è®¾è®¡æ¨¡å¼è¯¦è§£<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Database"><span class="title"><!---->Database</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å…³ç³»å‹æ•°æ®åº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Database/mysql/sql.html" class="nav-link" aria-label="SQLè¯­æ³•åŠä½¿ç”¨"><!---->SQLè¯­æ³•åŠä½¿ç”¨<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/mysql.html" class="nav-link" aria-label="MySQLåŸºç¡€"><!---->MySQLåŸºç¡€<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/mysql-index.html" class="nav-link" aria-label="MySQLç´¢å¼•"><!---->MySQLç´¢å¼•<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/innodb.html" class="nav-link" aria-label="InnoDBå­˜å‚¨å¼•æ“"><!---->InnoDBå­˜å‚¨å¼•æ“<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/jdbc.html" class="nav-link" aria-label="JDBCå’Œè¿æ¥æ± "><!---->JDBCå’Œè¿æ¥æ± <!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/other/db2.html" class="nav-link" aria-label="DB2 Express-C"><!---->DB2 Express-C<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ORMæ¡†æ¶åŠåº”ç”¨</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis.html" class="nav-link" aria-label="mybatisæ¡†æ¶"><!---->mybatisæ¡†æ¶<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis-plus.html" class="nav-link" aria-label="mybatis-plus"><!---->mybatis-plus<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis-generator.html" class="nav-link" aria-label="mybatis-generaotor"><!---->mybatis-generaotor<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90.html" class="nav-link" aria-label="mybatisæºç å‰–æ"><!---->mybatisæºç å‰–æ<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>éå…³ç³»å‹æ•°æ®åº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Database/redis/Redis.html" class="nav-link" aria-label="Redis"><!---->Redis<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/redis/Redis%E6%BA%90%E7%A0%81.html" class="nav-link" aria-label="Redisæºç "><!---->Redisæºç <!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="MicroService"><span class="title"><!---->MicroService</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>åˆ†å¸ƒå¼ç³»ç»Ÿ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/dubbo.md" class="nav-link" aria-label="åˆ†å¸ƒå¼ç†è®º/æ¶æ„æ¼”è¿›"><!---->åˆ†å¸ƒå¼ç†è®º/æ¶æ„æ¼”è¿›<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Nginx.md" class="nav-link" aria-label="Nginx/LVS/Keepalived"><!---->Nginx/LVS/Keepalived<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Dubbo+Zookeeper</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/MicroService/dubbo+zookeeper/dubbo/dubbo.md" class="nav-link" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="dropdown-subitem"><a href="/blog/MicroService/dubbo+zookeeper/zookeeper/zookeeper.html" class="nav-link" aria-label="Zookeeper"><!---->Zookeeper<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SpringCloud Alibaba</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/nacos.md" class="nav-link" aria-label="Nacos"><!---->Nacos<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/feign.md" class="nav-link" aria-label="openFeign"><!---->openFeign<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Elastic Stack</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/es.md" class="nav-link" aria-label="ElasticSearch"><!---->ElasticSearch<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/elk.md" class="nav-link" aria-label="ELK"><!---->ELK<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ¶ˆæ¯ä¸­é—´ä»¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/RabbitMQ.md" class="nav-link" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Kafaka.md" class="nav-link" aria-label="Kafaka"><!---->Kafaka<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/RocketMQ.md" class="nav-link" aria-label="RocketMQ"><!---->RocketMQ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tool"><span class="title"><!---->Tool</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>é¡¹ç›®ç®¡ç†</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/PM/git.html" class="nav-link" aria-label="Git-ç‰ˆæœ¬æ§åˆ¶"><!---->Git-ç‰ˆæœ¬æ§åˆ¶<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/PM/maven.html" class="nav-link" aria-label="Mavenä¾èµ–ç®¡ç†"><!---->Mavenä¾èµ–ç®¡ç†<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/PM/Gradle.html" class="nav-link" aria-label="Gradleé¡¹ç›®æ„å»º"><!---->Gradleé¡¹ç›®æ„å»º<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/Linux/Linux.html" class="nav-link" aria-label="Linuxå¸¸ç”¨å‘½ä»¤"><!---->Linuxå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/Linux/shell.html" class="nav-link" aria-label="Shellç¼–ç¨‹"><!---->Shellç¼–ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/Linux/vim.html" class="nav-link" aria-label="Vimä½¿ç”¨æŠ€å·§"><!---->Vimä½¿ç”¨æŠ€å·§<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>äº‘åŸç”Ÿ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/CloudNative/Docker.html" class="nav-link" aria-label="Docker"><!---->Docker<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/CloudNative/kubernetes.html" class="nav-link" aria-label="Kubernetes"><!---->Kubernetes<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å¸¸ç”¨è½¯ä»¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/tools/idea.html" class="nav-link" aria-label="IDEA/Eclipse"><!---->IDEA/Eclipse<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/tools/windows.html" class="nav-link" aria-label="Windowså‘½ä»¤"><!---->Windowså‘½ä»¤<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Theory"><span class="title"><!---->Theory</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è®¡ç®—æœºç»„æˆåŸç†</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è®¡ç®—æœºç½‘ç»œ</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ“ä½œç³»ç»Ÿ</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ•°æ®ç»“æ„ä¸ç®—æ³•</span></h4><ul class="dropdown-subitem-wrapper"></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Web"><span class="title"><!---->Web</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å‰ç«¯åŸºç¡€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/html.md" class="nav-link" aria-label="HTML/CSS"><!---->HTML/CSS<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/js.md" class="nav-link" aria-label="JavaScript"><!---->JavaScript<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/es6.md" class="nav-link" aria-label="ECMAScript6+"><!---->ECMAScript6+<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/ts.md" class="nav-link" aria-label="TypeScript"><!---->TypeScript<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Ajax.md" class="nav-link" aria-label="AjaxæŠ€æœ¯"><!---->AjaxæŠ€æœ¯<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Json.md" class="nav-link" aria-label="XMLå’ŒJson"><!---->XMLå’ŒJson<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å¸¸ç”¨æ¡†æ¶å’Œåº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/node.md" class="nav-link" aria-label="nodeå’Œnpm"><!---->nodeå’Œnpm<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/vue.md" class="nav-link" aria-label="Vue"><!---->Vue<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/react.md" class="nav-link" aria-label="React"><!---->React<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å°ç¨‹åºå’Œè·¨ç«¯æ¡†æ¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/weixin.md" class="nav-link" aria-label="å¾®ä¿¡å°ç¨‹åº"><!---->å¾®ä¿¡å°ç¨‹åº<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/uniapp.md" class="nav-link" aria-label="Uniapp"><!---->Uniapp<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/flutter.md" class="nav-link" aria-label="flutter"><!---->flutter<!----></a></li></ul></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/develop-note" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-structure"></span><span class="title">Java/JVM/JavaEE</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">JavaåŸºç¡€/é¢å‘å¯¹è±¡</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">Javaæ³›å‹ä¸é›†åˆ</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">æšä¸¾/åå°„/æ³¨è§£</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">Lambda/Stream</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-note"></span><span class="title">æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="JVMå†…å­˜ç®¡ç†"><!---->JVMå†…å­˜ç®¡ç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#ä¸€-jvmç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ JVMç®€ä»‹"><!---->ä¸€ JVMç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#äºŒ-è¿è¡Œæ—¶å†…å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒ è¿è¡Œæ—¶å†…å­˜"><!---->äºŒ è¿è¡Œæ—¶å†…å­˜<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_1-ç¨‹åºè®¡æ•°å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. ç¨‹åºè®¡æ•°å™¨"><!---->1. ç¨‹åºè®¡æ•°å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_2-è™šæ‹Ÿæœºæ ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. è™šæ‹Ÿæœºæ ˆ"><!---->2. è™šæ‹Ÿæœºæ ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_3-æœ¬åœ°æ–¹æ³•æ ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. æœ¬åœ°æ–¹æ³•æ ˆ"><!---->3. æœ¬åœ°æ–¹æ³•æ ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_4-å †-heap" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. å †(Heap)"><!---->4. å †(Heap)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_5-æ–¹æ³•åŒº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. æ–¹æ³•åŒº"><!---->5. æ–¹æ³•åŒº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_6-ç›´æ¥å†…å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6. ç›´æ¥å†…å­˜"><!---->6. ç›´æ¥å†…å­˜<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#ä¸‰-å†…å­˜æº¢å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ å†…å­˜æº¢å‡º"><!---->ä¸‰ å†…å­˜æº¢å‡º<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_1-jvmå †æº¢å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. Jvmå †æº¢å‡º"><!---->1. Jvmå †æº¢å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_2-jvmæ ˆæº¢å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. Jvmæ ˆæº¢å‡º"><!---->2. Jvmæ ˆæº¢å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_3-æ–¹æ³•åŒºæº¢å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. æ–¹æ³•åŒºæº¢å‡º"><!---->3. æ–¹æ³•åŒºæº¢å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_4-ç›´æ¥å†…å­˜æº¢å‡º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. ç›´æ¥å†…å­˜æº¢å‡º"><!---->4. ç›´æ¥å†…å­˜æº¢å‡º<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/blog/Java/jvm/gc.html" class="nav-link sidebar-link sidebar-page" aria-label="Jvmåƒåœ¾å›æ”¶"><!---->Jvmåƒåœ¾å›æ”¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Java/jvm/Jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD.html" class="nav-link sidebar-link sidebar-page" aria-label="Jvmç±»åŠ è½½"><!---->Jvmç±»åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->JVMå†…å­˜ç®¡ç†</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.github.com/itdrizzle" target="_blank" rel="noopener noreferrer">csdrizzle</a></span><span property="author" content="csdrizzle"></span></span><!----><!----><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 25 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT25M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#ä¸€-jvmç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">ä¸€ JVMç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#äºŒ-è¿è¡Œæ—¶å†…å­˜" class="router-link-active router-link-exact-active toc-link level2">äºŒ è¿è¡Œæ—¶å†…å­˜</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_1-ç¨‹åºè®¡æ•°å™¨" class="router-link-active router-link-exact-active toc-link level3">1. ç¨‹åºè®¡æ•°å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_2-è™šæ‹Ÿæœºæ ˆ" class="router-link-active router-link-exact-active toc-link level3">2. è™šæ‹Ÿæœºæ ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_3-æœ¬åœ°æ–¹æ³•æ ˆ" class="router-link-active router-link-exact-active toc-link level3">3. æœ¬åœ°æ–¹æ³•æ ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_4-å †-heap" class="router-link-active router-link-exact-active toc-link level3">4. å †(Heap)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_5-æ–¹æ³•åŒº" class="router-link-active router-link-exact-active toc-link level3">5. æ–¹æ³•åŒº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_6-ç›´æ¥å†…å­˜" class="router-link-active router-link-exact-active toc-link level3">6. ç›´æ¥å†…å­˜</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#ä¸‰-å†…å­˜æº¢å‡º" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ å†…å­˜æº¢å‡º</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_1-jvmå †æº¢å‡º" class="router-link-active router-link-exact-active toc-link level3">1. Jvmå †æº¢å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_2-jvmæ ˆæº¢å‡º" class="router-link-active router-link-exact-active toc-link level3">2. Jvmæ ˆæº¢å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_3-æ–¹æ³•åŒºæº¢å‡º" class="router-link-active router-link-exact-active toc-link level3">3. æ–¹æ³•åŒºæº¢å‡º</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html#_4-ç›´æ¥å†…å­˜æº¢å‡º" class="router-link-active router-link-exact-active toc-link level3">4. ç›´æ¥å†…å­˜æº¢å‡º</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="jvmå†…å­˜ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#jvmå†…å­˜ç®¡ç†" aria-hidden="true">#</a> JVMå†…å­˜ç®¡ç†</h1><p><a href="https://docs.oracle.com/javase/specs/" target="_blank" rel="noopener noreferrer">Java SE Specifications<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>HTMLï¼š<a href="https://docs.oracle.com/javase/specs/jvms/se8/html/index.html" target="_blank" rel="noopener noreferrer">The JavaÂ® Virtual Machine Specification<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>PDFï¼š<a href="https://docs.oracle.com/javase/specs/jvms/se8/jvms8.pdf" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/specs/jvms/se8/jvms8.pdf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="ä¸€-jvmç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸€-jvmç®€ä»‹" aria-hidden="true">#</a> ä¸€ JVMç®€ä»‹</h2><p>Oracleæ‰€ç»™çš„ç›¸å…³è§„èŒƒï¼š<a href="https://docs.oracle.com/javase/specs/index.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/specs/index.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Java Virtual Machineï¼ŒJAVAç¨‹åºçš„<strong>è¿è¡Œç¯å¢ƒ</strong>ï¼ˆJAVAäºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒï¼‰</p><ul><li>ä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œ</li><li>è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶</li><li>æ•°ç»„ä¸‹æ ‡è¶Šç•Œæ£€æŸ¥</li></ul><p>å…³äºjdkã€jreå’Œjvmä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µçš„ä¸­è‹±æ–‡åŠè§£é‡Šï¼š</p><ul><li><p><strong>JDK (Java Development Kits)</strong> -- Java å¼€å‘å·¥å…·é›†</p><p>JDK æ˜¯æ•´ä¸ª JAVA çš„æ ¸å¿ƒï¼ŒåŒ…æ‹¬äº† Java è¿è¡Œç¯ å¢ƒï¼ˆJava Runtime Environmentï¼‰ï¼Œä¸€å † Java å·¥å…·ï¼ˆjavac/java/jdb ç­‰ï¼‰å’Œ Java åŸºçš„ç±»åº“ï¼ˆå³ Java API åŒ…æ‹¬ rt.jarï¼‰ï¼Œå®ƒä¸æä¾›å…·ä½“çš„å¼€å‘è½¯ä»¶ï¼Œå®ƒæä¾›çš„æ˜¯æ— è®ºä½ ç”¨ä½•ç§å¼€å‘è½¯ä»¶å†™ Java ç¨‹åºéƒ½å¿…é¡»ç”¨åˆ°çš„ç±»åº“å’Œ Java è¯­è¨€è§„èŒƒã€‚</p></li><li><p><strong>JRE (Java Runtime Environment)</strong> --Java è¿è¡Œæ—¶ç¯å¢ƒ</p></li><li><p><strong>JVM ï¼ˆJava Virtual Machineï¼‰</strong>-- Javaè™šæ‹Ÿæœº</p><p>JVM å¯ä»¥ç†è§£æˆä¸€ä¸ªå¯è¿è¡Œ Java å­—èŠ‚ç çš„è™šæ‹Ÿè®¡ç®—æœºç³»ç»Ÿï¼Œ å®ƒæœ‰ä¸€ä¸ªè§£é‡Šå™¨ç»„ä»¶ï¼Œå¯ä»¥å®ç° Java å­—èŠ‚ç å’Œè®¡ç®—æœºæ“ä½œç³»ç»Ÿä¹‹é—´çš„é€šä¿¡ ï¼Œå¯¹äºä¸åŒçš„è¿è¡Œå¹³å°ï¼Œæœ‰ä¸åŒ çš„ JVMï¼ŒJVM å±è”½äº†åº•å±‚è¿è¡Œå¹³å°çš„å·®åˆ«ï¼Œå®ç°äº†â€œä¸€æ¬¡ç¼–è¯‘ï¼Œéšå¤„è¿è¡Œâ€ã€‚</p></li></ul><p><img src="/blog/assets/image-20220215135414096.c3e5d92e.png" alt="image-20220215135414096" loading="lazy"></p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šJava è™šæ‹Ÿæœºä¸å’ŒåŒ…æ‹¬Java åœ¨å†…çš„ä»»ä½•è¯­è¨€ç»‘å®šï¼Œå®ƒåªä¸â€œClass æ–‡ä»¶â€è¿™ç§ç‰¹å®šçš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼æ‰€å…³è”ã€‚ æ— è®ºä½¿ç”¨ä½•ç§è¯­è¨€è¿›è¡Œè½¯ä»¶å¼€å‘ï¼Œåªè¦èƒ½å°†æºæ–‡ä»¶ç¼–è¯‘ä¸ºæ­£ç¡®çš„Classæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ç§è¯­è¨€å°±å¯ä»¥åœ¨Javaè™šæ‹Ÿæœºä¸Šæ‰§è¡Œã€‚å¯ä»¥è¯´ï¼Œç»Ÿä¸€è€Œå¼ºå¤§çš„Classæ–‡ä»¶ç»“æ„ï¼Œå°±æ˜¯Javaè™šæ‹Ÿæœºçš„åŸºçŸ³ã€æ¡¥æ¢ã€‚</p><h2 id="äºŒ-è¿è¡Œæ—¶å†…å­˜" tabindex="-1"><a class="header-anchor" href="#äºŒ-è¿è¡Œæ—¶å†…å­˜" aria-hidden="true">#</a> äºŒ è¿è¡Œæ—¶å†…å­˜</h2><p><img src="/blog/assets/image-20220207230852752.bd395af8.png" alt="image-20220207230852752" loading="lazy"></p><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li><p><strong>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰<strong>åªæ˜¯ä¸€ä¸ªè§„èŒƒï¼Œå…¶å®ç°æ–¹å¼åœ¨jdk1.7åŠä¹‹å‰ä¸º</strong>æ°¸ä¹…ä»£</strong>ï¼Œjdk1.8åˆ™ä¸º<strong>å…ƒç©ºé—´ï¼ˆMetaSpaceï¼‰</strong>ï¼Œä¸”å…ƒç©ºé—´å­˜åœ¨äºæœ¬åœ°å†…å­˜ï¼ˆNative Memoryï¼‰</p></li><li><p>æ–¹æ³•åŒºJava8ä¹‹åçš„å˜åŒ–</p><ul><li>ç§»é™¤äº†æ°¸ä¹…ä»£( PermGen )ï¼Œæ›¿æ¢ä¸ºå…ƒç©ºé—´(Metaspace )</li><li>æ°¸ä¹…ä»£ä¸­çš„class metadata(ç±»å…ƒä¿¡æ¯ï¼‰è½¬ç§»åˆ°äº†native memory (æœ¬åœ°å†…å­˜ï¼Œè€Œä¸æ˜¯è™šæ‹Ÿæœº)</li><li>æ°¸ä¹…ä»£ä¸­çš„ <mark>interned Strings(å­—ç¬¦ä¸²å¸¸é‡æ± ï¼‰å’Œ class static variables(ç±»é™æ€å˜é‡) è½¬ç§»åˆ°äº†Java heap</mark></li><li>æ°¸ä¹…ä»£å‚æ•°(PermSize MaxPermSize ) -â†’å…ƒç©ºé—´å‚æ•°(MetaspaceSize MaxMetaspaceSize )</li></ul></li><li><p>Java8ä¸ºä»€ä¹ˆè¦å°†æ°¸ä¹…ä»£æ›¿æ¢æˆMetaspace ?</p><ul><li>å­—ç¬¦ä¸²å­˜åœ¨æ°¸ä¹…ä»£ä¸­ï¼Œå®¹æ˜“å‡ºç°æ€§èƒ½é—®é¢˜å’Œå†…å­˜æº¢å‡º</li><li>ç±»åŠæ–¹æ³•çš„ä¿¡æ¯ç­‰æ¯”è¾ƒéš¾ç¡®å®šå…¶å¤§å°ï¼Œå› æ­¤å¯¹äºæ°¸ä¹…ä»£çš„å¤§å°æŒ‡å®šæ¯”è¾ƒå›°éš¾ï¼Œå¤ªå°å®¹æ˜“å‡ºç°æ°¸ä¹…ä»£æº¢å‡ºï¼Œå¤ªå¤§åˆ™å®¹æ˜“å¯¼è‡´è€å¹´ä»£æº¢å‡º</li><li>æ°¸ä¹…ä»£ä¼šä¸ºGCå¸¦æ¥ä¸å¿…è¦çš„å¤æ‚åº¦ï¼Œå¹¶ä¸”å›æ”¶æ•ˆç‡åä½ã€‚</li></ul></li></ul><p>â€‹ JDK8å‰åçš„è¿è¡Œæ—¶å†…å­˜å˜åŒ–ï¼ˆHotspotï¼‰ï¼š</p><p><img src="/blog/assets/image-20220215142240397.8c85a324.png" alt="image-20220215142240397" loading="lazy"></p><h3 id="_1-ç¨‹åºè®¡æ•°å™¨" tabindex="-1"><a class="header-anchor" href="#_1-ç¨‹åºè®¡æ•°å™¨" aria-hidden="true">#</a> 1. ç¨‹åºè®¡æ•°å™¨</h3><p><strong>ç¨‹åºè®¡æ•°å™¨ï¼ˆ Program Counter Register )</strong> : æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹åšæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p><p>ï¼ˆ å³ç”¨äºä¿å­˜JVMä¸­ä¸‹ä¸€æ¡æ‰€è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ ï¼‰</p><p>åœ¨è™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€åˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li><p>åŒºåˆ«äºè®¡ç®—æœºç¡¬ä»¶çš„pcå¯„å­˜å™¨ï¼Œä¸¤è€…ä¸ç•¥æœ‰ä¸åŒã€‚</p><p>è®¡ç®—æœºç”¨pcå¯„å­˜å™¨æ¥å­˜æ”¾â€œä¼ªæŒ‡ä»¤&quot;æˆ–åœ°å€ï¼Œè€Œç›¸å¯¹äºè™šæ‹Ÿæœºï¼Œpcå¯„å­˜å™¨å®ƒè¡¨ç°ä¸ºä¸€å—å†…å­˜ï¼Œè™šæ‹Ÿæœºçš„pcå¯„å­˜å™¨çš„åŠŸèƒ½ä¹Ÿæ˜¯å­˜æ”¾ä¼ªæŒ‡ä»¤ï¼Œæ›´ç¡®åˆ‡çš„è¯´å­˜æ”¾çš„æ˜¯å°†è¦æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€ã€‚</p></li><li><p>å½“è™šæ‹Ÿæœºæ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•æ˜¯ä¸€ä¸ªæœ¬åœ°( native )æ–¹æ³•çš„æ—¶å€™ï¼Œjvmçš„pcå¯„å­˜å™¨å­˜å‚¨çš„å€¼æ˜¯undefinedã€‚</p></li><li><p>ç¨‹åºè®¡æ•°å™¨æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªã€‚</p></li><li><p>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½•QutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚</p></li></ul><p>Javaè™šæ‹Ÿæœºçš„å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´çš„æ–¹å¼æ¥å®ç°çš„ï¼Œåœ¨ä»»ä½•ä¸€ä¸ªç¡®å®šçš„æ—¶åˆ»ï¼Œä¸€ä¸ªå¤„ç†å™¨åªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ä¸­çš„æŒ‡ä»¤ã€‚å› æ­¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´çš„è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸ºâ€œçº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚</p><img src="/blog/assets/image-20220215212853091.dffd7702.png" alt="image-20220215212853091" style="zoom:67%;"><p>çº¿ç¨‹ç§æœ‰ï¼š</p><ul><li><p>CPUä¼šä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡ï¼Œå½“å½“å‰çº¿ç¨‹çš„æ—¶é—´ç‰‡ä½¿ç”¨å®Œä»¥åï¼ŒCPUå°±ä¼šå»æ‰§è¡Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸­çš„ä»£ç </p></li><li><p>ç¨‹åºè®¡æ•°å™¨æ˜¯<strong>æ¯ä¸ªçº¿ç¨‹</strong>æ‰€<strong>ç§æœ‰</strong>çš„ï¼Œå½“å¦ä¸€ä¸ªçº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œï¼Œåˆè¿”å›æ¥æ‰§è¡Œå½“å‰çº¿ç¨‹çš„ä»£ç æ—¶ï¼Œé€šè¿‡ç¨‹åºè®¡æ•°å™¨å¯ä»¥çŸ¥é“åº”è¯¥æ‰§è¡Œå“ªä¸€å¥æŒ‡ä»¤</p></li></ul><h3 id="_2-è™šæ‹Ÿæœºæ ˆ" tabindex="-1"><a class="header-anchor" href="#_2-è™šæ‹Ÿæœºæ ˆ" aria-hidden="true">#</a> 2. è™šæ‹Ÿæœºæ ˆ</h3><p>Javaè™šæ‹Ÿæœºæ ˆ(Java Virtual Machine Stacks)ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå³ç”Ÿå‘½å‘¨æœŸå’Œçº¿ç¨‹ç›¸åŒã€‚Javaè™šæ‹Ÿæœºæ ˆå’Œçº¿ç¨‹åŒçš„åˆ›å»ºï¼Œç”¨äºå­˜å‚¨æ ˆå¸§æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ ˆå¸§(Stack Frame)</strong>ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚</p><p>æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´åˆ°æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹å°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><p><img src="/blog/assets/image-20220216080917450.b2568a24.png" alt="image-20220216080917450" loading="lazy"></p><ul><li><p>**å±€éƒ¨å˜é‡è¡¨(Local Variable Table)**æ˜¯ä¸€ç»„å˜é‡å€¼å­˜å‚¨ç©ºé—´ï¼Œç”¨äºå­˜æ”¾æ–¹æ³•å‚æ•°å’Œæ–¹æ³•å†…å®šä¹‰çš„å±€éƒ¨å˜é‡ã€‚</p><ul><li><p>åŒ…æ‹¬8ç§åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨( referenceç±»å‹ï¼‰å’ŒreturnAddressç±»å‹ï¼ˆæŒ‡å‘ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)ã€‚</p><p>å…¶ä¸­64ä½é•¿åº¦çš„longå’Œdoubleç±»å‹çš„æ•°æ®ä¼šå ç”¨2ä¸ªå±€éƒ¨å˜é‡ç©ºé—´( Slot )ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨1ä¸ªã€‚</p><p><mark>æ³¨ï¼š<strong>Slotå•ä½</strong>ï¼šå±€éƒ¨å˜é‡è¡¨çš„å®¹é‡ä»¥å˜é‡æ§½ï¼ˆSlotï¼‰ä¸ºæœ€å°å•ä½ï¼Œ32ä½è™šæ‹Ÿæœºä¸­ä¸€ä¸ªSlotå¯ä»¥å­˜æ”¾ä¸€ä¸ª32ä½ä»¥å†…çš„æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€reference å’Œ returnAddresså…«ç§ï¼‰</mark></p></li><li><p><strong>å¤§å°å›ºå®š</strong>ï¼Œåœ¨Javaç¨‹åºè¢«ç¼–è¯‘æˆClassæ–‡ä»¶æ—¶ï¼Œå°±åœ¨æ–¹æ³•çš„Codeå±æ€§çš„max_localsæ•°æ®é¡¹ä¸­ç¡®å®šäº†è¯¥æ–¹æ³•æ‰€éœ€è¦åˆ†é…çš„æœ€å¤§å±€éƒ¨å˜é‡è¡¨çš„å®¹é‡ï¼ˆå¦‚å›¾æ‰€ç¤ºï¼šï¼‰</p></li></ul><img src="/blog/assets/image-20220216090315376.ddb3b17f.png" alt="image-20220216090315376" style="zoom:80%;"></li><li><p>**æ“ä½œæ•°æ ˆ(Operand Stack)**ä¹Ÿç§°ä½œæ“ä½œæ ˆï¼Œæ˜¯ä¸€ä¸ªåå…¥å…ˆå‡ºæ ˆ(LIFO)</p><p>éšç€æ–¹æ³•æ‰§è¡Œå’Œå­—èŠ‚ç æŒ‡ä»¤çš„æ‰§è¡Œï¼Œä¼šä»å±€éƒ¨å˜é‡è¡¨æˆ–å¯¹è±¡å®ä¾‹çš„å­—æ®µä¸­å¤åˆ¶å¸¸é‡æˆ–å˜é‡å†™å…¥åˆ°æ“ä½œæ•°æ ˆï¼Œå†éšç€è®¡ç®—çš„è¿›è¡Œå°†æ ˆä¸­å…ƒç´ å‡ºæ ˆåˆ°å±€éƒ¨å˜é‡è¡¨æˆ–è€…è¿”å›ç»™æ–¹æ³•è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯å‡ºæ ˆ/å…¥æ ˆæ“ä½œã€‚</p></li><li><p><strong>åŠ¨æ€é“¾æ¥</strong></p><p>Javaè™šæ‹Ÿæœºæ ˆä¸­ï¼Œæ¯ä¸ªæ ˆå¸§éƒ½åŒ…å«ä¸€ä¸ªæŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¯¥æ ˆæ‰€å±æ–¹æ³•çš„ç¬¦å·å¼•ç”¨ï¼ŒæŒæœ‰è¿™ä¸ªå¼•ç”¨çš„ç›®çš„æ˜¯ä¸ºäº†æ”¯æŒæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­çš„åŠ¨æ€é“¾æ¥(Dynamic Linking)</p></li><li><p><strong>æ–¹æ³•è¿”å›åœ°å€</strong>ï¼šå­˜æ”¾è°ƒç”¨è¯¥æ–¹æ³•çš„PCè®¡æ•°å™¨çš„å€¼</p><p>ä¸€ä¸ªæ–¹æ³•çš„ç»“æŸï¼Œæœ‰ä¸¤ç§æ–¹å¼âˆ¶æ­£å¸¸åœ°æ‰§è¡Œå®Œæˆï¼Œå‡ºç°æœªå¤„ç†çš„å¼‚å¸¸éæ­£å¸¸çš„é€€å‡ºã€‚æ— è®ºé€šè¿‡å“ªç§æ–¹å¼é€€å‡ºï¼Œåœ¨æ–¹æ³•é€€å‡ºåéƒ½è¿”å›åˆ°è¯¥æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®ã€‚æ–¹æ³•æ­£å¸¸é€€å‡ºæ—¶ï¼Œè°ƒç”¨è€…çš„PCè®¡æ•°å™¨çš„å€¼ä½œä¸ºè¿”å›åœ°å€ï¼Œå³è°ƒç”¨è¯¥æ–¹æ³•çš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚è€Œé€šè¿‡å¼‚å¸¸é€€å‡ºçš„ï¼Œè¿”å›åœ°å€æ˜¯è¦é€šè¿‡å¼‚å¸¸è¡¨æ¥ç¡®å®šï¼Œæ ˆå¸§ä¸­ä¸€èˆ¬ä¸ä¼šä¿å­˜è¿™éƒ¨åˆ†ä¿¡æ¯ã€‚æ— è®ºæ–¹æ³•æ˜¯å¦æ­£å¸¸å®Œæˆï¼Œéƒ½éœ€è¦è¿”å›åˆ°æ–¹æ³•è¢«è°ƒç”¨çš„ä½ç½®ï¼Œç¨‹åºæ‰èƒ½ç»§ç»­è¿›è¡Œã€‚</p></li></ul><p>åŸºäºå¯„å­˜å™¨çš„è®¾è®¡æ¨¡å¼ï¼šå°±æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„x86æˆ–armæŒ‡ä»¤é›†æ¥è¯´ï¼Œå…¶å¯¹æ•°æ®çš„æ“ä½œéƒ½æ˜¯åŸºäºå¯„å­˜å™¨ã€‚ä¾‹å¦‚ï¼Œè¦å¯¹ä¸¤ä¸ªæ•°æ‰§è¡ŒåŠ æ³•æ“ä½œåˆ™éœ€è¦å°†è¿™ä¸¤ä¸ªæ•°åˆ†åˆ«é€å…¥ä¸¤ä¸ªå¯„å­˜å™¨å†æ‰§è¡ŒåŠ æ³•æ“ä½œï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬å¯¹äºç¼–ç¨‹è¯­è¨€è®¤çŸ¥ï¼Œæ›´åŠ æ˜“äºç†è§£ã€‚</p><p>ä½†javaæ˜¯åŸºäºæ ˆçš„è®¾è®¡æ¨¡å¼ï¼ˆè‡³å°‘å¤šæ•°JVMå®ç°éƒ½æ˜¯å¦‚æ­¤ï¼Œå°‘æœ‰åŸºäºå¯„å­˜å™¨è®¾è®¡æ¨¡å¼çš„JVMï¼‰ï¼šåŸºäºæ ˆçš„è®¾è®¡æ¨¡å¼åˆ™æ˜¯å°†æ•°æ®å­˜æ”¾åœ¨æ ˆä¸­ï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™å°†æ ˆé¡¶çš„æ•°æ®å‡ºæ ˆï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨JVMä¸­ æ‰§è¡Œ a = b + c çš„å­—èŠ‚ç æ‰§è¡Œè¿‡ç¨‹ä¸­æ“ä½œæ•°æ ˆä»¥åŠå±€éƒ¨å˜é‡è¡¨çš„å˜åŒ–å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/assets/image-20220217083301260.4e317d12.png" alt="image-20220217083301260" loading="lazy"></p><p>æ›´è¯¦ç»†çš„æ­¥éª¤å‚ç…§ï¼š</p><p>å±€éƒ¨å˜é‡è¡¨ä¸­å­˜å‚¨ç€aã€bã€c ä¸‰ä¸ªå±€éƒ¨å˜é‡ï¼Œé¦–å…ˆå°†bå’Œcåˆ†åˆ«å…¥æ ˆ <img src="https://img2018.cnblogs.com/blog/1742182/201908/1742182-20190817151725697-204304284.png" alt="å›¾1" loading="lazy"></p><p>å°†æ ˆé¡¶çš„ä¸¤ä¸ªæ•°å‡ºæ ˆæ‰§è¡ŒåŠ æ³•æ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜è‡³æ ˆé¡¶ï¼Œä¹‹åå°†æ ˆé¡¶çš„æ•°å‡ºæ ˆèµ‹å€¼ç»™a <img src="https://img2018.cnblogs.com/blog/1742182/201908/1742182-20190817152139902-1817873538.png" alt="å›¾2" loading="lazy"></p><p>é—®é¢˜</p><ul><li>åƒåœ¾å›æ”¶æ˜¯å¦æ¶‰åŠæ ˆå†…å­˜ï¼Ÿ <ul><li><strong>ä¸éœ€è¦</strong>ã€‚å› ä¸ºè™šæ‹Ÿæœºæ ˆä¸­æ˜¯ç”±ä¸€ä¸ªä¸ªæ ˆå¸§ç»„æˆçš„ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼Œå¯¹åº”çš„æ ˆå¸§å°±ä¼šè¢«å¼¹å‡ºæ ˆã€‚æ‰€ä»¥æ— éœ€é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶å»å›æ”¶å†…å­˜ã€‚</li></ul></li><li>æ ˆå†…å­˜çš„åˆ†é…è¶Šå¤§è¶Šå¥½å—ï¼Ÿ <ul><li>ä¸æ˜¯ã€‚å› ä¸º<strong>ç‰©ç†å†…å­˜æ˜¯ä¸€å®šçš„</strong>ï¼Œæ ˆå†…å­˜è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒæ›´å¤šçš„é€’å½’è°ƒç”¨ï¼Œä½†æ˜¯å¯æ‰§è¡Œçš„çº¿ç¨‹æ•°å°±ä¼šè¶Šå°‘ã€‚</li></ul></li><li>æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ <ul><li>å¦‚æœæ–¹æ³•å†…<strong>å±€éƒ¨å˜é‡æ²¡æœ‰é€ƒç¦»æ–¹æ³•çš„ä½œç”¨èŒƒå›´</strong>ï¼Œåˆ™æ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„</li><li>å¦‚æœ <strong>å±€éƒ¨å˜é‡å¼•ç”¨äº†å¯¹è±¡</strong>ï¼Œå¹¶ <strong>é€ƒç¦»äº†æ–¹æ³•çš„ä½œç”¨èŒƒå›´</strong>ï¼Œåˆ™éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜</li></ul></li></ul><p><strong>Java.lang.stackOverflowError</strong> æ ˆå†…å­˜æº¢å‡ºï¼Œ<strong>å‘ç”ŸåŸå› </strong> ï¼š</p><ul><li>è™šæ‹Ÿæœºæ ˆä¸­ï¼Œ<strong>æ ˆå¸§è¿‡å¤š</strong>ï¼ˆå¦‚æ— é™é€’å½’ï¼‰</li><li>æ¯ä¸ªæ ˆå¸§<strong>æ‰€å ç”¨è¿‡å¤§</strong></li></ul><h3 id="_3-æœ¬åœ°æ–¹æ³•æ ˆ" tabindex="-1"><a class="header-anchor" href="#_3-æœ¬åœ°æ–¹æ³•æ ˆ" aria-hidden="true">#</a> 3. æœ¬åœ°æ–¹æ³•æ ˆ</h3><p><strong>æœ¬åœ°æ–¹æ³•æ ˆ( Native Method Stacksï¼‰</strong>ï¼šä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«åªæ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°(Nativeï¼‰æ–¹æ³•æœåŠ¡ã€‚ä¸€äº›å¸¦æœ‰<strong>nativeå…³é”®å­—</strong>çš„æ–¹æ³•å°±æ˜¯éœ€è¦JAVAå»è°ƒç”¨æœ¬åœ°çš„Cæˆ–è€…C++æ–¹æ³•ï¼Œå› ä¸ºJAVAæœ‰æ—¶å€™æ²¡æ³•ç›´æ¥å’Œæ“ä½œç³»ç»Ÿåº•å±‚äº¤äº’ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ°æœ¬åœ°æ–¹æ³•</p><p>ç‰¹ç‚¹</p><ul><li>æœ¬åœ°æ–¹æ³•æ ˆåŠ è½½nativeçš„æ–¹æ³•, nativeæ–¹æ³•å­˜åœ¨çš„æ„ä¹‰å½“ç„¶æ˜¯å¡«è¡¥javaä»£ç ä¸æ–¹ä¾¿å®ç°çš„ç¼ºé™·è€Œæå‡ºçš„</li><li>è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚</li><li>æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªã€‚</li><li>åœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­ï¼Œå¯¹æœ¬åœ°æ–¹æ³•æ ˆè¿™å—åŒºåŸŸï¼Œä¸Javaè™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œè§„å®šäº†ä¸¤ç§ç±»å‹çš„å¼‚å¸¸ <ul><li>StackOverFlowError : çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦ &gt; æ‰€å…è®¸çš„æ·±åº¦ã€‚</li><li>0utOfMemoryError: æœ¬åœ°æ–¹æ³•æ ˆæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ã€‚</li></ul></li></ul><h3 id="_4-å †-heap" tabindex="-1"><a class="header-anchor" href="#_4-å †-heap" aria-hidden="true">#</a> 4. å †(Heap)</h3><p>Javaå †ï¼ˆJava Heapï¼‰ æ˜¯è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚ Javaå †æ˜¯è¢«æ‰€ æœ‰çº¿ç¨‹å…±äº« çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œ åœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚ æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œ Java ä¸–ç•Œé‡Œâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹ è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</p><p>æ³¨ï¼šâ€œå‡ ä¹â€æ˜¯æŒ‡ä»å®ç°è§’åº¦æ¥çœ‹ï¼Œ éšç€Javaè¯­ è¨€çš„å‘å±•ï¼Œ ç°åœ¨å·²ç»èƒ½çœ‹åˆ°äº›è®¸è¿¹è±¡è¡¨æ˜æ—¥ åå¯èƒ½å‡ºç°å€¼ç±»å‹çš„æ”¯æŒï¼Œ å³ä½¿åªè€ƒè™‘ç°åœ¨ï¼Œ ç”±äºå³æ—¶ç¼–è¯‘æŠ€æœ¯çš„è¿›æ­¥ï¼Œ å°¤å…¶æ˜¯é€ƒé€¸åˆ†ææŠ€æœ¯çš„æ—¥æ¸å¼ºå¤§ï¼Œ æ ˆä¸Š åˆ†é…ã€ æ ‡é‡æ›¿æ¢ä¼˜åŒ–æ‰‹æ®µå·²ç»å¯¼è‡´ä¸€äº›å¾®å¦™çš„å˜åŒ–æ‚„ç„¶å‘ç”Ÿï¼Œ æ‰€ä»¥è¯´Javaå¯¹è±¡å®ä¾‹éƒ½åˆ†é…åœ¨å †ä¸Šä¹Ÿæ¸æ¸å˜å¾—ä¸æ˜¯ é‚£ä¹ˆç»å¯¹äº†ã€‚</p><p><strong>å †çš„åˆ†ç±»</strong>ï¼šï¼ˆç°åœ¨åƒåœ¾å›æ”¶å™¨éƒ½ä½¿ç”¨åˆ†ä»£ç†è®º,å †ç©ºé—´ä¹Ÿåˆ†ç±»å¦‚ä¸‹: ï¼‰</p><p>åœ¨Java7 Hotspotè™šæ‹Ÿæœºä¸­å°†Javaå †å†…å­˜åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>é’å¹´ä»£ Young Generation</li><li>è€å¹´ä»£ Old Generation</li><li>æ°¸ä¹…ä»£ Permanent Generation</li></ul><p><img src="/blog/assets/image-20220216221403691.d2f36e56.png" alt="image-20220216221403691" loading="lazy"></p><p>åœ¨Java8ä»¥åï¼Œæ–¹æ³•åŒºçš„å†…å­˜ä¸åœ¨åˆ†é…åœ¨Javaå †ä¸Šï¼Œè€Œæ˜¯å­˜å‚¨äºæœ¬åœ°å†…å­˜å…ƒç©ºé—´Metaspaceä¸­</p><p><img src="/blog/assets/image-20220216221349177.10c4a7a1.png" alt="image-20220216221349177" loading="lazy"></p><ul><li><p><strong>å¹´è½»ä»£(Young Gen)</strong>ï¼šå¹´è½»ä»£ä¸»è¦å­˜æ”¾æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå†…å­˜å¤§å°ç›¸å¯¹ä¼šæ¯”è¾ƒå°ï¼Œåƒåœ¾å›æ”¶ä¼šæ¯”è¾ƒé¢‘ç¹ã€‚</p><p>å¹´è½»ä»£åˆ† æˆ1ä¸ª <strong>Eden Space</strong> å’Œ2ä¸ª <strong>Suvivor Space</strong>ï¼ˆfrom å’Œtoï¼‰</p></li><li><p><strong>å¹´è€ä»£(Tenured Gen)</strong>ï¼šå¹´è€ä»£ä¸»è¦å­˜æ”¾JVMè®¤ä¸ºç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒé•¿çš„å¯¹è±¡ï¼ˆç»è¿‡å‡ æ¬¡çš„Young Gençš„åƒåœ¾å›æ”¶åä» ç„¶å­˜åœ¨ï¼‰ï¼Œå†…å­˜å¤§å°ç›¸å¯¹ä¼šæ¯”è¾ƒå¤§ï¼Œåƒåœ¾å›æ”¶ä¹Ÿç›¸å¯¹æ²¡æœ‰é‚£ä¹ˆé¢‘ç¹ã€‚</p></li><li><p><strong>é…ç½®æ–°ç”Ÿä»£å’Œè€å¹´ä»£å †ç»“æ„å æ¯”</strong> ï¼š</p><ul><li><p>é»˜è®¤ -XX:NewRatio=2 , æ ‡è¯†æ–°ç”Ÿä»£å 1 , è€å¹´ä»£å 2 ,æ–°ç”Ÿä»£å æ•´ä¸ªå †çš„1/3</p><p>ä¿®æ”¹å æ¯” -XX:NewPatio=4 , æ ‡è¯†æ–°ç”Ÿä»£å 1 , è€å¹´ä»£å 4 , æ–°ç”Ÿä»£å æ•´ä¸ªå †çš„1/5</p></li><li><p>Edenç©ºé—´å’Œå¦å¤–ä¸¤ä¸ªSurvivorç©ºé—´å æ¯”åˆ†åˆ«ä¸º8:1:1 å¯ä»¥é€šè¿‡æ“ä½œé€‰é¡¹ -XX:SurvivorRatio è°ƒæ•´è¿™ä¸ªç©ºé—´æ¯”ä¾‹ã€‚</p><p>æ¯”å¦‚ -XX:SurvivorRatio=8</p></li><li><p>å †å¤§å° = æ–°ç”Ÿä»£ + è€å¹´ä»£ã€‚å…¶ä¸­ï¼Œå †çš„å¤§å°å¯ä»¥é€šè¿‡å‚æ•° â€“Xmsã€-Xmx æ¥æŒ‡å®š</p></li></ul><p>å‡ ä¹æ‰€æœ‰çš„javaå¯¹è±¡éƒ½åœ¨EdenåŒºåˆ›å»º, ä½†80%çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­,åˆ›å»ºå‡ºæ¥å°±ä¼šè¢«é”€æ¯</p><p><img src="/blog/assets/image-20220216231858327.936358fa.png" alt="image-20220216231858327" loading="lazy"></p><p>ã€æ³¨æ„ã€‘ï¼šJVM æ¯æ¬¡åªä¼šä½¿ç”¨ Eden å’Œå…¶ä¸­çš„ä¸€å— Survivor åŒºåŸŸæ¥ä¸ºå¯¹è±¡æœåŠ¡ï¼Œæ‰€ä»¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œæ€»æ˜¯æœ‰ä¸€å— Survivor åŒºåŸŸ æ˜¯ç©ºé—²ç€çš„ã€‚å› æ­¤ï¼Œæ–°ç”Ÿä»£å®é™…å¯ç”¨çš„å†…å­˜ç©ºé—´ä¸º 9/10 ( å³90% )çš„æ–°ç”Ÿä»£ç©ºé—´</p></li></ul><p>å †çš„ç‰¹ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰æ˜¯Javaè™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚</p><p>ï¼ˆ2ï¼‰å †æ˜¯jvmæ‰€æœ‰çº¿ç¨‹å…±äº«çš„ã€‚ å †ä¸­ä¹ŸåŒ…å«ç§æœ‰çš„çº¿ç¨‹ç¼“å†²åŒº Thread Local Allocation Buffer (TLAB)</p><p>ï¼ˆ3ï¼‰åœ¨è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™åˆ›å»ºã€‚</p><p>ï¼ˆ4ï¼‰å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„éƒ½è¦åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</p><p>ï¼ˆ5ï¼‰Javaå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸ</p><p>ï¼ˆ6ï¼‰å› æ­¤å¾ˆå¤šæ—¶å€™javaå †ä¹Ÿè¢«ç§°ä¸ºâ€œGCå †â€ï¼ˆGarbage Collected Heapï¼‰ã€‚</p><p>â€‹ ä»å†…å­˜å›æ”¶çš„è§’åº¦æ¥çœ‹ï¼Œç”±äºç°åœ¨æ”¶é›†å™¨ åŸºæœ¬éƒ½é‡‡ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥Javaå †è¿˜å¯ä»¥ç»†åˆ†ä¸ºï¼š</p><p>â€‹ æ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼›æ–°ç”Ÿä»£åˆå¯ä»¥åˆ†ä¸ºï¼šEden ç©ºé—´ã€From Survivorç©ºé—´ã€To Survivorç©ºé—´ã€‚</p><p>ï¼ˆ7ï¼‰javaå †æ˜¯è®¡ç®—æœºç‰©ç†å­˜å‚¨ä¸Šä¸è¿ç»­çš„ã€é€»è¾‘ä¸Šæ˜¯è¿ç»­çš„ï¼Œä¹Ÿæ˜¯å¤§å°å¯è°ƒèŠ‚çš„ï¼ˆé€šè¿‡-Xmså’Œ-Xmxæ§åˆ¶ï¼‰ã€‚</p><p>ï¼ˆ8ï¼‰æ–¹æ³•ç»“æŸå,å †ä¸­å¯¹è±¡ä¸ä¼šé©¬ä¸Šç§»å‡ºä»…ä»…åœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™æ—¶å€™æ‰ç§»é™¤ã€‚</p><p>ï¼ˆ9ï¼‰å¦‚æœåœ¨å †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹çš„åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼Œå°†ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ï¼Œå³ï¼š</p><p>â€‹ å †å†…å­˜æº¢å‡ºï¼š<strong>java.lang.OutofMemoryError</strong> ï¼š java heap space.</p><p><strong>å¯¹è±¡åˆ†é…è¿‡ç¨‹</strong>ï¼š</p><p>1.newçš„å¯¹è±¡å…ˆæ”¾åœ¨ä¼Šç”¸å›­åŒºã€‚è¯¥åŒºåŸŸæœ‰å¤§å°é™åˆ¶</p><p>2.å½“ä¼Šç”¸å›­åŒºåŸŸå¡«æ»¡æ—¶ï¼Œç¨‹åºåˆéœ€è¦åˆ›å»ºå¯¹è±¡ï¼ŒJVMçš„åƒåœ¾å›æ”¶å™¨å°†å¯¹ä¼Šç”¸å›­é¢„æœŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼ˆMinor GCï¼‰,å°†ä¼Š ç”¸å›­åŒºåŸŸä¸­ä¸å†è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨çš„é¢å¯¹è±¡è¿›è¡Œé”€æ¯ï¼Œå†åŠ è½½æ–°çš„å¯¹è±¡æ”¾åˆ°ä¼Šç”¸å›­åŒº</p><p>3.ç„¶åå°†ä¼Šç”¸å›­åŒºä¸­çš„å‰©ä½™å¯¹è±¡ç§»åŠ¨åˆ°å¹¸å­˜è€…0åŒº</p><p>4.å¦‚æœå†æ¬¡è§¦å‘åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶ä¸Šæ¬¡å¹¸å­˜ä¸‹æ¥çš„æ”¾åœ¨å¹¸å­˜è€…0åŒºçš„ï¼Œå¦‚æœæ²¡æœ‰å›æ”¶ï¼Œå°±ä¼šæ”¾åˆ°å¹¸å­˜è€…1åŒº</p><p>5.å¦‚æœå†æ¬¡ç»å†åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶ä¼šé‡æ–°è¿”å›å¹¸å­˜è€…0åŒºï¼Œæ¥ç€å†å»å¹¸å­˜è€…1åŒºã€‚</p><p>6.å¦‚æœç´¯è®¡æ¬¡æ•°åˆ°è¾¾é»˜è®¤çš„15æ¬¡ï¼Œè¿™ä¼šè¿›å…¥å…»è€åŒºã€‚ å¯ä»¥é€šè¿‡è®¾ç½®å‚æ•°ï¼Œè°ƒæ•´é˜ˆå€¼ -XX:MaxTenuringThreshold=N</p><p>7.å…»è€åŒºå†…å­˜ä¸è¶³æ˜¯,ä¼šå†æ¬¡å‡ºå‘GC:Major GC è¿›è¡Œå…»è€åŒºçš„å†…å­˜æ¸…ç†</p><p>8.å¦‚æœå…»è€åŒºæ‰§è¡Œäº†Major GCåä»ç„¶æ²¡æœ‰åŠæ³•è¿›è¡Œå¯¹è±¡çš„ä¿å­˜,å°±ä¼šæŠ¥OOMå¼‚å¸¸</p><p><img src="/blog/assets/image-20220216231533915.3c5ce212.png" alt="image-20220216231533915" loading="lazy"></p><p><strong>å †GC</strong>ï¼š Java ä¸­çš„å †ä¹Ÿæ˜¯ GC æ”¶é›†åƒåœ¾çš„ä¸»è¦åŒºåŸŸã€‚GC åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯éƒ¨åˆ†æ”¶é›†å™¨ï¼ˆPartial GCï¼‰å¦ä¸€ç±»æ˜¯æ•´å †æ”¶é›†å™¨ ï¼ˆFu&#39;ll GCï¼‰</p><ul><li>éƒ¨åˆ†æ”¶é›†å™¨: ä¸æ˜¯å®Œæ•´æ”¶é›†javaå †çš„çš„æ”¶é›†å™¨,å®ƒåˆåˆ†ä¸º: <ul><li>æ–°ç”Ÿä»£æ”¶é›†ï¼ˆMinor GC / Young GCï¼‰: åªæ˜¯æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†</li><li>è€å¹´ä»£æ”¶é›† ï¼ˆMajor GC / Old GCï¼‰: åªæ˜¯è€å¹´ä»£çš„åƒåœ¾æ”¶é›† (CMS GC å•ç‹¬å›æ”¶è€å¹´ä»£)</li><li>æ··åˆæ”¶é›†ï¼ˆMixed GCï¼‰:æ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£åŠè€å¹´ä»£çš„åƒåœ¾æ”¶é›† (G1 GCä¼šæ··åˆå›æ”¶, regionåŒºåŸŸå›æ”¶)</li></ul></li><li>æ•´å †æ”¶é›†ï¼ˆFull GCï¼‰: æ”¶é›†æ•´ä¸ªjavaå †å’Œæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†å™¨</li></ul><p>å¹´è½»ä»£GCè§¦å‘æ¡ä»¶:</p><ul><li>å¹´è½»ä»£ç©ºé—´ä¸è¶³,å°±ä¼šè§¦å‘Minor GCï¼Œ è¿™é‡Œå¹´è½»ä»£æŒ‡çš„æ˜¯Edenä»£æ»¡ï¼ŒSurvivorä¸æ»¡ä¸ä¼šå¼•å‘GC</li><li>Minor GCä¼šå¼•å‘ <strong>STW (stop the world)</strong> , æš‚åœå…¶ä»–ç”¨æˆ·çš„çº¿ç¨‹,ç­‰åƒåœ¾å›æ”¶æ¥æ”¶,ç”¨æˆ·çš„çº¿ç¨‹æ‰æ¢å¤.</li></ul><p>è€å¹´ä»£GC (Major GC)è§¦å‘æœºåˆ¶</p><ul><li><p>è€å¹´ä»£ç©ºé—´ä¸è¶³æ—¶,ä¼šå°è¯•è§¦å‘MinorGC. å¦‚æœç©ºé—´è¿˜æ˜¯ä¸è¶³,åˆ™è§¦å‘Major GC</p></li><li><p>å¦‚æœMajor GC , å†…å­˜ä»ç„¶ä¸è¶³,åˆ™æŠ¥é”™OOM</p></li><li><p>Major GCçš„é€Ÿåº¦æ¯”Minor GCæ…¢10å€ä»¥ä¸Š.</p></li></ul><p>FullGC è§¦å‘æœºåˆ¶:</p><ul><li>è°ƒç”¨System.gc() , ç³»ç»Ÿä¼šæ‰§è¡ŒFull GC ï¼ˆä¸æ˜¯ç«‹å³æ‰§è¡Œï¼‰</li><li>è€å¹´ä»£ç©ºé—´ä¸è¶³ã€æˆ– æ–¹æ³•åŒºç©ºé—´ä¸è¶³</li><li>é€šè¿‡Minor GCè¿›å…¥è€å¹´ä»£å¹³å‡å¤§å°å¤§äºè€å¹´ä»£å¯ç”¨å†…å­˜</li></ul><h3 id="_5-æ–¹æ³•åŒº" tabindex="-1"><a class="header-anchor" href="#_5-æ–¹æ³•åŒº" aria-hidden="true">#</a> 5. æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ ä¸Javaå †ä¸€æ ·ï¼Œ æ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œ å®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½ çš„ç±»å‹ä¿¡æ¯ã€ å¸¸é‡ã€ é™æ€å˜é‡ã€ å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚å¯¹HotSpotè€Œè¨€ï¼Œæ–¹æ³•åŒºè¿˜æœ‰ä¸€ä¸ªåˆ«åå«åšNon-Heapï¼ˆéå †ï¼‰ï¼Œçš„å°±æ˜¯ è¦å’Œå †åŒºåˆ†å¼€ã€‚</p><p>å…ƒç©ºé—´ã€æ°¸ä¹…ä»£æ˜¯æ–¹æ³•åŒºå…·ä½“çš„è½åœ°å®ç°ã€‚æ–¹æ³•åŒºçœ‹ä½œæ˜¯ä¸€å—ç‹¬ç«‹äºJavaå †çš„å†…å­˜ç©ºé—´ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥å­˜å‚¨æ‰€åŠ è½½ çš„ç±»ä¿¡æ¯çš„</p><p><strong>æ–¹æ³•åŒºçš„ç‰¹ç‚¹</strong>ï¼š</p><ul><li><p>æ–¹æ³•åŒºä¸å †ä¸€æ ·æ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸ</p></li><li><p>æ–¹æ³•åŒºåœ¨JVMå¯åŠ¨çš„æ—¶å€™å°±ä¼šè¢«åˆ›å»ºå¹¶ä¸”å®ƒå®ä¾‹çš„ç‰©ç†å†…å­˜ç©ºé—´å’Œ Javaå †ä¸€æ ·éƒ½å¯ä»¥ä¸è¿ç»­</p></li><li><p>æ–¹æ³•åŒºçš„å¤§å°è·Ÿå †ç©ºé—´ä¸€æ · å¯ä»¥é€‰æ‹©å›ºå®šå¤§å°æˆ–è€…åŠ¨æ€å˜åŒ–</p></li><li><p>æ–¹æ³•åŒºçš„å¯¹è±¡å†³å®šäº†ç³»ç»Ÿå¯ä»¥ä¿å­˜å¤šå°‘ä¸ªç±»,å¦‚æœç³»ç»Ÿå®šä¹‰äº†å¤ªå¤šçš„ç±» å¯¼è‡´æ–¹æ³•åŒºæº¢å‡ºè™šæ‹ŸæœºåŒæ ·ä¼šè·‘å‡º (OOM)å¼‚å¸¸</p><p>(Java7ä¹‹å‰æ˜¯ PermGen Space (æ°¸ä¹…å¸¦) Java 8ä¹‹å æ˜¯MetaSpace(å…ƒç©ºé—´) )</p></li><li><p>å…³é—­ JVM å°±ä¼šé‡Šæ”¾è¿™ä¸ªåŒºåŸŸçš„å†…å­˜</p></li></ul><p><strong>æ°¸ä¹…ä»£ï¼ˆPermanent Generationï¼‰</strong>ï¼š æ°¸ä¹…ä»£æ˜¯ HotSpot è™šæ‹Ÿæœºå¯¹æ–¹æ³•åŒºçš„å…·ä½“å®ç°ï¼Œæ°¸ä¹…ä»£æœ¬èº«ä¹Ÿå­˜åœ¨äºè™šæ‹Ÿæœºå †ä¸­ï¼Œåœ¨ JDK 1.7 ä¸­ï¼Œç§»é™¤æ°¸ä¹…ä»£çš„å·¥ä½œå°±å·²ç»å¼€å§‹äº†ï¼Œå­˜å‚¨åœ¨æ°¸ä¹…ä»£ä¸­çš„æ•°æ®è½¬ç§»åˆ°äº†è™šæ‹Ÿæœºå †æˆ–è€… Native Memory ä¸­</p><ul><li>é€šè¿‡-xx:Permsizeæ¥è®¾ç½®æ°¸ä¹…ä»£åˆå§‹åˆ†é…ç©ºé—´ã€‚é»˜è®¤å€¼æ˜¯20.75M</li><li>-XX:MaxPermsizeæ¥è®¾å®šæ°¸ä¹…ä»£æœ€å¤§å¯åˆ†é…ç©ºé—´ã€‚32ä½æœºå™¨é»˜è®¤æ˜¯64Mï¼Œ64ä½æœºå™¨æ¨¡å¼æ˜¯82M</li><li>å½“JVMåŠ è½½çš„ç±»ä¿¡æ¯å®¹é‡è¶…è¿‡äº†è¿™ä¸ªå€¼ï¼Œä¼šæŠ¥å¼‚å¸¸OutofMemoryError:PermGen spaceã€‚</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>jps  <span class="token comment"># æ˜¯javaæä¾›çš„ä¸€ä¸ªæ˜¾ç¤ºå½“å‰æ‰€æœ‰javaè¿›ç¨‹pidçš„å‘½ä»¤</span>
jinfo -flag PermSize è¿›ç¨‹å·     <span class="token comment">#æŸ¥çœ‹è¿›ç¨‹çš„PermSizeåˆå§‹åŒ–ç©ºé—´å¤§å°</span>
jinfo -flag MaxPermSize è¿›ç¨‹å·  <span class="token comment">#æŸ¥çœ‹PermSizeæœ€å¤§ç©ºé—´</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å…ƒç©ºé—´ï¼ˆMeta Spaceï¼‰</strong>ï¼š ä» JDK 1.8 å¼€å§‹ï¼ŒHotSpot è™šæ‹Ÿæœºå®Œå…¨ç§»é™¤äº†æ°¸ä¹…ä»£ï¼Œæ”¹ä¸ºåœ¨ Native Memory ä¸­å­˜æ”¾è¿™äº›æ•°æ®ï¼Œæ–°çš„ç©ºé—´è¢«ç§°ä¸ºå…ƒç©ºé—´</p><ul><li><p>å…ƒæ•°æ®åŒºå¤§å°å¯ä»¥ä½¿ç”¨å‚æ•° -XX:MetaspaceSize å’Œ -XX:MaxMetaspaceSizeæŒ‡å®š é»˜è®¤å€¼ä¾èµ–äºå¹³å°ã€‚</p><p>windowsä¸‹ï¼Œ-XX:MetaspaceSizeæ˜¯21Mï¼Œ-XX:MaxMetaspaceSizeçš„å€¼æ˜¯ -1ï¼Œå³æ²¡æœ‰é™åˆ¶ã€‚</p></li><li><p>ä¸æ°¸ä¹…ä»£ä¸åŒï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè™šæ‹Ÿæœºä¼šè€—å°½æ‰€æœ‰çš„å¯ç”¨ç³»ç»Ÿå†…å­˜ã€‚å¦‚æœå…ƒæ•°æ®åŒºå‘ç”Ÿæº¢å‡ºï¼Œè™šæ‹Ÿ æœºä¸€æ ·ä¼šæŠ›å‡ºå¼‚å¸¸OutOfMemoryError:Metaspace</p></li><li><p><code>-XX:MetaspaceSize</code>ï¼šè®¾ç½®åˆå§‹çš„å…ƒç©ºé—´å¤§å°ã€‚å¯¹äºä¸€ä¸ª64ä½çš„æœåŠ¡å™¨ç«¯JVMæ¥è¯´ï¼Œå…¶é»˜è®¤çš„-xx:MetaspaceSizeå€¼ä¸º 21MBã€‚</p><p>è¿™å°±æ˜¯åˆå§‹çš„é«˜æ°´ä½çº¿ï¼Œä¸€æ—¦è§¦åŠè¿™ä¸ªæ°´ä½çº¿ï¼ŒFullGCå°†ä¼šè¢«è§¦å‘å¹¶å¸è½½æ²¡ç”¨çš„ç±»ï¼ˆå³è¿™äº›ç±»å¯¹åº”çš„ç±»åŠ è½½ å™¨ä¸å†å­˜æ´»ï¼‰ç„¶åè¿™ä¸ªé«˜æ°´ä½çº¿å°†ä¼šé‡ç½®ã€‚æ–°çš„é«˜æ°´ä½çº¿çš„å€¼å–å†³äºGCåé‡Šæ”¾äº†å¤šå°‘å…ƒç©ºé—´ã€‚å¦‚æœé‡Šæ”¾çš„ç©ºé—´ä¸ è¶³ï¼Œé‚£ä¹ˆåœ¨ä¸è¶…è¿‡MaxMetaspaceSizeæ—¶ï¼Œé€‚å½“æé«˜è¯¥å€¼ã€‚å¦‚æœé‡Šæ”¾ç©ºé—´è¿‡å¤šï¼Œåˆ™é€‚å½“é™ä½è¯¥å€¼ã€‚ å¦‚æœåˆå§‹åŒ–çš„é«˜æ°´ä½çº¿è®¾ç½®è¿‡ä½ï¼Œä¸Šè¿°é«˜æ°´ä½çº¿è°ƒæ•´æƒ…å†µä¼šå‘ç”Ÿå¾ˆå¤šæ¬¡ã€‚é€šè¿‡åƒåœ¾å›æ”¶å™¨çš„æ—¥å¿—å¯ä»¥è§‚å¯Ÿåˆ°FullGC å¤šæ¬¡è°ƒç”¨ã€‚ä¸ºäº†é¿å…é¢‘ç¹åœ°GCï¼Œå»ºè®®å°†-XX:MetaspaceSizeè®¾ç½®ä¸ºä¸€ä¸ªç›¸å¯¹è¾ƒé«˜çš„å€¼ã€‚</p></li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>jps <span class="token comment">#æŸ¥çœ‹è¿›ç¨‹å·</span>
jinfo -flag MetaspaceSize è¿›ç¨‹å·     <span class="token comment">#æŸ¥çœ‹Metaspace æœ€å¤§åˆ†é…å†…å­˜ç©ºé—´</span>
jinfo -flag MaxMetaspaceSize è¿›ç¨‹å·  <span class="token comment">#æŸ¥çœ‹Metaspaceæœ€å¤§ç©ºé—´</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><mark>å…³äºæ°¸ä¹…ä»£å’Œå…ƒç©ºé—´çš„å†å²ç®€ä»‹ï¼š</mark></p><blockquote><p>åœ¨JDK 8ä»¥å‰ï¼Œè®¸å¤šJavaç¨‹åºå‘˜éƒ½ä¹ æƒ¯åœ¨HotSpotè™šæ‹Ÿæœºä¸Šå¼€å‘ã€éƒ¨ç½²ç¨‹åºï¼Œå¾ˆå¤šäººéƒ½æ›´æ„¿æ„æŠŠæ–¹æ³•åŒºç§°å‘¼ä¸ºâ€œæ°¸ä¹…ä»£â€ï¼ˆPermanent Generationï¼‰ï¼Œæˆ–å°†ä¸¤è€…æ··ä¸ºä¸€è°ˆã€‚</p><p>æœ¬è´¨ä¸Šè¿™ä¸¤è€…å¹¶ä¸æ˜¯ç­‰ä»·çš„ï¼Œå› ä¸ºä»…ä»…æ˜¯å½“æ—¶çš„HotSpotè™šæ‹Ÿæœºè®¾è®¡å›¢é˜Ÿé€‰æ‹©æŠŠæ”¶é›†å™¨çš„åˆ†ä»£è®¾è®¡æ‰©å±•è‡³æ–¹æ³•åŒºï¼Œæˆ–è€…è¯´ä½¿ç”¨æ°¸ä¹…ä»£æ¥å®ç°æ–¹æ³•åŒºè€Œå·²ï¼Œè¿™æ ·ä½¿å¾—HotSpotçš„åƒåœ¾æ”¶é›†å™¨èƒ½å¤Ÿåƒç®¡ç†Javaå †ä¸€æ ·ç®¡ç†è¿™éƒ¨åˆ†å†…å­˜ï¼Œçœå»ä¸“é—¨ä¸ºæ–¹æ³•åŒºç¼–å†™å†…å­˜ç®¡ç†ä»£ç çš„å·¥ä½œã€‚</p><p>ä½†æ˜¯å¯¹äºå…¶ä»–è™šæ‹Ÿæœºå®ç°ï¼Œè­¬å¦‚BEA JRockitã€IBM J9ç­‰æ¥è¯´ï¼Œæ˜¯ä¸å­˜åœ¨æ°¸ä¹…ä»£çš„æ¦‚å¿µçš„ã€‚åŸåˆ™ä¸Šå¦‚ä½•å®ç°æ–¹æ³•åŒºå±äºè™šæ‹Ÿæœºå®ç°ç»†èŠ‚ï¼Œä¸å—ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ç®¡æŸï¼Œå¹¶ä¸è¦æ±‚ç»Ÿä¸€ã€‚</p><p>ä½†ç°åœ¨å›å¤´æ¥çœ‹ï¼Œå½“å¹´ä½¿ç”¨æ°¸ä¹…ä»£æ¥å®ç°æ–¹æ³•åŒºçš„å†³å®šå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè¿™ç§è®¾è®¡å¯¼è‡´äº†Javaåº”ç”¨æ›´å®¹æ˜“é‡åˆ°å†…å­˜æº¢å‡ºçš„é—®é¢˜ï¼ˆæ°¸ä¹…ä»£æœ‰-XXï¼šMaxPermSizeçš„ä¸Šé™ï¼Œå³ä½¿ä¸è®¾ç½®ä¹Ÿæœ‰é»˜è®¤å¤§å°ï¼Œè€ŒJ9å’ŒJRockitåªè¦æ²¡æœ‰è§¦ç¢°åˆ°è¿›ç¨‹å¯ç”¨å†…å­˜çš„ä¸Šé™ï¼Œä¾‹å¦‚32ä½ç³»ç»Ÿä¸­çš„4GBé™åˆ¶ï¼Œå°±ä¸ä¼šå‡ºé—®é¢˜ï¼‰ï¼Œè€Œä¸”æœ‰æå°‘æ•°æ–¹æ³•ï¼ˆä¾‹å¦‚String::intern()ï¼‰ä¼šå› æ°¸ä¹…ä»£çš„åŸå› è€Œå¯¼è‡´ä¸åŒè™šæ‹Ÿæœºä¸‹æœ‰ä¸åŒçš„è¡¨ç°ã€‚</p><p>å½“Oracleæ”¶è´­BEAè·å¾—äº†JRockitçš„æ‰€æœ‰æƒåï¼Œå‡†å¤‡æŠŠJRockitä¸­çš„ä¼˜ç§€åŠŸèƒ½ï¼Œè­¬å¦‚Java MissionControlç®¡ç†å·¥å…·ï¼Œç§»æ¤åˆ°HotSpotè™šæ‹Ÿæœºæ—¶ï¼Œä½†å› ä¸ºä¸¤è€…å¯¹æ–¹æ³•åŒºå®ç°çš„å·®å¼‚è€Œé¢ä¸´è¯¸å¤šå›°éš¾ã€‚è€ƒè™‘åˆ°HotSpotæœªæ¥çš„å‘å±•ï¼Œåœ¨JDK 6çš„æ—¶å€™HotSpotå¼€å‘å›¢é˜Ÿå°±æœ‰æ”¾å¼ƒæ°¸ä¹…ä»£ï¼Œé€æ­¥æ”¹ä¸ºé‡‡ç”¨æœ¬åœ°å†…å­˜ï¼ˆNative Memoryï¼‰æ¥å®ç°æ–¹æ³•åŒºçš„è®¡åˆ’äº†ï¼Œåˆ°äº†JDK 7çš„HotSpotï¼Œå·²ç»æŠŠåŸæœ¬æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ç­‰ç§»å‡ºï¼Œè€Œåˆ°äº†JDK 8ï¼Œç»ˆäºå®Œå…¨åºŸå¼ƒäº†æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼Œæ”¹ç”¨ä¸JRockitã€J9ä¸€æ ·åœ¨æœ¬åœ°å†…å­˜ä¸­å®ç°çš„**å…ƒç©ºé—´ï¼ˆMeta-spaceï¼‰**æ¥ä»£æ›¿ï¼ŒæŠŠJDK 7ä¸­æ°¸ä¹…ä»£è¿˜å‰©ä½™çš„å†…å®¹ï¼ˆä¸»è¦æ˜¯ç±»å‹ä¿¡æ¯ï¼‰å…¨éƒ¨ç§»åˆ°å…ƒç©ºé—´ä¸­ã€‚</p></blockquote><p><strong>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</strong>ï¼š</p><ul><li><p>å¸¸é‡æ± ï¼šå­˜æ”¾ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ â€”â€” å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œå†…éƒ¨åŒ…å«äº†å¸¸é‡æ± </p></li><li><p>è¿è¡Œæ—¶å¸¸é‡æ± ï¼šå¸¸é‡æ± è¡¨åœ¨è¿è¡Œæ—¶çš„è¡¨ç°å½¢å¼ â€”â€” æ–¹æ³•åŒºä¸­ï¼Œå†…éƒ¨åŒ…å«äº†è¿è¡Œæ—¶å¸¸é‡æ± </p></li></ul><p>ç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ä¸­åŒ…å«äº†ç±»å‹ä¿¡æ¯ã€åŸŸä¿¡æ¯ã€æ–¹æ³•ä¿¡æ¯ç­‰ã€‚é€šè¿‡ClassLoaderå°†<code>å­—èŠ‚ç æ–‡ä»¶çš„å¸¸é‡æ± </code> ä¸­çš„ä¿¡æ¯åŠ  è½½åˆ°å†…å­˜ä¸­ï¼Œå­˜å‚¨åœ¨äº† <code>æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± </code> ä¸­.</p><p>å…·ä½“ç†è§£ä¸ºå­—èŠ‚ç ä¸­çš„å¸¸é‡æ±  Constant pool åªæ˜¯æ–‡ä»¶ä¿¡æ¯ï¼Œå®ƒæƒ³è¦æ‰§è¡Œå°±å¿…é¡»åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è€ŒJavaç¨‹åºæ˜¯é  JVMï¼Œæ›´å…·ä½“çš„æ¥è¯´æ˜¯JVMçš„æ‰§è¡Œå¼•æ“æ¥è§£é‡Šæ‰§è¡Œçš„ã€‚æ‰§è¡Œå¼•æ“åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­å–æ•°æ®ï¼Œè¢«åŠ è½½çš„å­—èŠ‚ç å¸¸é‡æ±  ä¸­çš„ä¿¡æ¯æ˜¯æ”¾åˆ°äº†æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚ å®ƒä»¬ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œå­˜æ”¾çš„ä½ç½®æ˜¯ä¸åŒçš„ã€‚ä¸€ä¸ªåœ¨å­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªåœ¨æ–¹æ³•åŒºä¸­ã€‚</p><p><strong>ä¸²æ± ï¼ˆString Tableï¼‰</strong>ï¼š ä¸ºé¿å…å­—ç¬¦ä¸²è¢«é‡å¤åˆ›å»ºï¼ŒJVM å¼•å…¥äº†ä¸²æ± çš„æ¦‚å¿µï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²å˜æˆå­—ç¬¦ä¸²å¯¹è±¡æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²ä¼šåœ¨å·²ç»è¢«åˆ›å»ºå¥½çš„ä¸²æ± ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åŒåçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœæœ‰ï¼Œå°±å°†å·²å­˜åœ¨çš„å­—ç¬¦ä¸²çš„åœ°å€èµ‹ç»™è¯¥å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å°±å°†è¯¥å­—ç¬¦ä¸²æ”¾å…¥ä¸²æ± ä¸­ï¼Œä»è€Œé™ä½ç›¸åŒå­—ç¬¦ä¸²å˜é‡å¯¹å†…å­˜çš„æ¶ˆè€—</p><ul><li><p>ä¸²æ± çš„æœ¬è´¨æ˜¯ä¸€ä¸ª Hash Tableï¼Œå­—ç¬¦ä¸²æ˜¯å®ƒçš„ KEYï¼Œæ¯å½“æœ‰å­—ç¬¦ä¸²å˜æˆå­—ç¬¦ä¸²å˜é‡æ—¶ï¼Œå°±ä¼šæ£€æŸ¥ä¸²æ± ä¸­æ˜¯å¦å­˜åœ¨å’Œè¯¥å­—ç¬¦ä¸²åŒåçš„ KEY</p></li><li><p>String Table ä¸èƒ½æ‰©å®¹ï¼Œåœ¨ JDK 1.6 ä¸­å­˜åœ¨äºå¸¸é‡æ± ä¸­ï¼Œåœ¨ 1.8 æ—¶å­˜åœ¨äºå †ä¸­</p></li></ul><p><strong>String Tableç‰¹æ€§</strong>ï¼š</p><ul><li><p>å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²ä»…æ˜¯ç¬¦å·ï¼Œç¬¬ä¸€æ¬¡ç”¨åˆ°æ—¶æ‰å˜ä¸ºå¯¹è±¡</p></li><li><p>å­—ç¬¦ä¸²å˜é‡æ‹¼æ¥çš„åŸç† â€”â€” StringBuilderï¼ˆ1.8ï¼‰</p><p>jdk1.8ä¹‹åå­—ç¬¦ä¸²æ‹¼æ¥åº•å±‚å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªStringBuilderï¼Œç„¶åè°ƒç”¨appendæ–¹æ³•ï¼Œæœ€åè°ƒç”¨toStringè½¬åŒ–æˆString</p></li><li><p>å­—ç¬¦ä¸²å¸¸é‡æ‹¼æ¥çš„åŸç† â€”â€” ç¼–è¯‘å™¨ä¼˜åŒ–</p></li></ul><p><strong>jdk1.8å’Œjdk1.6ä¸­intern()æ–¹æ³•çš„è¿ç”¨</strong>ï¼š</p><ul><li><strong>1.8</strong> å°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰åˆ™å¹¶ä¸ä¼šæ”¾å…¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™**å°†è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨æ”¾å…¥ä¸²æ±  **</li><li><strong>1.6</strong> å°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰åˆ™å¹¶ä¸ä¼šæ”¾å…¥ï¼Œå¦‚æœæ²¡æœ‰ä¼š<strong>æŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œæ”¾å…¥ä¸²æ± </strong></li></ul><h3 id="_6-ç›´æ¥å†…å­˜" tabindex="-1"><a class="header-anchor" href="#_6-ç›´æ¥å†…å­˜" aria-hidden="true">#</a> 6. ç›´æ¥å†…å­˜</h3><p>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰å¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚ä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´OutOfMemoryErrorå¼‚å¸¸å‡ºç°</p><blockquote><p>åœ¨JDK 1.4ä¸­æ–°åŠ å…¥äº†NIOï¼ˆNew Input/Outputï¼‰ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBufferï¼‰çš„I/Oæ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨Nativeå‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨Javaå †é‡Œé¢çš„DirectByteBufferå¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨Javaå †å’ŒNativeå †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚</p><p>æ˜¾ç„¶ï¼Œæœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ°Javaå †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯å†…å­˜ï¼Œåˆ™è‚¯å®šè¿˜æ˜¯ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜ï¼ˆåŒ…æ‹¬ç‰©ç†å†…å­˜ã€SWAPåˆ†åŒºæˆ–è€…åˆ†é¡µæ–‡ä»¶ï¼‰å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶</p><p>ä¸€èˆ¬æœåŠ¡å™¨ç®¡ç†å‘˜é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜å»è®¾ç½®-Xmxç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†ç»å¸¸å¿½ç•¥æ‰ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶ï¼ˆåŒ…æ‹¬ç‰©ç†çš„å’Œæ“ä½œç³»ç»Ÿçº§çš„é™åˆ¶ï¼‰ï¼Œä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç°OutOfMemoryErrorå¼‚å¸¸ã€‚</p></blockquote><p>é€šè¿‡ä½¿ç”¨å †å¤–å†…å­˜ï¼Œå¯ä»¥å¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š</p><ol><li>æ”¹å–„å †è¿‡å¤§æ—¶åƒåœ¾å›æ”¶æ•ˆç‡ï¼Œå‡å°‘åœé¡¿ã€‚Full GCæ—¶ä¼šæ‰«æå †å†…å­˜ï¼Œå›æ”¶æ•ˆç‡å’Œå †å¤§å°æˆæ­£æ¯”ã€‚Nativeçš„å†… å­˜ï¼Œç”±OSè´Ÿè´£ç®¡ç†å’Œå›æ”¶</li><li>å‡å°‘å†…å­˜åœ¨Nativeå †å’ŒJVMå †æ‹·è´è¿‡ç¨‹ï¼Œé¿å…æ‹·è´æŸè€—ï¼Œé™ä½å†…å­˜ä½¿ç”¨ã€‚</li><li>å¯çªç ´ JVMå†…å­˜å¤§å°é™åˆ¶ã€‚</li></ol><h2 id="ä¸‰-å†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#ä¸‰-å†…å­˜æº¢å‡º" aria-hidden="true">#</a> ä¸‰ å†…å­˜æº¢å‡º</h2><h3 id="_1-jvmå †æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_1-jvmå †æº¢å‡º" aria-hidden="true">#</a> 1. Jvmå †æº¢å‡º</h3><p>å½“å¯¹è±¡æ‰€å ç©ºé—´è¶…è¿‡æœ€å¤§å †å®¹é‡æ—¶ï¼Œå°±ä¼šäº§ç”Ÿ <code>OutOfMemoryError</code> çš„å¼‚å¸¸</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * @Classname HeapOOM
 * @Description å †æº¢å‡ºæ¼”ç¤ºï¼Œè®¾ç½®æœ€å¤§å †æœ€å°å †ï¼š-Xms20m -Xmx20m
 * @CreateTime 2022/2/17 9:13
 * @CreatedBy itdrizzle
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HeapOOM</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/assets/image-20220217091955292.c72db9fa.png" alt="image-20220217091955292" loading="lazy"></p><p>äº§ç”Ÿ <code>OutOfMemoryError</code> å¼‚å¸¸çš„å¸¸è§åŸå› ï¼š</p><ul><li>å†…å­˜ä¸­åŠ è½½çš„æ•°æ®è¿‡å¤šï¼Œå¦‚ä¸€æ¬¡ä»æ•°æ®åº“ä¸­å–å‡ºè¿‡å¤šæ•°æ®ï¼›</li><li>é›†åˆå¯¹å¯¹è±¡å¼•ç”¨è¿‡å¤šä¸”ä½¿ç”¨å®Œåæ²¡æœ‰æ¸…ç©ºï¼›</li><li>ä»£ç ä¸­å­˜åœ¨æ­»å¾ªç¯æˆ–å¾ªç¯äº§ç”Ÿè¿‡å¤šé‡å¤å¯¹è±¡ï¼›</li><li>å †å†…å­˜åˆ†é…ä¸åˆç†</li></ul><h3 id="_2-jvmæ ˆæº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_2-jvmæ ˆæº¢å‡º" aria-hidden="true">#</a> 2. Jvmæ ˆæº¢å‡º</h3><h3 id="_3-æ–¹æ³•åŒºæº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3-æ–¹æ³•åŒºæº¢å‡º" aria-hidden="true">#</a> 3. æ–¹æ³•åŒºæº¢å‡º</h3><h3 id="_4-ç›´æ¥å†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_4-ç›´æ¥å†…å­˜æº¢å‡º" aria-hidden="true">#</a> 4. ç›´æ¥å†…å­˜æº¢å‡º</h3></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/develop-note/edit/main/demo/src/Java/jvm/Jvmå†…å­˜ç®¡ç†.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><!----><a href="/blog/Java/jvm/gc.html" class="nav-link next" aria-label="Jvmåƒåœ¾å›æ”¶"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">Jvmåƒåœ¾å›æ”¶<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Drizzle</div><div class="copyright">Copyright Â© 2022 csdrizzle</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.024849fa.js" defer></script>
  </body>
</html>
