import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as l,c as o,a as n,b as t,d as s,e as p,r as c}from"./app.f81b7935.js";var u="/blog/assets/image-20220328142420298.14c3c120.png",i="/blog/assets/image-20220328153000252.b7479fbf.png",r="/blog/assets/image-20220329090047702.3a88fa7d.png",k="/blog/assets/image-20220331211827277.6c0d8825.png",d="/blog/assets/image-20220331155958577.8f3d43c1.png",v="/blog/assets/image-20220331161218301.3fbeb244.png",m="/blog/assets/image-20220331161307273.effa27b5.png",g="/blog/assets/image-20220331162653277.afc15fa3.png",b="/blog/assets/image-20220330154112463.905be424.png",q="/blog/assets/image-20220330154913251.1e77558b.png",y="/blog/assets/image-20220330192058797.41ca0323.png",h="/blog/assets/image-20220330201309679.077972ac.png",f="/blog/assets/image-20220329155905784.5062e23a.png",x="/blog/assets/image-20220329144640587.717f75a5.png";const _={},w=n("h1",{id:"mybatis\u6846\u67B6\u53CA\u5176\u4F7F\u7528",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mybatis\u6846\u67B6\u53CA\u5176\u4F7F\u7528","aria-hidden":"true"},"#"),s(" Mybatis\u6846\u67B6\u53CA\u5176\u4F7F\u7528")],-1),S=n("h2",{id:"\u4E00-mybatis-document",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4E00-mybatis-document","aria-hidden":"true"},"#"),s(" \u4E00 mybatis document")],-1),M=s("mybatis \u2013 MyBatis 3 \u5B98\u65B9\u6587\u6863\uFF1A"),j={href:"https://mybatis.org/mybatis-3/index.html",target:"_blank",rel:"noopener noreferrer"},I=s("https://mybatis.org/mybatis-3/index.html"),O=p(`<p>MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings.</p><br><p>Mybatis\u662F\u4E00\u4E2A\u4F18\u79C0\u7684\u6301\u4E45\u5C42\u6846\u67B6\uFF0C\u53C8\u53EB\u505A ORM\u6846\u67B6 (\u534A\u81EA\u52A8\u5316\u3001\u8F7B\u91CF\u7EA7\u7684ORM\u6846\u67B6)\u3002</p><p>ORM\uFF1AObject Relationship Mapping\uFF08\u5BF9\u8C61\u5173\u7CFB\u6620\u5C04\uFF09\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">Mybatis</span>\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u628A\u5BF9\u8C61\u6620\u5C04\u4E3A\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2D\u7684\u8BB0\u5F55\uFF0C\u628A\u5173\u7CFB\u578B\u6570\u636E\u5E93\u4E2D\u7684\u8BB0\u5F55\u6620\u5C04\u4E3A\u5BF9\u8C61\u7684\u8FD9\u4E48\u4E00\u4E2A\u6301\u4E45\u5C42\u6846\u67B6\u3002

\u6301\u4E45\u5C42\uFF1A\u6301\u4E45\u5C42\u662F\u6307\u548C\u6570\u636E\u5E93\u6253\u4EA4\u9053\u7684\u8FD9\u4E00\u5C42\u3002

<span class="token class-name">Mybatis</span>\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u81EA\u5B9A\u4E49SQL\u8BED\u53E5\u53BB\u64CD\u4F5C\u6570\u636E\u5E93\uFF0C\u5BF9\u6570\u636E\u5E93\u8FDB\u884C\u589E\u5220\u6539\u67E5\u7684\u8FD9\u4E48\u4E00\u4E2A\u6846\u67B6\u3002
\u7B80\u5316\u6211\u4EEC\u5BF9\u4E8E\u6570\u636E\u5E93\u7684\u64CD\u4F5C\uFF0C\u7B80\u5316JDBC\u7684\u6D41\u7A0B\u3002
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/* \u4E3A\u4EC0\u4E48\u4F7F\u7528Mybatis?

- \u5BF9\u6BD4JDBC
  - \u539F\u751F\u7684JDBC\u4F7F\u7528\u6D41\u7A0B\u66F4\u590D\u6742\uFF0C\u64CD\u4F5C\u7E41\u7410
  - SQL\u8BED\u53E5\u548C\u4EE3\u7801\u4E25\u91CD\u8026\u5408\uFF0C\u5B58\u5728\u786C\u7F16\u7801
  - \u7ED3\u679C\u96C6\u89E3\u6790\u4E0D\u667A\u80FD\uFF0C\u9700\u8981\u624B\u52A8\u89E3\u6790
  
- \u5BF9\u6BD4DBUtils
  - SQL\u8BED\u53E5\u548C\u4EE3\u7801\u4E25\u91CD\u8026\u5408\uFF0C\u5B58\u5728\u786C\u7F16\u7801
  - \u7ED3\u679C\u96C6\u89E3\u6790\u7684\u65F6\u5019\u5176\u5B9E\u8FD8\u662F\u9700\u8981\u6211\u4EEC\u4F20\u5165\u4E0D\u540C\u7684ResultSetHandler\uFF0C\u4E0D\u591F\u5F3A\u5927
  - \u5BF9\u4E8E\u8FDE\u63A5\u67E5\u8BE2\u7684\u60C5\u51B5\uFF0C\u662F\u4E0D\u592A\u80FD\u591F\u652F\u6301\u7684
  
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_1-getting-started" tabindex="-1"><a class="header-anchor" href="#_1-getting-started" aria-hidden="true">#</a> 1. Getting started</h3>`,9),U=s("To use MyBatis you just need to include the "),L={href:"https://github.com/mybatis/mybatis-3/releases",target:"_blank",rel:"noopener noreferrer"},B=s("mybatis-x.x.x.jar"),z=s(" file in the classpath."),T=p(`<p>If you are using Maven just add the following dependency to your pom.xml:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>x.x.x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>**The configuration XML file ** \uFF08 <code>mybatis-config.xml</code> \uFF09\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
        <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
                <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
                <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--\u83B7\u53D6properties\u914D\u7F6E\u6587\u4EF6--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&lt;mapper resource=&quot;org/mybatis/example/BlogMapper.xml&quot;/&gt;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn/drizzle/mapper/userMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># jdbc.properties</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/academy?useSSL=false&amp;characterEncoding=utf8</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>Building SqlSessionFactory from XML</strong>\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// \u901A\u8FC7\u53CD\u5C04\u6216\u8005mybatis\u63D0\u4F9B\u7684 Resources.getResourceAsStream() \u8BFB\u53D6 maven\u9879\u76EE\u7684resources\u76EE\u5F55\u4E0B\u7684\u914D\u7F6E\u6587\u4EF6</span>

<span class="token comment">// InputStream inputStream = SelectTest.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>Acquiring a SqlSession from SqlSessionFactory</strong>\uFF1A</p><p>\u914D\u7F6Emapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
    <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
    <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.userMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      select * from user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>The SqlSession contains absolutely every method needed to execute SQL commands against the database. You can execute mapped SQL statements directly against the SqlSession instance. For example:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u901A\u8FC7SQLSession\u6267\u884CSQL\u8BED\u53E5</span>
<span class="token comment">// \u4F20\u5165\u4E24\u4E2A\u53C2\u6570 1. SQL\u8BED\u53E5\u7684\u5750\u6807\uFF08namespace+id\uFF09 2. SQL\u8BED\u53E5\u7684\u53C2\u6570</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itdrizzle.userMapper.selectUserById&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><img src="`+u+'" alt="image-20220328142420298" loading="lazy"></p><br><h3 id="_2-mybatis\u52A8\u6001\u4EE3\u7406" tabindex="-1"><a class="header-anchor" href="#_2-mybatis\u52A8\u6001\u4EE3\u7406" aria-hidden="true">#</a> 2. Mybatis\u52A8\u6001\u4EE3\u7406</h3><p>\u5173\u4E8E\u4F7F\u7528Mybatis\u7684\u52A8\u6001\u4EE3\u7406\uFF0C\u6709\u51E0\u4E2A\u89C4\u8303\u662F\u9700\u8981\u9075\u5B88\u7684</p><ul><li>\u63A5\u53E3\u7684\u5168\u9650\u5B9A\u540D\u79F0\u548C\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684namespace\u4FDD\u6301\u4E00\u81F4</li><li>\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5\u540D\u548C\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u7684id\u503C\u4FDD\u6301\u4E00\u81F4</li><li>\u63A5\u53E3\u7684\u8FD4\u56DE\u503C\u7C7B\u578B\u548CresultType\u4E2D\u7684\u503C\u4FDD\u6301\u4E00\u81F4 \uFF08\u8F93\u51FA\u6620\u5C04\uFF09</li><li>\u63A5\u53E3\u7684\u53C2\u6570\u548C\u6807\u7B7E\u4E2D\u7684\u53C2\u6570\u4FDD\u6301\u4E00\u81F4 \uFF08\u8F93\u5165\u6620\u5C04\uFF09</li></ul><p>\u8FD8\u6709\u51E0\u4E2A\u884C\u4E1A\u9ED8\u8BA4\u7684\u89C4\u8303\uFF08\u4E0D\u9075\u5B88\u4E0D\u4F1A\u62A5\u9519\uFF0C\u4F46\u662F\u5EFA\u8BAE\u9075\u5B88\uFF09</p><ul><li><p>mapper.xml\u914D\u7F6E\u6587\u4EF6\u7684\u540D\u5B57\uFF0C\u6700\u597D\u548C\u63A5\u53E3\u4FDD\u6301\u4E00\u81F4</p></li><li><p>mapper.xml\u914D\u7F6E\u6587\u4EF6\u548C\u63A5\u53E3\u6587\u4EF6\uFF0C\u5728\u7F16\u8BD1\u4E4B\u540E\u6700\u597D\u5728\u540C\u4E00\u7EA7\u76EE\u5F55\u4E0B</p></li></ul><br><p>\u521B\u5EFAmapper\u63A5\u53E3\uFF08\u6CE8\u610F\u63A5\u53E3\u4E0Exml\u914D\u7F6E\u6587\u4EF6\u7684\u5BF9\u5E94\u5173\u7CFB\uFF0C\u5982\u4E0B\u56FE\u6240\u793A\uFF1A\uFF09</p><p><img src="'+i+`" alt="image-20220328153000252" loading="lazy"></p><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
* \u4F7F\u7528mybatis\u7684\u52A8\u6001\u4EE3\u7406
* <span class="token keyword">@author</span> itdrizzle
* <span class="token keyword">@date</span> 2022/3/28 14:38
*/</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
\u4F7F\u7528\u52A8\u6001\u4EE3\u7406\u7684\u6D41\u7A0B

- <span class="token number">1</span>. \u58F0\u660E\u4E00\u4E2A\u63A5\u53E3
- <span class="token number">2</span>. \u5199\u4E00\u4E2A\u4E0E\u63A5\u53E3\u5BF9\u5E94\u7684mapper.xml\u914D\u7F6E\u6587\u4EF6
- <span class="token number">3</span>. \u83B7\u53D6\u63A5\u53E3\u7684\u4EE3\u7406\u5BF9\u8C61
    // \u83B7\u53D6\u4EE3\u7406\u5BF9\u8C61<span class="token punctuation">(</span>MapperProxy\u7684\u5B9E\u4F8B\u5BF9\u8C61<span class="token punctuation">)</span>
    AccountMapper accountMapper <span class="token operator">=</span> sqlSession.getMapper<span class="token punctuation">(</span>AccountMapper.class<span class="token punctuation">)</span><span class="token punctuation">;</span>

- <span class="token number">4</span>. \u6267\u884C\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5
    \u6BCF\u4E00\u4E2A\u63A5\u53E3\u90FD\u662F\u548Cmapper.xml\u914D\u7F6E\u6587\u4EF6\u5BF9\u5E94\u8D77\u6765\u7684\uFF1B
    \u6BCF\u4E00\u4E2A\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5\u90FD\u662F\u548Cmapper.xml\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684SQL\u8BED\u53E5\u7684\u6807\u7B7E\u5BF9\u5E94\u8D77\u6765\u7684\uFF0C
    \u90A3\u4E48\u6211\u4EEC\u53BB\u6267\u884C\u63A5\u53E3\u4E2D\u7684\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u5176\u5B9E\u5C31\u662F\u76F8\u5F53\u4E8E\u6267\u884CSQL\u8BED\u53E5\uFF0C\u83B7\u53D6SQL\u8BED\u53E5\u7684\u7ED3\u679C\u3002

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-mybatis\u5E38\u7528\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_3-mybatis\u5E38\u7528\u914D\u7F6E" aria-hidden="true">#</a> 3.mybatis\u5E38\u7528\u914D\u7F6E</h3><h4 id="_1-properties" tabindex="-1"><a class="header-anchor" href="#_1-properties" aria-hidden="true">#</a> 1) properties</h4><ul><li><p>\u914D\u7F6E\u4E00\u4E2Ajdbc.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/dbName?useSSL=false&amp;characterEncoding=utf8</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u5728mybatis-config.xml\u4E2D\u5F15\u5165properties\u914D\u7F6E\u6587\u4EF6</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u52A0\u8F7Dproperties \u914D\u7F6E\u6587\u4EF6--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+r+`" alt="image-20220329090047702" loading="lazy"></p></li></ul><br><h4 id="_2-settings" tabindex="-1"><a class="header-anchor" href="#_2-settings" aria-hidden="true">#</a> 2) settings</h4><p>\u8FD9\u4E2A\u91CC\u9762\u662FMybatis\u6781\u4E3A\u91CD\u8981\u7684\u914D\u7F6E\uFF0C\u4F1A\u6539\u53D8Mybatis\u7684\u884C\u4E3A\u4E0E\u5C5E\u6027\u503C\u3002</p><p>\u53EF\u4EE5\u6709\u5F88\u591A\u914D\u7F6E\uFF0C\u4F8B\u5982\u61D2\u52A0\u8F7D\uFF0C\u7F13\u5B58\uFF0C\u65E5\u5FD7\u7B49</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u65E5\u5FD7\u914D\u7F6E --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT_LOGGING<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    <span class="token comment">&lt;!-- \u61D2\u52A0\u8F7D   true: \u8868\u793A\u5F00\u542F  false\uFF1A\u8868\u793A\u5173\u95ED --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    
    <span class="token comment">&lt;!--&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;--&gt;</span>
    <span class="token comment">&lt;!--&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;--&gt;</span>
    <span class="token comment">&lt;!--&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">/* \u61D2\u52A0\u8F7D\uFF1A\u5EF6\u8FDF\u52A0\u8F7D\u7684\u610F\u601D
   \u662F\u6307\u5728\u6211\u4EEC\u4F7F\u7528\u591A\u8868\u67E5\u8BE2\u7684\u5206\u6B21\u67E5\u8BE2\u7684\u65F6\u5019\uFF0C\u5047\u5982\u7B2C\u4E8C\u6B21\u6267\u884C\u7684SQL\u8BED\u53E5\u7ED3\u679C\uFF0C\u4EE3\u7801\u4E2D\u6CA1\u6709\u5F15\u7528\u7684\u8BDD\uFF0C\u5C31\u4E0D\u52A0\u8F7D\uFF0C
   \u7B49\u5230\u9700\u8981\u7B2C\u4E8C\u6B21\u67E5\u8BE2\u7684SQL\u8BED\u53E5\u7684\u7ED3\u679C\u88AB\u5F15\u7528\u7684\u65F6\u5019\uFF0C\u518D\u53BB\u6267\u884CSQL\u8BED\u53E5

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_3-typealiases" tabindex="-1"><a class="header-anchor" href="#_3-typealiases" aria-hidden="true">#</a> 3) TypeAliases</h4><p>\u7C7B\u578B\u522B\u540D\u7684\u914D\u7F6E\u3002 \u5373\u53EF\u4EE5\u5BF9Mybatis\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u7C7B\u578B\u53BB\u53D6\u522B\u540D\u3002</p><ul><li><p>\u914D\u7F6E\u522B\u540D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u522B\u540D\u7684\u914D\u7F6E --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u7ED9\u5355\u4E2Ajava\u5B9E\u4F53\u7C7B\u53D6\u522B\u540D --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    <span class="token comment">&lt;!-- \u6279\u91CF\u8D77\u522B\u540D\uFF08\u8BE5\u5305\u4E0B\u7684\u6240\u6709\u7C7B\u7684\u7C7B\u540D\u5373\u4E3A\u522B\u540D\uFF0C\u4E14\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF09 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4F7F\u7528\u522B\u540D</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from t_user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><br><p>\u5185\u7F6E\u522B\u540D\uFF1AMybatis\u7ED9\u6211\u4EEC\u63D0\u4F9B\u4E86\u5F88\u591A\u5185\u7F6E\u7684\u522B\u540D</p><table><thead><tr><th style="text-align:left;">\u522B\u540D</th><th style="text-align:left;">\u6620\u5C04\u7684\u7C7B\u578B\uFF08java\u4E2D\u7684\u7C7B\u578B\uFF09</th></tr></thead><tbody><tr><td style="text-align:left;">_byte</td><td style="text-align:left;">byte</td></tr><tr><td style="text-align:left;">_long</td><td style="text-align:left;">long</td></tr><tr><td style="text-align:left;">_short</td><td style="text-align:left;">short</td></tr><tr><td style="text-align:left;">_int</td><td style="text-align:left;">int</td></tr><tr><td style="text-align:left;">_integer</td><td style="text-align:left;">int</td></tr><tr><td style="text-align:left;">_double</td><td style="text-align:left;">double</td></tr><tr><td style="text-align:left;">_float</td><td style="text-align:left;">float</td></tr><tr><td style="text-align:left;">_boolean</td><td style="text-align:left;">boolean</td></tr><tr><td style="text-align:left;">string</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">byte</td><td style="text-align:left;">Byte</td></tr><tr><td style="text-align:left;">long</td><td style="text-align:left;">Long</td></tr><tr><td style="text-align:left;">short</td><td style="text-align:left;">Short</td></tr><tr><td style="text-align:left;">int</td><td style="text-align:left;">Integer</td></tr><tr><td style="text-align:left;">integer</td><td style="text-align:left;">Integer</td></tr><tr><td style="text-align:left;">double</td><td style="text-align:left;">Double</td></tr><tr><td style="text-align:left;">float</td><td style="text-align:left;">Float</td></tr><tr><td style="text-align:left;">boolean</td><td style="text-align:left;">Boolean</td></tr><tr><td style="text-align:left;">date</td><td style="text-align:left;">Date</td></tr><tr><td style="text-align:left;">decimal</td><td style="text-align:left;">BigDecimal</td></tr><tr><td style="text-align:left;">bigdecimal</td><td style="text-align:left;">BigDecimal</td></tr><tr><td style="text-align:left;">object</td><td style="text-align:left;">Object</td></tr><tr><td style="text-align:left;">map</td><td style="text-align:left;">Map</td></tr><tr><td style="text-align:left;">hashmap</td><td style="text-align:left;">HashMap</td></tr><tr><td style="text-align:left;">list</td><td style="text-align:left;">List</td></tr><tr><td style="text-align:left;">arraylist</td><td style="text-align:left;">ArrayList</td></tr><tr><td style="text-align:left;">collection</td><td style="text-align:left;">Collection</td></tr><tr><td style="text-align:left;">iterator</td><td style="text-align:left;">Iterator</td></tr></tbody></table><p><span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"><strong>\u603B\u7ED3\uFF1AMybatis\u7ED9Java\u7C7B\u578B\u4E2D\u7684\u57FA\u672C\u7C7B\u578B\u3001\u5305\u88C5\u7C7B\u578B\u548C\u96C6\u5408\u7C7B\u578B\u8D77\u4E86\u5185\u7F6E\u7684\u522B\u540D\uFF0C\u57FA\u672C\u90FD\u662F\u540D\u79F0\u7684\u5C0F\u5199\u3002</strong></span></p><p>tips\uFF1A\u5EFA\u7ACBJavaBean\u7684\u65F6\u5019\uFF0CJavaBean\u7684\u6210\u5458\u53D8\u91CF\u7684\u5C5E\u6027\u5E94\u8BE5\u5C3D\u91CF\u4F7F\u7528\u5305\u88C5\u7C7B\u578B\u3002</p><br><h4 id="_4-typehandlers" tabindex="-1"><a class="header-anchor" href="#_4-typehandlers" aria-hidden="true">#</a> 4) typeHandlers</h4><p>\u8FD9\u4E2A\u662F\u7C7B\u578B\u5904\u7406\u5668\uFF0C\u4E3B\u8981\u662F\u7528\u6765\u5E2E\u52A9\u6211\u4EEC\u628A\u6570\u636E\u5E93\u4E2D\u7684\u6570\u636E\u7C7B\u578B\u8F6C\u5316\u4E3AJava\u4E2D\u7684\u6570\u636E\u7C7B\u578B\u3002</p><p>Mybatis\u6709\u5F88\u591A\u9ED8\u8BA4\u7684\u7C7B\u578B\u5904\u7406\u5668\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u505A\u7C7B\u578B\u7684\u8F6C\u5316\u3002</p><br><h4 id="_5-environment" tabindex="-1"><a class="header-anchor" href="#_5-environment" aria-hidden="true">#</a> 5) Environment</h4><p>\u8FD9\u4E2A\u662F\u5173\u4E8EMybatis\u7684\u73AF\u5883\u914D\u7F6E\uFF0C\u5176\u5B9E\u4E5F\u5C31\u662F\u6570\u636E\u5E93\u7684\u73AF\u5883\u7684\u914D\u7F6E\u3002</p><p>Mybatis\u7684\u73AF\u5883\u914D\u7F6E\u4E3B\u8981\u662F\u5E2E\u52A9\u6211\u4EEC\u53BB\u8FDE\u63A5\u591A\u4E2A\u6570\u636E\u5E93\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u91C7\u7528\u7684\u73AF\u5883\u7684\u540D\u5B57--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- test\u73AF\u5883--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- \u4E8B\u52A1\u7BA1\u7406\u5668 \uFF0C\u8868\u793AJDBC\u6765\u7BA1\u7406\u4E8B\u52A1
            JDBC\uFF1A\u8FD9\u4E2A\u662F\u91C7\u7528JDBC\u6765\u7BA1\u7406\u4E8B\u52A1\uFF0C\u548C\u4E4B\u524D\u4E8B\u52A1\u7684\u4F7F\u7528\u65B9\u5F0F\u4E00\u6837
            MANAGED\uFF1A\u8868\u793A\u4EA4\u7ED9\u5BB9\u5668\u6765\u7BA1\u7406\u4E8B\u52A1\uFF0C\u4F8B\u5982 Spring --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!-- \u6570\u636E\u6E90
                POOLED\uFF1A\u8868\u793A\u91C7\u7528\u8FDE\u63A5\u6C60\u6765\u7BA1\u7406\u8FDE\u63A5
                UNPOOLED\uFF1A\u8868\u793A\u4E0D\u91C7\u7528\u8FDE\u63A5\u6C60\u6765\u7BA1\u7406\u8FDE\u63A5
                JNDI\uFF1A\u5176\u5B9E\u5C31\u662F\u8868\u793AMybatis\u4F7F\u7528\u7B2C\u4E09\u65B9\u7684\u6570\u636E\u6E90 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- \u9A71\u52A8\uFF0C\u7528\u6237\u540D\uFF0C\u8D26\u53F7\uFF0C\u5BC6\u7801\u7684\u914D\u7F6E--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- dev\u73AF\u5883--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_6-mapper" tabindex="-1"><a class="header-anchor" href="#_6-mapper" aria-hidden="true">#</a> 6) Mapper</h4><p>\u8FD9\u4E2A\u662F\u6620\u5C04\u5668\u7684\u914D\u7F6E</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u6307\u5B9A\u5230\u5177\u4F53\u7684\u914D\u7F6E\u6587\u4EF6--&gt;</span>
    <span class="token comment">&lt;!--&lt;mapper resource=&quot;it/drizzle/mapper/UserMapper.xml&quot;/&gt;--&gt;</span>
    <span class="token comment">&lt;!--&lt;mapper resource=&quot;it/drizzle/mapper/UserMapper2.xml&quot;/&gt;--&gt;</span>


    <span class="token comment">&lt;!-- \u914D\u7F6E\u5230\u5305\u4E0B\u7684\u6240\u6709\u7684\u914D\u7F6E\u6587\u4EF6 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.drizzle.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u7684\u4E24\u79CD\u914D\u7F6E\u9009\u62E9\u5176\u4E2D\u7684\u4E00\u79CD\u5373\u53EF</p><br><h3 id="_4-\u548C-\u7684\u533A\u522B" tabindex="-1"><a class="header-anchor" href="#_4-\u548C-\u7684\u533A\u522B" aria-hidden="true">#</a> 4. \${}\u548C#{}\u7684\u533A\u522B</h3><p>\u5728Mybatis\u7684mapper\u6587\u4EF6\u91CC\u9762\uFF0C\u6709\u4E24\u79CD\u65B9\u5F0F\u53EF\u4EE5\u83B7\u53D6java\u4F20\u5165\u7684\u503C \uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token operator">-</span> #<span class="token punctuation">{</span><span class="token punctuation">}</span> \u5E95\u5C42\u662F\u8C03\u7528\u7684prepareStatement\uFF0C\u91C7\u7528\u7684\u662F\u9884\u7F16\u8BD1\u5360\u4F4D\u7684\u65B9\u5F0F\uFF0C\u6548\u7387\u66F4\u9AD8\uFF0C\u66F4\u52A0\u5B89\u5168 

<span class="token operator">-</span> $<span class="token punctuation">{</span><span class="token punctuation">}</span> \u5E95\u5C42\u662F\u91C7\u7528\u7684statement\uFF0C\u5E95\u5C42\u8FD8\u662F\u5B57\u7B26\u4E32\u62FC\u63A5\uFF0C\u6709sql\u6CE8\u5165\u7684\u98CE\u9669\uFF0C\u4F46\u6709\u7279\u5B9A\u7684\u4F7F\u7528\u573A\u666F
    
    #<span class="token punctuation">{</span><span class="token punctuation">}</span>\u4F1A\u628A\u4F20\u5165\u7684\u6570\u636E\u90FD\u5F53\u6210\u4E00\u4E2A\u5B57\u7B26\u4E32\u6765\u5904\u7406\uFF0C\u4F1A\u5728\u4F20\u5165\u7684\u6570\u636E\u4E0A\u9762\u52A0\u5F15\u53F7

	$<span class="token punctuation">{</span><span class="token punctuation">}</span>\u5219\u662F\u628A\u4F20\u5165\u7684\u6570\u636E\u76F4\u63A5\u663E\u793A\u5728sql\u8BED\u53E5\u4E2D\uFF0C\u4E0D\u4F1A\u6DFB\u52A0\u53CC\u5F15\u53F7<span class="token punctuation">(</span>\u8FD9\u610F\u5473\u7740\u5982\u679C\u975E\u8981\u4F20\u5165\u975E\u8868\u540D\u6216\u5217\u540D\u7684\u53C2\u6570\uFF0C\u9700\u8981\u81EA\u5DF1\u52A0\u5F15\u53F7<span class="token punctuation">)</span>

    statement\u6709\u6570\u636E\u5E93\u6CE8\u5165\u7684\u98CE\u9669\uFF0C\u5DE5\u4F5C\u4E2D\u6211\u4EEC\u5E94\u8BE5\u5C3D\u91CF\u4F7F\u7528<span class="token class-name">PrepareStatement</span>\uFF0C\u4E5F\u5C31\u662F\u4F7F\u7528#<span class="token punctuation">{</span><span class="token punctuation">}</span> \u8FD9\u79CD\u65B9\u5F0F
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> 
<span class="token operator">-</span> $<span class="token punctuation">{</span><span class="token punctuation">}</span> \u7684\u4F7F\u7528\u573A\u666F\uFF1A

  \u5F53\u6211\u4EEC\u5BF9SQL\u8BED\u53E5\u4F20\u5165\u8868\u540D\u6216\u8005\u662F\u5217\u540D\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528$<span class="token punctuation">{</span><span class="token punctuation">}</span> \u6765\u53D6\u503C\u3002
  \uFF08\u56E0\u4E3A\u5982\u679C\u4F7F\u7528 #<span class="token punctuation">{</span><span class="token punctuation">}</span> \u6765\u53D6\u503C\uFF0CSQL\u8BED\u53E5\u4F1A\u5148\u9884\u7F16\u8BD1\uFF08\u7F3A\u5C11\u8868\u540D \u6216\u8005\u662F\u5217\u540D\uFF09\uFF0C\u9884\u7F16\u8BD1\u4F1A\u901A\u4E0D\u8FC7\uFF09
  
   <span class="token operator">-</span> \u5F53\u6570\u636E\u5E93\u5206\u8868\u540E\uFF0C\u9700\u8981\u4F20\u5165\u8868\u540D 
     \u5206\u8868\uFF1A\u540C\u4E00\u79CD\u6570\u636E\uFF0C\u5206\u5F00\u5728\u4E0D\u540C\u7684\u8868\uFF08\u8FD9\u4E9B\u4E0D\u540C\u7684\u8868\uFF0C\u53EA\u6709\u540D\u5B57\u4E0D\u540C\uFF0C\u7ED3\u6784\u662F\u4E00\u6837\u7684\uFF09\u4E2D\u5B58\u50A8\u7684\u60C5\u51B5
    
   <span class="token operator">-</span> \u5F53\u9700\u8981\u6392\u5E8F\u3001\u5206\u7EC4\u7684\u65F6\u5019\uFF0C\u4E5F\u8981\u4F20\u5165\u5217\u540D
    
 \u8FD9\u4E9B\u573A\u666F\u4E2D\u867D\u7136\u9700\u8981\u4F20\u503C\uFF0C\u4F46\u90FD\u4E0D\u4F1A\u662F\u7528\u6237\u8F93\u5165\u7684\u503C\uFF0C\u5373\u4FBF\u662F\u5217\u540D\u3001\u6211\u4EEC\u4E5F\u4F1A\u8FDB\u884C\u5404\u79CD\u9650\u5236\uFF0C\u907F\u514D\u7528\u6237\u8F93\u5165\u8FD9\u4E9B\u5185\u5BB9\uFF0C\u9020\u6210\u5B89\u5168\u9690\u60A3

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u4F7F\u7528\u793A\u4F8B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Order</span><span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token function">selectOrderArray</span><span class="token punctuation">(</span><span class="token class-name">String</span> tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    id, order_name as orderName, price, user_id as userId
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectOrderArray<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    from \${tableName}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectOrderArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> tableName <span class="token operator">=</span> <span class="token string">&quot;\`order\`&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Order</span><span class="token punctuation">[</span><span class="token punctuation">]</span> orders <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">selectOrderArray</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> orders<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orders<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_5-mybatis\u7F13\u5B58" tabindex="-1"><a class="header-anchor" href="#_5-mybatis\u7F13\u5B58" aria-hidden="true">#</a> 5. mybatis\u7F13\u5B58</h3><p>Mybatis\u53EF\u4EE5\u7ED9\u6211\u4EEC\u7F13\u5B58\u67E5\u8BE2\u7684\u7ED3\u679C\u3002</p><p>Mybatis\u7684\u7F13\u5B58\u6709\u4E24\u79CD\uFF0C\u5206\u522B\u53EB\u505A\u4E00\u7EA7\u7F13\u5B58\u548C\u4E8C\u7EA7\u7F13\u5B58\u3002</p><br><p><strong>\u4E00\u7EA7\u7F13\u5B58</strong>\uFF1A</p><p>Mybatis\u7684\u4E00\u7EA7\u7F13\u5B58\u662F\u4E00\u4E2A<span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"><strong>SqlSession\u7EA7\u522B</strong></span>\u7684\u7F13\u5B58\u3002</p><p>\u610F\u601D\u5C31\u662F\u4F7F\u7528\u540C\u4E00\u4E2ASqlSession\uFF0C\u53BB\u4F7F\u7528\u540C\u6837\u7684\u6761\u4EF6\u67E5\u8BE2\u540C\u6837\u7684\u6570\u636E\uFF0C\u90A3\u4E48\u5728\u7B2C\u4E00\u6B21\u67E5\u8BE2\u5B8C\u4E4B\u540E\uFF0C\u4F1A\u628A\u67E5\u8BE2\u7684\u7ED3\u679C\u653E\u5230\u8FD9\u4E2ASqlSession\u7684\u5185\u90E8\uFF08\u5185\u5B58\u7A7A\u95F4\uFF09\uFF0C\u7B49\u5230\u540E\u9762\u67E5\u8BE2\u7684\u65F6\u5019\uFF0C\u5047\u5982\u4F7F\u7528\u7684\u662F\u540C\u4E00\u4E2ASqlSession\uFF0C\u4F20\u5165\u7684\u662F\u540C\u6837\u7684\u53C2\u6570\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u65F6\u5019\uFF0C\u5C31\u4F1A\u76F4\u63A5\u4ECESqlSesssion\u5185\u90E8\u53D6\u51FA\u7ED3\u679C\uFF0C\u5E76\u8FD4\u56DE\uFF0C\u4E0D\u4F1A\u67E5\u8BE2\u6570\u636E\u5E93\u4E86\u3002</p><p>Mybatis\u7684\u4E00\u7EA7\u7F13\u5B58\u9ED8\u8BA4\u662F\u5F00\u542F\u7684\uFF0C\u4E5F\u6CA1\u6709\u63D0\u4F9B\u5F00\u5173\u7ED9\u7528\u6237\u5173\u95ED\u3002</p><br><p>\u4E8C\u7EA7\u7F13\u5B58\u662F\u4E00\u4E2A<span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"><strong>namespace\u7EA7\u522B</strong></span>\u7684\u7F13\u5B58\u3002\u610F\u601D\u5C31\u662F\u6BCF\u4E00\u4E2AMapper.xml\u914D\u7F6E\u6587\u4EF6\uFF0C\u90FD\u53EF\u4EE5\u5F00\u542F\u81EA\u5DF1\u7684\u7F13\u5B58\u3002</p><p><img src="`+k+`" alt="image-20220331211827277" loading="lazy"></p><br><p>\u5982\u4F55\u5F00\u542FMybatis\u7684\u4E8C\u7EA7\u7F13\u5B58\u5462\uFF1F</p><ul><li><p>\u7F13\u5B58\u603B\u5F00\u5173</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- \u4E8C\u7EA7\u7F13\u5B58\u603B\u5F00\u5173 \u9ED8\u8BA4\u662F\u5F00\u542F\u7684--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u9700\u8981\u6253\u5F00\u5177\u4F53\u7684Mapper.xml \u914D\u7F6E\u6587\u4EF6\u7684\u7F13\u5B58\u5F00\u5173</p><p><img src="`+d+'" alt="image-20220331155958577" loading="lazy"></p></li><li><p>\u67E5\u8BE2\u6D89\u53CA\u5230\u7684\u5B9E\u4F8B\u5BF9\u8C61\uFF0C\u9700\u8981\u5B9E\u73B0\u5E8F\u5217\u5316\u63A5\u53E3</p><p><img src="'+v+'" alt="image-20220331161218301" loading="lazy"></p></li></ul><p>\u200B \u5982\u4F55\u5F00\u542F\u5462\uFF1F</p><p><img src="'+m+'" alt="image-20220331161307273" loading="lazy"></p><br><p>Mybatis\u7684\u4E00\u7EA7\u7F13\u5B58\u548C\u4E8C\u7EA7\u7F13\u5B58\u5728\u5DE5\u4F5C\u4E2D\u7528\u4E0D\u7528\u5462\uFF1F \u73B0\u5728\u7684\u60C5\u51B5\u662F\u4F01\u4E1A\u4E00\u822C\u4E0D\u4F7F\u7528Mybatis\u7684\u4E00\u7EA7\u7F13\u5B58\u548C\u4E8C\u7EA7\u7F13\u5B58\u3002</p><p>\u4E00\u7EA7\u7F13\u5B58\u4E0D\u591F\u5F3A\u5927\uFF0C\u56E0\u4E3A\u4E00\u7EA7\u7F13\u5B58\u7684\u4F7F\u7528\u6709\u5C40\u9650\u6027\uFF0C\u8981\u57FA\u4E8E\u540C\u4E00\u4E2ASQLSession\u3002</p><p>\u4E8C\u7EA7\u7F13\u5B58\u4E00\u822C\u4E5F\u4E0D\u7528\uFF0C\u56E0\u4E3A\u4E8C\u7EA7\u7F13\u5B58\u4F5C\u4E3A\u7F13\u5B58\u6765\u8BF4\uFF0C\u529F\u80FD\u662F\u4E0D\u591F\u7684\u3002</p><p>\u5BF9\u4E8E\u7F13\u5B58\u7684 <span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"><strong>\u529F\u80FD\u6027\u7684\u652F\u6301\u662F\u6BD4\u8F83\u5C11</strong></span> \u7684\uFF0C\u800C\u4E14\u4F7F\u7528\u8D77\u6765\uFF0C\u8FD8\u6709\u5B89\u5168\u6027\u7684\u95EE\u9898\u3002</p><br><p>\u90A3\u4E48\u4F7F\u7528\u4EC0\u4E48\u6765\u5F53\u7F13\u5B58\u5462\uFF1F</p><ul><li>Redis</li></ul><p><img src="'+g+`" alt="image-20220331162653277" loading="lazy"></p><br><h2 id="\u4E8C-\u8F93\u5165\u8F93\u51FA\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#\u4E8C-\u8F93\u5165\u8F93\u51FA\u6620\u5C04" aria-hidden="true">#</a> \u4E8C \u8F93\u5165\u8F93\u51FA\u6620\u5C04</h2><h3 id="_1-\u8F93\u5165\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#_1-\u8F93\u5165\u6620\u5C04" aria-hidden="true">#</a> 1. \u8F93\u5165\u6620\u5C04</h3><p>\u8F93\u5165\u6620\u5C04\u5176\u5B9E\u5C31\u662F\u8BF4Mybatis\u662F\u5982\u4F55\u4F20\u503C\u7684</p><h4 id="_1-\u4E00\u4E2A\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_1-\u4E00\u4E2A\u53C2\u6570" aria-hidden="true">#</a> 1) \u4E00\u4E2A\u53C2\u6570</h4><p>mapper</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4EC0\u4E48\u662F\u7B80\u5355\u53C2\u6570\u5462\uFF1F</span>
<span class="token comment">// \u5728Mybatis\u4E2D\uFF0C\u57FA\u672C\u7C7B\u578B+String + \u5305\u88C5\u7C7B\u578B = \u7B80\u5355\u53C2\u6570</span>
<span class="token class-name">User</span> <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.cskaoyan.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"><strong>#{\u4EFB\u610F\u503C}</strong></span> \u8FD9\u79CD\u65B9\u5F0F\u6765\u53D6\u503C\u3002</p><p>tip\uFF1A\u5F53\u53EA\u4F20\u4E00\u4E2A\u53C2\u6570\u7684\u65F6\u5019\uFF0C\u5047\u5982\u8FD9\u4E2A\u53C2\u6570\u914D\u7F6E\u4E86@Param\u6CE8\u89E3\uFF0C\u90A3\u4E48\u540E\u7EED\u5C31\u4E0D\u80FD\u901A\u8FC7 <code>#{\u4EFB\u610F\u503C} </code> \u6765\u53D6\u503C\u4E86</p><br><h4 id="_2-\u591A\u4E2A\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_2-\u591A\u4E2A\u53C2\u6570" aria-hidden="true">#</a> 2) \u591A\u4E2A\u53C2\u6570</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token number">1.</span> \u6309\u7167\u53C2\u6570\u51FA\u73B0\u7684\u987A\u5E8F \uFF08\u51E0\u4E4E\u4E0D\u7528\uFF09
    
<span class="token number">2.</span> \u4F7F\u7528java\u5BF9\u8C61\u4F20\u53C2 \uFF08\u5E38\u7528\uFF09
    
<span class="token number">3.</span> \u4F7F\u7528<span class="token annotation punctuation">@Param</span>\u6CE8\u89E3\u4F20\u53C2 \uFF08\u5E38\u7528\uFF09
    
<span class="token number">4.</span> \u4F7F\u7528 map \u4F20\u53C2\uFF08\u51E0\u4E4E\u4E0D\u7528\uFF09

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>1. \u6309\u7167\u53C2\u6570\u987A\u5E8F</strong>\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Mapper\u63A5\u53E3</span>
<span class="token class-name">Integer</span> <span class="token function">insertUser3</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (null, #{arg0}, #{arg1}, #{arg2}, #{arg3})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>arg0, arg1... \u8FD8\u53EF\u4EE5\u66FF\u6362\u4E3A param1, param2 ...</p><p>\u4F46\u8FD9\u79CD\u65B9\u5F0F\u53EF\u8BFB\u6027\u8F83\u5DEE\uFF0C\u5F53\u53C2\u6570\u4E2A\u6570\u589E\u52A0\u65F6\uFF0C\u5F88\u5BB9\u6613\u51FA\u9519</p><br><p>**2. \u4F7F\u7528java\u5BF9\u8C61\u4F20\u53C2 **\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Mapper\u63A5\u53E3</span>
<span class="token class-name">Integer</span> <span class="token function">insertUser1</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (#{id}, #{username}, #{password}, #{age}, #{gender})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"><strong>#{\u6210\u5458\u53D8\u91CF\u540D}</strong></span> \u6765\u53D6\u503C\u3002\u672C\u8D28\u4E0A\u662F\u901A\u8FC7JavaBean\u4E2D\u7684getter\u7684\u540D\u5B57\u6765\u53D6\u503C\u3002\u4E00\u822C\u6210\u5458\u53D8\u91CF\u540D\u548Cgetter\u65B9\u6CD5\u662F\u540C\u540D\u7684\u3002</p><br><p>**3. \u4F7F\u7528@Param\u6CE8\u89E3\u4F20\u53C2 **\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Mapper\u63A5\u53E3</span>
<span class="token class-name">Integer</span> <span class="token function">insertUser2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Integer</span> <span class="token function">insertUser4</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;pw&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (#{user.id}, #{user.username}, #{user.password}, #{user.age}, #{user.gender})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (null, #{name}, #{pw}, #{age}, #{gender})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u5F53\u53C2\u6570\u4E2D\u7684\u5BF9\u8C61\u6709@Param\u6CE8\u89E3\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u901A\u8FC7<span style="color:red;font-size:\u6587\u5B57\u5927\u5C0F;font-family:\u5B57\u4F53;"> #{\u6CE8\u89E3\u7684\u503C . \u6210\u5458\u53D8\u91CF\u540D} </span>\u6765\u53D6\u503C\u3002</p><br><p>**4. \u4F7F\u7528 map \u4F20\u53C2 **\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Mapper\u63A5\u53E3</span>
<span class="token class-name">User</span> <span class="token function">selectUserByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u5F53\u63A5\u53E3\u4E2D\u4F7F\u7528\u4E86 @Param \u6CE8\u89E3\u65F6\uFF0C\u5728xml\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u4F7F\u7528\u65B9\u5F0F\u548C\u5BF9\u8C61+\u6CE8\u89E3\u7684\u65B9\u5F0F\u7C7B\u4F3C</p><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserByMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.Map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where username = #{name} and age = #{age}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7531\u4E0A\u53EF\u89C1\uFF0Cmap\u4E2D\u7684key\u503C\u662F\u4E0D\u53EF\u63A7\u7684\uFF0C\u53EF\u7531\u8C03\u7528\u8005\u968F\u610F\u547D\u540D\uFF0C\u6545\u8BE5\u65B9\u5F0F\u4E0D\u63A8\u8350\u4F7F\u7528</p><br><h3 id="_2-\u8F93\u51FA\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#_2-\u8F93\u51FA\u6620\u5C04" aria-hidden="true">#</a> 2. \u8F93\u51FA\u6620\u5C04</h3><p>\u8F93\u51FA\u6620\u5C04\u5373Mybatis \u53EF\u4EE5\u901A\u8FC7\u54EA\u4E9B\u65B9\u5F0F\u7ED9\u6211\u4EEC\u5C01\u88C5\u4ECE\u6570\u636E\u5E93\u8FD4\u56DE\u7684\u6570\u636E\u3002</p><br><h4 id="_1-\u7B80\u5355\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_1-\u7B80\u5355\u7C7B\u578B" aria-hidden="true">#</a> 1) \u7B80\u5355\u7C7B\u578B</h4><p><strong>\u8FD4\u56DE\u7B80\u5355\u7C7B\u578B</strong>\uFF1A\uFF08\u5305\u62EC\uFF1AJava\u8BED\u6CD5\u4E2D\u7684\u57FA\u672C\u7C7B\u578B\u3001\u5305\u88C5\u7C7B\u4EE5\u53CA\u5B57\u7B26\u4E32 Java.lang.String\uFF09</p><p>\u4E0D\u8BBA\u4F60\u9700\u8981\u8FD4\u56DE\u5355\u4E2A\u503C\u3001\u8FD8\u662F\u8FD4\u56DE\u4E00\u4E2AList\uFF0C\u90FD\u53EA\u9700\u8981\u5728\u63A5\u53E3\u4E2D\u6307\u5B9A\u7C7B\u578B\u5373\u53EF\uFF0Cxml\u6587\u4EF6\u4E2D\u7684 resultType \u5C5E\u6027\u53EF\u8BBE\u7F6E\u4E5F\u53EF\u4EE5\u4E0D\u8BBE\u7F6E</p><br><h4 id="_2-java\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#_2-java\u5BF9\u8C61" aria-hidden="true">#</a> 2) Java\u5BF9\u8C61</h4><p><strong>\u8FD4\u56DE\u4E00\u4E2AJava\u5BF9\u8C61\uFF08\u6216\u8005\u8BF4java bean \u3001\u5B9E\u4F53\u7C7B\u7B49\uFF09</strong>\uFF1A</p><p>\u63A5\u53E3\u4E2D\u8FD4\u56DE\u503C\u4E3A\u7C7B\u540D\uFF0Cxml\u4E2D resultType \u9700\u8981\u8BBE\u7F6E \u5168\u9650\u5B9A\u7C7B\u540D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// JavaBean</span>
<span class="token class-name">User</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5217\u540D\u548C\u8868\u5B57\u6BB5\u540D\u4E0D\u4E00\u81F4\u7684\u60C5\u51B5</span>
<span class="token class-name">UserVO</span> <span class="token function">selectById2</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.vo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5982\u679C\u51FA\u73B0\u6570\u636E\u5E93\u4E2D\u5217\u7684\u503C\u548C\u5BF9\u8C61\u4E2D\u6210\u5458\u53D8\u91CF\u7684\u503C\u5BF9\u5E94\u4E0D\u4E0A\u7684\u65F6\u5019\uFF0C\u53EF\u4EE5\u91C7\u7528\u522B\u540D\u7684\u65B9\u5F0F\u6765\u89E3\u51B3 (\u6216\u8005\u53C2\u7167\u540E\u9762\u7684ResultMap)--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.vo.UserVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id,name as username,email,age from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-resultmap" tabindex="-1"><a class="header-anchor" href="#_3-resultmap" aria-hidden="true">#</a> 3) ResultMap</h3><p>Mybatis\u7ED9\u5F00\u53D1\u8005\u63D0\u4F9B\u7684\u9AD8\u7EA7\u6620\u5C04\u529F\u80FD\uFF0C\u76EE\u524D\u53EF\u4EE5\u5148\u4F7F\u7528\u4E00\u4E2A\u7B80\u5355\u7248\u672C\uFF0C\u8FDE\u63A5\u67E5\u8BE2\u7684\u65F6\u5019 ResultMap\u8FD8\u5927\u6709\u7528\u6B66\u4E4B\u5730</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// resultMap </span>
<span class="token class-name">User</span> <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2Map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- \u4E3B\u952E\u901A\u8FC7id\u6807\u7B7E\u6765\u6620\u5C04\uFF0C\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5728\u591A\u8868\u67E5\u8BE2\u7684\u65F6\u5019\u63D0\u9AD8\u6548\u7387
		column: \u5217\u540D
		property\uFF1A\u6210\u5458\u53D8\u91CF\u540D     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nickname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nickname<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2Map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAllUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2Map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="\u4E09-mybatis\u52A8\u6001sql" tabindex="-1"><a class="header-anchor" href="#\u4E09-mybatis\u52A8\u6001sql" aria-hidden="true">#</a> \u4E09 mybatis\u52A8\u6001SQL</h2><h3 id="_1-if\u548Cwhere" tabindex="-1"><a class="header-anchor" href="#_1-if\u548Cwhere" aria-hidden="true">#</a> 1. if\u548Cwhere</h3><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">void</span> <span class="token function">updateUsernameOrAgeById</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUsernameOrAgeById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>username = #{username},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>age = #{age},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
where\u6807\u7B7E\u4E09\u4E2A\u4F5C\u7528\uFF1A
1. sql\u8BED\u53E5\u4E2D\u62FC\u63A5where\u5B57\u7B26
2. sql\u8BED\u53E5\u4E2D\u53BB\u9664\u8DDF\u7740\u7684and\u6216\u8005or
3. where \u6807\u7B7E\u91CC\u9762\u6CA1\u6709\u5185\u5BB9\uFF0C\u4E0D\u4F1A\u62FC\u63A5where


xml\u6587\u4EF6\u4E2D\u5982\u679C\u9700\u8981\u7528\u5230\u5C0F\u4E8E\uFF0C\u9700\u8981\u4F7F\u7528\u8F6C\u4E49\u5B57\u7B26(\u6B63\u5E38\u5927\u4E8E\u6CA1\u6709\u95EE\u9898\uFF0C\u4F46\u662F\u4E5F\u63A8\u8350\u4F7F\u7528\u8F6C\u4E49\u5B57\u7B26)

    \u7279\u6B8A\u5B57\u7B26           \u8F6C\u4E49\u5B57\u7B26            	OGNL
    &gt;                  &amp;gt;                gt
    &lt;                  &amp;lt;                lt
    &gt;=                 &amp;gt;=               gte
    &lt;=                 &amp;lt;=               lte

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-choose-when-otherwise" tabindex="-1"><a class="header-anchor" href="#_2-choose-when-otherwise" aria-hidden="true">#</a> 2. choose when otherwise</h3><p>if\u5E76\u6CA1\u6709else\u6807\u7B7E\uFF0C\u5728Mybatis\u4E2D\u4F7F\u7528 <code>choose-when-otherwise</code> \u6765\u66FF\u4EE3 <code>if-else</code> \u7684\u4F5C\u7528</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
\u8FD9\u4E2A\u6807\u7B7E\u5C31\u76F8\u5F53\u4E8Ejava\u4E2D\u7684 \`<span class="token keyword">if</span> <span class="token keyword">else</span>\`<span class="token operator">:</span>

<span class="token generics"><span class="token punctuation">&lt;</span>when<span class="token punctuation">&gt;</span></span>       \u76F8\u5F53\u4E8E  <span class="token keyword">if</span>

<span class="token generics"><span class="token punctuation">&lt;</span>otherwise<span class="token punctuation">&gt;</span></span>  \u76F8\u5F53\u4E8E  <span class="token keyword">else</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserListById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id gt 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                id = (select max(id) from user)
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>
                id = (select min(id) from user)
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-trim\u548Cset" tabindex="-1"><a class="header-anchor" href="#_3-trim\u548Cset" aria-hidden="true">#</a> 3. trim\u548Cset</h3><p><strong>trim\u793A\u4F8B</strong>:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token comment">&lt;!--
        prefix: \u589E\u52A0\u6307\u5B9A\u7684\u524D\u7F00
        suffix: \u589E\u52A0\u6307\u5B9A\u7684\u540E\u7F00
        prefixoverrdes:  \u5220\u9664\u6307\u5B9A\u7684\u524D\u7F00
        suffixOverrides: \u5220\u9664\u6307\u5B9A\u7684\u540E\u7F00
    --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u6839\u636Eid\u4FEE\u6539user\u7684\u503C\uFF0C\u5047\u5982\u6210\u5458\u53D8\u91CF\u6CA1\u6709\u503C\uFF0C\u90A3\u4E48\u4E0D\u4FEE\u6539</span>
<span class="token keyword">int</span> <span class="token function">updateUserByIdSelective</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUserByIdSelective<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    update user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.name != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> name = #{user.name},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> age = #{user.age},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.nickname != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> nickname = #{user.nickname},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        id = #{user.id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>set\u793A\u4F8B</strong>\uFF1A</p><p>mapper</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u6839\u636Eid\u4FEE\u6539user\u7684\u503C\uFF0C\u5047\u5982\u6210\u5458\u53D8\u91CF\u6CA1\u6709\u503C\uFF0C\u90A3\u4E48\u4E0D\u4FEE\u6539</span>
<span class="token keyword">int</span> <span class="token function">updateUserByIdSelectiveUseSet</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>mapper.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUserByIdSelectiveUseSet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.name != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> name = #{user.name},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> age = #{user.age},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.nickname != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> nickname = #{user.nickname},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        id = #{user.id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;set&gt;</code> \u6807\u7B7E\u5C31\u76F8\u5F53\u4E8E <code>&lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt;</code> \u8FD9\u4E2A\u914D\u7F6E\u3002</p><br><h3 id="_4-sql\u548Cinclude" tabindex="-1"><a class="header-anchor" href="#_4-sql\u548Cinclude" aria-hidden="true">#</a> 4. sql\u548Cinclude</h3><p>\u5728Mybatis\u4E2D\uFF0C\u5BF9\u91CD\u590D\u4F7F\u7528\u7684\u4EE3\u7801\u7247\u6BB5\u53EF\u4EE5\u4F7F\u7528sql\u6807\u7B7E\u5355\u72EC\u5217\u51FA\u6765\uFF0C\u7136\u540E\u5728\u5404\u4E2Asql\u8BED\u53E5\u4E2D\u4F7F \u7528\u6807\u7B7E\u5F15\u5165\u4EE3\u7801\u7247\u6BB5</p><p>\u4E00\u822C\u4F7F\u7528 <code>sql-include</code> \u6807\u7B7E\u6765\u5E2E\u52A9\u6211\u4EEC\u63D0\u53D6\u5217\u540D</p><br><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectUserDynamic</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    id, username, password, age, gender
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserDynamic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    from user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> and username = #{username} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> and age = #{age} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> and gender = #{gender} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_5-selectkey\u83B7\u53D6\u81EA\u589Eid" tabindex="-1"><a class="header-anchor" href="#_5-selectkey\u83B7\u53D6\u81EA\u589Eid" aria-hidden="true">#</a> 5. selectKey\u83B7\u53D6\u81EA\u589EID</h3><p><strong>selectKey\u6807\u7B7E</strong>\uFF1A\u8FD9\u4E2A\u6807\u7B7E\u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5728\u6267\u884C\u76EE\u6807SQL\u8BED\u53E5\u4E4B\u524D\u6216\u8005\u4E4B\u540E\u6267\u884C\u989D\u5916\u7684\u4E00\u6761SQL\u8BED\u53E5</p><br><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">Integer</span> <span class="token function">insertUserAndGetId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUserAndGetId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (null, #{user.username}, #{user.password}, #{user.age}, #{user.gender})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select last_insert_id()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u6D4B\u8BD5\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsertUserAndGetId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;user2205&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Integer</span> affectedRows <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insertUserAndGetId</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;affectedRows = &quot;</span> <span class="token operator">+</span> affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;\u63D2\u5165\u6210\u529F, ID = &quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>useGeneratedKeys\u5C5E\u6027</strong>\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token comment">&lt;!--
\u9664\u4E86\u4E0A\u8FF0\u65B9\u5F0F\u5916\uFF0C\u83B7\u53D6\u81EA\u589EID\u8FD8\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528 insert\u6807\u7B7E\u7684 useGeneratedKeys \u5C5E\u6027\uFF1A
    useGeneratedKeys: \u8868\u793A\u5F00\u542F\u81EA\u589E\u4E3B\u952E\u7684\u529F\u80FD
    keyProperty: \u8868\u793A\u628A\u503C\u6620\u5C04\u5230\u54EA\u91CC\u53BB
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUserAndGetId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&gt;
    insert into user values (null, #{user.username}, #{user.password}, #{user.age}, #{user.gender})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select last_insert_id()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

&lt;!-- useGeneratedKeys (insert and update only) 
This tells MyBatis to use the JDBC getGeneratedKeys method to retrieve keys generated internally 
by the database (e.g. auto increment fields in RDBMS like MySQL or SQL Server). Default: false.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_6-foreach\u6807\u7B7E" tabindex="-1"><a class="header-anchor" href="#_6-foreach\u6807\u7B7E" aria-hidden="true">#</a> 6. foreach\u6807\u7B7E</h3><p>The <em>foreach</em> element is very powerful, and allows you to specify a collection, declare item and index variables that can be used inside the body of the element.</p><p>It also allows you to specify opening and closing strings, and add a separator to place in between iterations.</p><p>The element is smart in that it won\u2019t accidentally append extra separators.</p><br><p><strong>foreach\u6807\u7B7E \u4F7F\u7528\u573A\u666F</strong> \uFF1A1 - in \u67E5\u8BE2\u3001 2 - \u6279\u91CF\u63D2\u5165</p><br><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">int</span> <span class="token function">insertOrderBatch</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderList&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orderList<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderByIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertOrderBatch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into \`order\` values
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        (null, #{o.orderName}, #{o.price}, #{o.userId})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectOrderByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id, order_name as orderName, price
    from \`order\` where
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ids<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id in (<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u3010\u6CE8\u610F\u3011\uFF1A<code>&lt;foreach collection=&quot;&quot;&gt;</code> \u6807\u7B7E\u7684collection\u5C5E\u6027</p><p>\u5F53\u63A5\u53E3\u4E2D\u4F7F\u7528\u4E86 @Param \u6CE8\u89E3\u65F6\uFF0C\u76F4\u63A5\u4F7F\u7528 \u6CE8\u89E3\u4E2D\u7684\u540D\u5B57\u5373\u53EF\uFF0C\u5165\u4E0A\u4F8B\u4E2D\u60C5\u5F62</p><p>\u4F46\u5982\u679C\u63A5\u53E3\u4E2D\u6CA1\u6709\u4F7F\u7528\u6CE8\u89E3\uFF0C</p><p>\u200B \u90A3\u4E48\u5982\u679C\u662F List \u7C7B\u578B\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528 <code>agr0 | collection | list</code> \u4E09\u79CD\u65B9\u5F0F\u5747\u53EF</p><p>\u200B \u5982\u679C\u662F\u6570\u7EC4\u7C7B\u578B\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528 <code>arg0 | array</code></p><br><p>\u6D4B\u8BD5\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// in \u67E5\u8BE2\u6D4B\u8BD5</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectOrderByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orderList <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">selectOrderByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Order</span> order <span class="token operator">:</span> orderList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u6279\u91CF\u63D2\u5165</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsertOrderBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orderList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> orderName <span class="token operator">=</span> <span class="token string">&quot;mystery&quot;</span> <span class="token operator">+</span> start<span class="token punctuation">;</span>
        <span class="token class-name">Long</span> price <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">999999</span> <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> userId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Order</span> order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> orderName<span class="token punctuation">,</span> price<span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        orderList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
        start<span class="token operator">++</span><span class="token punctuation">;</span>
        num<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orderList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> affectedRows <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">insertOrderBatch</span><span class="token punctuation">(</span>orderList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;batch insert affectedRows = &quot;</span> <span class="token operator">+</span> affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="\u56DB-mybatis\u591A\u8868\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u56DB-mybatis\u591A\u8868\u67E5\u8BE2" aria-hidden="true">#</a> \u56DB mybatis\u591A\u8868\u67E5\u8BE2</h2><h3 id="_1-\u4E00\u5BF9\u4E00\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_1-\u4E00\u5BF9\u4E00\u67E5\u8BE2" aria-hidden="true">#</a> 1. \u4E00\u5BF9\u4E00\u67E5\u8BE2</h3><p><img src="`+b+'" alt="image-20220330154112463" loading="lazy"></p><br><p><img src="'+q+`" alt="image-20220330154913251" loading="lazy"></p><br><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GoodsMapper</span> <span class="token punctuation">{</span>

    <span class="token class-name">GoodsVO</span> <span class="token function">selectGoodsById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectGoodsByIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;idList&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">GoodsDetail</span> <span class="token function">selectGoodsDetailById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.mapper.GoodsMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!--\u8FDE\u63A5\u67E5\u8BE2--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.GoodsVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.GoodsDetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gd_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img_url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>imgUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select *
        from goods as g
                 left join goods_detail as gd
                           on g.gd_id = gd.id
        where g.id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

    
    <span class="token comment">&lt;!--\u5206\u6B21\u67E5\u8BE2--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from goods
        where id in
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                #{id}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.GoodsVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.GoodsDetail<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsDetailById<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gd_id<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsDetailById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.GoodsDetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select id, price, img_url as imgUrl, g_id as gId
        from goods_detail where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u6D4B\u8BD5\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GoodsMapperTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">GoodsMapper</span> goodsMapper<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            goodsMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">GoodsMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectGoodsById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">GoodsVO</span> goodsVO <span class="token operator">=</span> goodsMapper<span class="token punctuation">.</span><span class="token function">selectGoodsById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goodsVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectGoodsDetailByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsVO</span><span class="token punctuation">&gt;</span></span> goodsVOList <span class="token operator">=</span> goodsMapper<span class="token punctuation">.</span><span class="token function">selectGoodsByIds</span><span class="token punctuation">(</span>idList<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">GoodsVO</span> goodsVO <span class="token operator">:</span> goodsVOList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goodsVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-\u4E00\u5BF9\u591A\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_2-\u4E00\u5BF9\u591A\u67E5\u8BE2" aria-hidden="true">#</a> 2. \u4E00\u5BF9\u591A\u67E5\u8BE2</h3><p><img src="`+y+`" alt="image-20220330192058797" loading="lazy"></p><br><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// \u67E5\u8BE2\u6307\u5B9Aid\u7684\u7528\u6237\u53CA\u5176\u5BF9\u5E94\u7684\u8BA2\u5355\u5217\u8868</span>
<span class="token class-name">UserVO</span> <span class="token function">selectUserVOById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- UserMapper.xml --&gt;</span>
	<span class="token comment">&lt;!-- \u8FDE\u63A5\u67E5\u8BE2 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserVOByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from user as u
        left join \`order\` as o on u.id = o.user_id
        where u.id in
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                #{id}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>order_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>


    <span class="token comment">&lt;!-- \u5206\u6B21\u67E5\u8BE2 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserVOById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select  id as uid, username, password, age, gender
        from user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.List<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.mapper.OrderMapper.selectOrderByUserId<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uid<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- OrderMapper.xml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectOrderByUserId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id, order_name as orderName, price, user_id as userId
    from \`order\`
    where user_id = #{userId}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u6D4B\u8BD5\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUserVOById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">UserVO</span> userVO <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserVOById</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-\u591A\u5BF9\u591A\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#_3-\u591A\u5BF9\u591A\u67E5\u8BE2" aria-hidden="true">#</a> 3. \u591A\u5BF9\u591A\u67E5\u8BE2</h3><p><img src="`+h+`" alt="image-20220330201309679" loading="lazy"></p><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// UserRoleVO.java</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRoleVO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> roleList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>Mapper\u63A5\u53E3\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u67E5\u8BE2\u7528\u6237\u4FE1\u606F\uFF08\u5305\u62EC\u6709\u54EA\u4E9B role \uFF09</span>
<span class="token class-name">UserRoleVO</span> <span class="token function">selectUserRoleVOById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserRoleVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectUserRoleVOByIds</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--\u591A\u8868\u67E5\u8BE2 \u2014\u2014 \u591A\u5BF9\u591A (\u8FDE\u63A5\u67E5\u8BE2\uFF1A\u4E0E\u4E00\u5BF9\u591A\u7684\u65B9\u5F0F\u57FA\u672C\u4E00\u81F4) --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserRoleVOById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select u.id as uid, username, \`password\`, age, gender,role_id, role_name, description
        from user as u
        left join sys_user_role as ur on u.id = ur.user_id
        left join role as r on ur.role_id = r.id
        where u.id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserRoleVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>


    <span class="token comment">&lt;!--\u591A\u8868\u67E5\u8BE2 \u2014\u2014 \u591A\u5BF9\u591A (\u5206\u6B21\u67E5\u8BE2 ) --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserRoleVOByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      select * from user
      where id in
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              #{id}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserRoleVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Role<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectRoleByUserId<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--\u6839\u636E\u7528\u6237 id\u67E5\u8BE2 \u89D2\u8272 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectRoleByUserId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select role_id as id, role_name as roleName, description
        from sys_user_role as ur
        left join role as r on ur.role_id = r.id
        where user_id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u6D4B\u8BD5\u7C7B\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u591A\u5BF9\u591A</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUserRoleVOById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">UserRoleVO</span> userRoleVO <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserRoleVOById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userRoleVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUserRoleVOByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserRoleVO</span><span class="token punctuation">&gt;</span></span> userRoleVOList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserRoleVOByIds</span><span class="token punctuation">(</span>idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">UserRoleVO</span> userRoleVO <span class="token operator">:</span> userRoleVOList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userRoleVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="\u4E94-\u4F7F\u7528\u6280\u5DE7\u53CA\u95EE\u9898\u8BB0\u5F55" tabindex="-1"><a class="header-anchor" href="#\u4E94-\u4F7F\u7528\u6280\u5DE7\u53CA\u95EE\u9898\u8BB0\u5F55" aria-hidden="true">#</a> \u4E94 \u4F7F\u7528\u6280\u5DE7\u53CA\u95EE\u9898\u8BB0\u5F55</h2><h3 id="_1-idea\u5E38\u7528\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-idea\u5E38\u7528\u63D2\u4EF6" aria-hidden="true">#</a> 1. IDEA\u5E38\u7528\u63D2\u4EF6</h3><p><strong>Lombok</strong>\uFF1A</p><p>\u5148\u5728 IDEA \u4E2D \u5B89\u88C5 Lombok \u63D2\u4EF6\uFF0C\u7136\u540E\u5728\u9879\u76EE\u4E2D\u5BFC\u5305\u5373\u53EF\u4F7F\u7528</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// \u4F7F\u7528\u793A\u4F8B\uFF1A</span>
<span class="token annotation punctuation">@Data</span>                     <span class="token comment">// \u6709\u65E0\u53C2\u6784\u9020</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>       <span class="token comment">// \u5168\u53C2\u6784\u9020\uFF08\u4F1A\u5BFC\u81F4@Data\u7684\u65E0\u53C2\u6784\u9020\u5931\u6548\uFF09</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>        <span class="token comment">// \u65E0\u53C2\u6784\u9020\uFF08\u53EF\u4EE5\u7528\u6765\u89E3\u51B3@AllArgsConstructor\u5BFC\u81F4\u7684@Data\u65E0\u53C2\u6784\u9020\u5931\u6548\u95EE\u9898\uFF09</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lombok\u4E5F\u4F1A\u5E26\u6765\u4E00\u4E9B\u95EE\u9898\uFF1A</p><p>\u4E00\u4E2A\u9879\u76EE\u7EC4\u4E2D\uFF0C\u53EA\u8981\u6709\u4E00\u4E2A\u4EBA\u4F7F\u7528lombok\uFF0C\u90A3\u4E48\u5927\u5BB6\u5C31\u90FD\u5F97\u4F7F\u7528lombok\uFF0C\u5176\u5B9E\u4E0D\u592A\u53CB\u597D</p><p>\uFF08 \u9879\u76EE\u7EC4\u4E2D\u4E0D\u8981\u505A\u7B2C\u4E00\u4E2A\u4F7F\u7528Lombok\u7684\u4EBA\uFF01\uFF09</p><br><p><strong>MyBatisCodeHelper-Pro</strong>\uFF1A</p>`,306),V=s("Document\uFF1A "),D={href:"https://gejun123456.github.io/MyBatisCodeHelper-Pro",target:"_blank",rel:"noopener noreferrer"},R=s("https://gejun123456.github.io/MyBatisCodeHelper-Pro"),A=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
Mybatis\u6709\u5F88\u591A\u7C7B\u4F3C\u7684\u63D2\u4EF6\uFF0C\u8FD9\u4E9B\u63D2\u4EF6\u7684\u529F\u80FD\u5927\u540C\u5C0F\u5F02\u3002

- \u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u81EA\u52A8\u751F\u6210@Param\u6CE8\u89E3
- \u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u5728 \u63A5\u53E3\u6587\u4EF6 \u548C\u5176\u5BF9\u5E94\u7684 Mapper.xml \u4E4B\u95F4\u6765\u56DE\u8DF3\u8F6C
- \u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u81EA\u52A8\u751F\u6210\u6807\u7B7E
- \u53EF\u4EE5\u5E2E\u52A9\u6211\u4EEC\u63D0\u793A\u4EE3\u7801\uFF0C\u68C0\u67E5\u9519\u8BEF
   <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-mapper\u6587\u4EF6\u6A21\u677F" tabindex="-1"><a class="header-anchor" href="#_2-mapper\u6587\u4EF6\u6A21\u677F" aria-hidden="true">#</a> 2. mapper\u6587\u4EF6\u6A21\u677F</h3><p>\u6A21\u677F\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u6587\u4EF6\u6A21\u677F\u8BBE\u7F6E\u6B65\u9AA4\uFF1A</p><p><img src="`+f+'" alt="image-20220329155905784" loading="lazy"></p><br><h3 id="_3-\u7F3A\u5931jboss-vfs" tabindex="-1"><a class="header-anchor" href="#_3-\u7F3A\u5931jboss-vfs" aria-hidden="true">#</a> 3. \u7F3A\u5931Jboss.VFS</h3><p>\u5177\u4F53\u95EE\u9898\u63CF\u8FF0\uFF1Amybatis\u5F00\u542F\u65E5\u5FD7\u65F6\uFF0CIDEA\u63A7\u5236\u53F0\u4F1A\u8F93\u51FA\u4E00\u4E9B\u591A\u4F59\u7684\u5E72\u6270\u4FE1\u606F\u4EE5\u53CA\u4E71\u7801\uFF0C\u5982\u4E0B\uFF1A</p><p><img src="'+x+`" alt="image-20220329144640587" loading="lazy"></p><br><p>\u539F\u56E0\uFF08 mybatis-config.xml \u4E2D\u4F7F\u7528\u4E86 package\u7684\u65B9\u5F0F \uFF09\uFF1A</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--some environments--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tag<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain.blog.Tag<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- \u6B64\u5904\u4F1A\u8C03\u7528 VFS --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain.blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mapper.PostMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!-- \u6B64\u5904\u4F1A\u8C03\u7528 VFS --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mapper.builder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>\u89E3\u51B3\u65B9\u6CD5\uFF1A\u5F15\u5165 Jboss-VFS \u5373\u53EF</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jboss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jboss-vfs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.16.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18);function G(P,N){const a=c("ExternalLinkIcon");return l(),o("div",null,[w,S,n("p",null,[M,n("a",j,[I,t(a)])]),O,n("p",null,[U,n("a",L,[B,t(a)]),z]),T,n("p",null,[V,n("a",D,[R,t(a)])]),A])}var F=e(_,[["render",G],["__file","mybatis.html.vue"]]);export{F as default};
