<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.itdrizzle.cn/blog/Database/mybatis/mybatis.html"><meta property="og:site_name" content="Blog"><meta property="og:title" content="Mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><title>Mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨ | Blog</title><meta name="description" content="DevelopNote and Blog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/blog/assets/style.03678e8d.css">
    <link rel="modulepreload" href="/blog/assets/app.837ab119.js"><link rel="modulepreload" href="/blog/assets/mybatis.html.b4e8fbd4.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog/assets/mybatis.html.5e9dad89.js"><link rel="prefetch" href="/blog/assets/home.html.01166eaf.js"><link rel="prefetch" href="/blog/assets/index.html.2c142917.js"><link rel="prefetch" href="/blog/assets/home.html.e27b4130.js"><link rel="prefetch" href="/blog/assets/index.html.8704b022.js"><link rel="prefetch" href="/blog/assets/home.html.c878af3e.js"><link rel="prefetch" href="/blog/assets/index.html.6f5cb701.js"><link rel="prefetch" href="/blog/assets/home.html.840debc9.js"><link rel="prefetch" href="/blog/assets/index.html.7d22017f.js"><link rel="prefetch" href="/blog/assets/bigdecimal.html.41d79d0b.js"><link rel="prefetch" href="/blog/assets/corn.html.477aab87.js"><link rel="prefetch" href="/blog/assets/home.html.6492c20a.js"><link rel="prefetch" href="/blog/assets/home.html.e2b23942.js"><link rel="prefetch" href="/blog/assets/index.html.9ac293f9.js"><link rel="prefetch" href="/blog/assets/home.html.5b6ca4c0.js"><link rel="prefetch" href="/blog/assets/index.html.cb9da6e1.js"><link rel="prefetch" href="/blog/assets/mybatis-generator.html.28df4ffa.js"><link rel="prefetch" href="/blog/assets/mybatis-plus.html.3fa0b517.js"><link rel="prefetch" href="/blog/assets/mybatis-resource.html.cf1d7abc.js"><link rel="prefetch" href="/blog/assets/tk-mybatis.html.82ee5630.js"><link rel="prefetch" href="/blog/assets/innodb.html.f54e0c7f.js"><link rel="prefetch" href="/blog/assets/jdbc.html.b1c099cf.js"><link rel="prefetch" href="/blog/assets/mysql-index.html.ce424929.js"><link rel="prefetch" href="/blog/assets/mysql-optimization.html.0dc75b75.js"><link rel="prefetch" href="/blog/assets/mysql.html.0c8aff2c.js"><link rel="prefetch" href="/blog/assets/db2.html.92eaf205.js"><link rel="prefetch" href="/blog/assets/oracle.html.cb589e85.js"><link rel="prefetch" href="/blog/assets/redis-resource.html.11e7e002.js"><link rel="prefetch" href="/blog/assets/Redis.html.7f6721dc.js"><link rel="prefetch" href="/blog/assets/sql.html.ca64df3c.js"><link rel="prefetch" href="/blog/assets/index.html.d42f6808.js"><link rel="prefetch" href="/blog/assets/gc.html.57697c19.js"><link rel="prefetch" href="/blog/assets/Jvmå†…å­˜ç®¡ç†.html.8c6815b8.js"><link rel="prefetch" href="/blog/assets/Jvmç±»åŠ è½½.html.70a9dcdf.js"><link rel="prefetch" href="/blog/assets/Specification.html.5149959a.js"><link rel="prefetch" href="/blog/assets/index.html.55dec906.js"><link rel="prefetch" href="/blog/assets/åŠ å¯†ä¸è§£å¯†.html.1d8db957.js"><link rel="prefetch" href="/blog/assets/correlation.html.5a8dc267.js"><link rel="prefetch" href="/blog/assets/tablespace.html.b2ca5efe.js"><link rel="prefetch" href="/blog/assets/disable.html.df7fe42f.js"><link rel="prefetch" href="/blog/assets/encrypt.html.dfe29285.js"><link rel="prefetch" href="/blog/assets/markdown.html.bd0a35bc.js"><link rel="prefetch" href="/blog/assets/index.html.5346c78d.js"><link rel="prefetch" href="/blog/assets/slide.html.98dd3dee.js"><link rel="prefetch" href="/blog/assets/git-revert.html.8495f575.js"><link rel="prefetch" href="/blog/assets/get-post.html.0a6ca016.js"><link rel="prefetch" href="/blog/assets/styled-components.html.0d4d2c18.js"><link rel="prefetch" href="/blog/assets/Docker.html.b04ca486.js"><link rel="prefetch" href="/blog/assets/kubernetes.html.3ac6fbd7.js"><link rel="prefetch" href="/blog/assets/Linux-install.html.e25f57da.js"><link rel="prefetch" href="/blog/assets/Linux.html.1ecea965.js"><link rel="prefetch" href="/blog/assets/shell.html.6dfc6824.js"><link rel="prefetch" href="/blog/assets/vim.html.342a8ea2.js"><link rel="prefetch" href="/blog/assets/Gradle.html.8fd63484.js"><link rel="prefetch" href="/blog/assets/maven.html.efa698b6.js"><link rel="prefetch" href="/blog/assets/idea.html.f12c1077.js"><link rel="prefetch" href="/blog/assets/windows.html.f53e2894.js"><link rel="prefetch" href="/blog/assets/git.html.db1356ab.js"><link rel="prefetch" href="/blog/assets/ajax.html.50903e14.js"><link rel="prefetch" href="/blog/assets/CSS.html.fc2e3a3b.js"><link rel="prefetch" href="/blog/assets/ES6.html.eb7905cf.js"><link rel="prefetch" href="/blog/assets/HTML.html.09a9f344.js"><link rel="prefetch" href="/blog/assets/JavaScript.html.2bfd9836.js"><link rel="prefetch" href="/blog/assets/json.html.5420e894.js"><link rel="prefetch" href="/blog/assets/WebAPI.html.d9c5927d.js"><link rel="prefetch" href="/blog/assets/nodejs.html.d75a8c4d.js"><link rel="prefetch" href="/blog/assets/jQuery.html.48fefbc1.js"><link rel="prefetch" href="/blog/assets/uniapp.html.7314f725.js"><link rel="prefetch" href="/blog/assets/collection.html.6adacdda.js"><link rel="prefetch" href="/blog/assets/generics.html.eacc8603.js"><link rel="prefetch" href="/blog/assets/HashMapæºç åˆ†æ.html.70f3c007.js"><link rel="prefetch" href="/blog/assets/setå’Œmap.html.e40d87b7.js"><link rel="prefetch" href="/blog/assets/JaråŒ…çš„å¯¼å…¥.html.42e18cc4.js"><link rel="prefetch" href="/blog/assets/Java.html.6effb09b.js"><link rel="prefetch" href="/blog/assets/Javaå†å²åŠç®€ä»‹.html.717d3cb8.js"><link rel="prefetch" href="/blog/assets/Javaå¸¸ç”¨ç±»åº“.html.b359beb0.js"><link rel="prefetch" href="/blog/assets/Javaé¢å‘å¯¹è±¡.html.8ba23325.js"><link rel="prefetch" href="/blog/assets/åŸç åç å’Œè¡¥ç .html.0bb15e36.js"><link rel="prefetch" href="/blog/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html.8dba9f48.js"><link rel="prefetch" href="/blog/assets/Lambda.html.3d1df8c9.js"><link rel="prefetch" href="/blog/assets/Stream.html.1fb1bdc8.js"><link rel="prefetch" href="/blog/assets/Annotation.html.1b439d5e.js"><link rel="prefetch" href="/blog/assets/Enum.html.bbb4d530.js"><link rel="prefetch" href="/blog/assets/Reflection.html.81b8417f.js"><link rel="prefetch" href="/blog/assets/zookeeper.html.c221500b.js"><link rel="prefetch" href="/blog/assets/component.html.8f4cedcc.js"><link rel="prefetch" href="/blog/assets/css.html.05e85d0c.js"><link rel="prefetch" href="/blog/assets/jsx.html.153adead.js"><link rel="prefetch" href="/blog/assets/component.html.8f5d0cb0.js"><link rel="prefetch" href="/blog/assets/hooks.html.fd0d0287.js"><link rel="prefetch" href="/blog/assets/jsx.html.b97fa724.js"><link rel="prefetch" href="/blog/assets/react.html.25b5c601.js"><link rel="prefetch" href="/blog/assets/vue.html.c28d03a5.js"><link rel="prefetch" href="/blog/assets/404.html.0b36b055.js"><link rel="prefetch" href="/blog/assets/index.html.bab2af12.js"><link rel="prefetch" href="/blog/assets/index.html.e41e87d3.js"><link rel="prefetch" href="/blog/assets/index.html.7787152c.js"><link rel="prefetch" href="/blog/assets/index.html.cef3111a.js"><link rel="prefetch" href="/blog/assets/index.html.c90b33f8.js"><link rel="prefetch" href="/blog/assets/index.html.9b9d8436.js"><link rel="prefetch" href="/blog/assets/index.html.f8e39c2d.js"><link rel="prefetch" href="/blog/assets/index.html.0137c8ad.js"><link rel="prefetch" href="/blog/assets/index.html.444ee9dd.js"><link rel="prefetch" href="/blog/assets/index.html.8080f2a6.js"><link rel="prefetch" href="/blog/assets/index.html.b9a9b4e5.js"><link rel="prefetch" href="/blog/assets/index.html.1649ae6e.js"><link rel="prefetch" href="/blog/assets/index.html.943f41fc.js"><link rel="prefetch" href="/blog/assets/index.html.a9e7b934.js"><link rel="prefetch" href="/blog/assets/index.html.0a3a7cd7.js"><link rel="prefetch" href="/blog/assets/index.html.5d331ca5.js"><link rel="prefetch" href="/blog/assets/index.html.6eb84cb8.js"><link rel="prefetch" href="/blog/assets/index.html.dbbba9a7.js"><link rel="prefetch" href="/blog/assets/index.html.267b9d3d.js"><link rel="prefetch" href="/blog/assets/index.html.b2c9c053.js"><link rel="prefetch" href="/blog/assets/index.html.df38ef9c.js"><link rel="prefetch" href="/blog/assets/index.html.0d0ae91d.js"><link rel="prefetch" href="/blog/assets/index.html.6bfe052a.js"><link rel="prefetch" href="/blog/assets/index.html.80f037bb.js"><link rel="prefetch" href="/blog/assets/index.html.81cf91ac.js"><link rel="prefetch" href="/blog/assets/index.html.93d4b516.js"><link rel="prefetch" href="/blog/assets/index.html.b4f94eaf.js"><link rel="prefetch" href="/blog/assets/index.html.841e5f93.js"><link rel="prefetch" href="/blog/assets/index.html.9f380a09.js"><link rel="prefetch" href="/blog/assets/index.html.c2a7f202.js"><link rel="prefetch" href="/blog/assets/index.html.564cd1b7.js"><link rel="prefetch" href="/blog/assets/index.html.9b9f22e6.js"><link rel="prefetch" href="/blog/assets/index.html.d2850d4e.js"><link rel="prefetch" href="/blog/assets/index.html.1903a545.js"><link rel="prefetch" href="/blog/assets/index.html.befee4ae.js"><link rel="prefetch" href="/blog/assets/index.html.ce765bc1.js"><link rel="prefetch" href="/blog/assets/index.html.48580fa0.js"><link rel="prefetch" href="/blog/assets/index.html.1620d430.js"><link rel="prefetch" href="/blog/assets/index.html.c4ee5037.js"><link rel="prefetch" href="/blog/assets/index.html.cd271d97.js"><link rel="prefetch" href="/blog/assets/index.html.ccafc9ea.js"><link rel="prefetch" href="/blog/assets/index.html.f0457a32.js"><link rel="prefetch" href="/blog/assets/index.html.35f8adc7.js"><link rel="prefetch" href="/blog/assets/index.html.a782936d.js"><link rel="prefetch" href="/blog/assets/index.html.d80f7b9d.js"><link rel="prefetch" href="/blog/assets/index.html.65b8053b.js"><link rel="prefetch" href="/blog/assets/home.html.d1d696ad.js"><link rel="prefetch" href="/blog/assets/index.html.3a9108e4.js"><link rel="prefetch" href="/blog/assets/home.html.c53fadcb.js"><link rel="prefetch" href="/blog/assets/index.html.b7e1db5c.js"><link rel="prefetch" href="/blog/assets/home.html.968a1237.js"><link rel="prefetch" href="/blog/assets/index.html.5ccd61c0.js"><link rel="prefetch" href="/blog/assets/home.html.8f954d68.js"><link rel="prefetch" href="/blog/assets/index.html.33f81469.js"><link rel="prefetch" href="/blog/assets/bigdecimal.html.b3e98dee.js"><link rel="prefetch" href="/blog/assets/corn.html.5b8c81e8.js"><link rel="prefetch" href="/blog/assets/home.html.5f174436.js"><link rel="prefetch" href="/blog/assets/home.html.3a940d61.js"><link rel="prefetch" href="/blog/assets/index.html.4b4d3fc2.js"><link rel="prefetch" href="/blog/assets/home.html.aaa9bd4a.js"><link rel="prefetch" href="/blog/assets/index.html.aae90175.js"><link rel="prefetch" href="/blog/assets/mybatis-generator.html.e0b4fd91.js"><link rel="prefetch" href="/blog/assets/mybatis-plus.html.954a0fe4.js"><link rel="prefetch" href="/blog/assets/mybatis-resource.html.fe8bfcc6.js"><link rel="prefetch" href="/blog/assets/tk-mybatis.html.e8376b98.js"><link rel="prefetch" href="/blog/assets/innodb.html.7d552b6a.js"><link rel="prefetch" href="/blog/assets/jdbc.html.eb5d1ce3.js"><link rel="prefetch" href="/blog/assets/mysql-index.html.dad47baf.js"><link rel="prefetch" href="/blog/assets/mysql-optimization.html.828c8f51.js"><link rel="prefetch" href="/blog/assets/mysql.html.76e01773.js"><link rel="prefetch" href="/blog/assets/db2.html.2b32db64.js"><link rel="prefetch" href="/blog/assets/oracle.html.e5ac7672.js"><link rel="prefetch" href="/blog/assets/redis-resource.html.902accba.js"><link rel="prefetch" href="/blog/assets/Redis.html.a28c7acc.js"><link rel="prefetch" href="/blog/assets/sql.html.cb6a9b41.js"><link rel="prefetch" href="/blog/assets/index.html.aa22b2e5.js"><link rel="prefetch" href="/blog/assets/gc.html.0098f16c.js"><link rel="prefetch" href="/blog/assets/Jvmå†…å­˜ç®¡ç†.html.73a52b3f.js"><link rel="prefetch" href="/blog/assets/Jvmç±»åŠ è½½.html.78a03da4.js"><link rel="prefetch" href="/blog/assets/Specification.html.59f285e4.js"><link rel="prefetch" href="/blog/assets/index.html.0c3c5ce8.js"><link rel="prefetch" href="/blog/assets/åŠ å¯†ä¸è§£å¯†.html.1905871e.js"><link rel="prefetch" href="/blog/assets/correlation.html.143a18ac.js"><link rel="prefetch" href="/blog/assets/tablespace.html.89bd6ea9.js"><link rel="prefetch" href="/blog/assets/disable.html.d3c0008e.js"><link rel="prefetch" href="/blog/assets/encrypt.html.803e4491.js"><link rel="prefetch" href="/blog/assets/markdown.html.c67fca9d.js"><link rel="prefetch" href="/blog/assets/index.html.1ef16ef0.js"><link rel="prefetch" href="/blog/assets/slide.html.922e08d9.js"><link rel="prefetch" href="/blog/assets/git-revert.html.3493672e.js"><link rel="prefetch" href="/blog/assets/get-post.html.d855da97.js"><link rel="prefetch" href="/blog/assets/styled-components.html.5ff4d23c.js"><link rel="prefetch" href="/blog/assets/Docker.html.4c7ecf5c.js"><link rel="prefetch" href="/blog/assets/kubernetes.html.43186fe4.js"><link rel="prefetch" href="/blog/assets/Linux-install.html.89265ef6.js"><link rel="prefetch" href="/blog/assets/Linux.html.8b8a91b8.js"><link rel="prefetch" href="/blog/assets/shell.html.2d467fd7.js"><link rel="prefetch" href="/blog/assets/vim.html.4b0dcd2c.js"><link rel="prefetch" href="/blog/assets/Gradle.html.9775167b.js"><link rel="prefetch" href="/blog/assets/maven.html.c441207b.js"><link rel="prefetch" href="/blog/assets/idea.html.58b281a0.js"><link rel="prefetch" href="/blog/assets/windows.html.0dcfdddd.js"><link rel="prefetch" href="/blog/assets/git.html.4ab0d116.js"><link rel="prefetch" href="/blog/assets/ajax.html.29872cba.js"><link rel="prefetch" href="/blog/assets/CSS.html.d080bf13.js"><link rel="prefetch" href="/blog/assets/ES6.html.7fc7907a.js"><link rel="prefetch" href="/blog/assets/HTML.html.6ce2bacb.js"><link rel="prefetch" href="/blog/assets/JavaScript.html.4962343d.js"><link rel="prefetch" href="/blog/assets/json.html.30a6bf92.js"><link rel="prefetch" href="/blog/assets/WebAPI.html.bf3636ed.js"><link rel="prefetch" href="/blog/assets/nodejs.html.221ffba2.js"><link rel="prefetch" href="/blog/assets/jQuery.html.5eedee54.js"><link rel="prefetch" href="/blog/assets/uniapp.html.84494c24.js"><link rel="prefetch" href="/blog/assets/collection.html.e9395eb0.js"><link rel="prefetch" href="/blog/assets/generics.html.a40b94a8.js"><link rel="prefetch" href="/blog/assets/HashMapæºç åˆ†æ.html.aa5dc244.js"><link rel="prefetch" href="/blog/assets/setå’Œmap.html.8223fcb9.js"><link rel="prefetch" href="/blog/assets/JaråŒ…çš„å¯¼å…¥.html.d2723767.js"><link rel="prefetch" href="/blog/assets/Java.html.dd89f16e.js"><link rel="prefetch" href="/blog/assets/Javaå†å²åŠç®€ä»‹.html.8196227b.js"><link rel="prefetch" href="/blog/assets/Javaå¸¸ç”¨ç±»åº“.html.bf9d0505.js"><link rel="prefetch" href="/blog/assets/Javaé¢å‘å¯¹è±¡.html.7c5dface.js"><link rel="prefetch" href="/blog/assets/åŸç åç å’Œè¡¥ç .html.f2b8384c.js"><link rel="prefetch" href="/blog/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html.f47459df.js"><link rel="prefetch" href="/blog/assets/Lambda.html.d66d7d9c.js"><link rel="prefetch" href="/blog/assets/Stream.html.6b41e832.js"><link rel="prefetch" href="/blog/assets/Annotation.html.bb964369.js"><link rel="prefetch" href="/blog/assets/Enum.html.b9d0595c.js"><link rel="prefetch" href="/blog/assets/Reflection.html.b804df78.js"><link rel="prefetch" href="/blog/assets/zookeeper.html.108c2420.js"><link rel="prefetch" href="/blog/assets/component.html.2e89ab0e.js"><link rel="prefetch" href="/blog/assets/css.html.0bf43d5d.js"><link rel="prefetch" href="/blog/assets/jsx.html.246edc82.js"><link rel="prefetch" href="/blog/assets/component.html.f23e60a3.js"><link rel="prefetch" href="/blog/assets/hooks.html.d6124ea1.js"><link rel="prefetch" href="/blog/assets/jsx.html.c6e56a54.js"><link rel="prefetch" href="/blog/assets/react.html.c0889be1.js"><link rel="prefetch" href="/blog/assets/vue.html.ec38e8b1.js"><link rel="prefetch" href="/blog/assets/404.html.b3d813f2.js"><link rel="prefetch" href="/blog/assets/index.html.d9f5d84e.js"><link rel="prefetch" href="/blog/assets/index.html.3f494707.js"><link rel="prefetch" href="/blog/assets/index.html.a657421f.js"><link rel="prefetch" href="/blog/assets/index.html.d6f3fefd.js"><link rel="prefetch" href="/blog/assets/index.html.c467c746.js"><link rel="prefetch" href="/blog/assets/index.html.75a56410.js"><link rel="prefetch" href="/blog/assets/index.html.1cb1415b.js"><link rel="prefetch" href="/blog/assets/index.html.cf95d327.js"><link rel="prefetch" href="/blog/assets/index.html.311586f1.js"><link rel="prefetch" href="/blog/assets/index.html.7318c505.js"><link rel="prefetch" href="/blog/assets/index.html.82c1d8a7.js"><link rel="prefetch" href="/blog/assets/index.html.704eaaae.js"><link rel="prefetch" href="/blog/assets/index.html.4aa7f9e4.js"><link rel="prefetch" href="/blog/assets/index.html.a165b2cd.js"><link rel="prefetch" href="/blog/assets/index.html.cd856079.js"><link rel="prefetch" href="/blog/assets/index.html.4f9e09b2.js"><link rel="prefetch" href="/blog/assets/index.html.665315d3.js"><link rel="prefetch" href="/blog/assets/index.html.f611c1ba.js"><link rel="prefetch" href="/blog/assets/index.html.bbc0dd56.js"><link rel="prefetch" href="/blog/assets/index.html.802b0945.js"><link rel="prefetch" href="/blog/assets/index.html.7467537b.js"><link rel="prefetch" href="/blog/assets/index.html.ed30667e.js"><link rel="prefetch" href="/blog/assets/index.html.bcc788e3.js"><link rel="prefetch" href="/blog/assets/index.html.1cd07c16.js"><link rel="prefetch" href="/blog/assets/index.html.966bc4b1.js"><link rel="prefetch" href="/blog/assets/index.html.7697e0c0.js"><link rel="prefetch" href="/blog/assets/index.html.16b02e8e.js"><link rel="prefetch" href="/blog/assets/index.html.ecaf54cf.js"><link rel="prefetch" href="/blog/assets/index.html.17d24c6b.js"><link rel="prefetch" href="/blog/assets/index.html.7bb697c8.js"><link rel="prefetch" href="/blog/assets/index.html.7a7a5f61.js"><link rel="prefetch" href="/blog/assets/index.html.c4c686d6.js"><link rel="prefetch" href="/blog/assets/index.html.62246adb.js"><link rel="prefetch" href="/blog/assets/index.html.0dfcc61f.js"><link rel="prefetch" href="/blog/assets/index.html.8e7d3445.js"><link rel="prefetch" href="/blog/assets/index.html.ada718eb.js"><link rel="prefetch" href="/blog/assets/index.html.df4be099.js"><link rel="prefetch" href="/blog/assets/index.html.ddefb5a1.js"><link rel="prefetch" href="/blog/assets/index.html.d2ba9a70.js"><link rel="prefetch" href="/blog/assets/index.html.b7d12232.js"><link rel="prefetch" href="/blog/assets/index.html.ab7b867f.js"><link rel="prefetch" href="/blog/assets/index.html.7bd95e01.js"><link rel="prefetch" href="/blog/assets/index.html.c91df32e.js"><link rel="prefetch" href="/blog/assets/index.html.11edfabe.js"><link rel="prefetch" href="/blog/assets/index.html.845a6840.js"><link rel="prefetch" href="/blog/assets/index.html.ab617425.js"><link rel="prefetch" href="/blog/assets/404.c31c4c98.js"><link rel="prefetch" href="/blog/assets/Layout.3a66f1a7.js"><link rel="prefetch" href="/blog/assets/Slide.b6cb7047.js"><link rel="prefetch" href="/blog/assets/Blog.510695ef.js"><link rel="prefetch" href="/blog/assets/auto.264f6c8c.js"><link rel="prefetch" href="/blog/assets/index.d8a59108.js"><link rel="prefetch" href="/blog/assets/index.1842ee54.js"><link rel="prefetch" href="/blog/assets/mermaid.esm.min.fac286bf.js"><link rel="prefetch" href="/blog/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/blog/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/blog/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/blog/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/blog/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/blog/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/blog/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/blog/assets/Playground.b01657ec.js"><link rel="prefetch" href="/blog/assets/photoswipe.esm.218074cd.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/blog/" class="brand"><img class="logo" src="/blog/img/snowman.png" alt="Blog"><!----><span class="site-name hide-in-pad">Blog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/blog/home.html" class="nav-link" aria-label="Home"><span class="icon iconfont icon-home"></span>Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/Java/home.html" class="nav-link" aria-label="JavaDev"><span class="icon iconfont icon-java"></span>JavaDev<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/Database/home.html" class="nav-link" aria-label="Database"><span class="icon iconfont icon-db"></span>Database<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/MicroService/home.html" class="nav-link" aria-label="MicroService"><span class="icon iconfont icon-microservice"></span>MicroService<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/Tool/home.html" class="nav-link" aria-label="Devops"><span class="icon iconfont icon-devops"></span>Devops<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/Theory/home.html" class="nav-link" aria-label="Theory"><span class="icon iconfont icon-theory"></span>Theory<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/Web/home.html" class="nav-link" aria-label="Web"><span class="icon iconfont icon-net"></span>Web<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/develop-note" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-mybatis"></span><span class="title">mybatis</span><!----></p><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/blog/Database/mybatis/mybatis.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨"><!---->Mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#ä¸€-mybatis-document" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ mybatis document"><!---->ä¸€ mybatis document<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-getting-started" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. Getting started"><!---->1. Getting started<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-mybatisåŠ¨æ€ä»£ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. MybatisåŠ¨æ€ä»£ç†"><!---->2. MybatisåŠ¨æ€ä»£ç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-mybatiså¸¸ç”¨é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.mybatiså¸¸ç”¨é…ç½®"><!---->3.mybatiså¸¸ç”¨é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_4-å’Œ-çš„åŒºåˆ«" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. ${}å’Œ#{}çš„åŒºåˆ«"><!---->4. ${}å’Œ#{}çš„åŒºåˆ«<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_5-mybatisç¼“å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. mybatisç¼“å­˜"><!---->5. mybatisç¼“å­˜<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#äºŒ-è¾“å…¥è¾“å‡ºæ˜ å°„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒ è¾“å…¥è¾“å‡ºæ˜ å°„"><!---->äºŒ è¾“å…¥è¾“å‡ºæ˜ å°„<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-è¾“å…¥æ˜ å°„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. è¾“å…¥æ˜ å°„"><!---->1. è¾“å…¥æ˜ å°„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-è¾“å‡ºæ˜ å°„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. è¾“å‡ºæ˜ å°„"><!---->2. è¾“å‡ºæ˜ å°„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-resultmap" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3) ResultMap"><!---->3) ResultMap<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#ä¸‰-mybatisåŠ¨æ€sql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ mybatisåŠ¨æ€SQL"><!---->ä¸‰ mybatisåŠ¨æ€SQL<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-ifå’Œwhere" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. ifå’Œwhere"><!---->1. ifå’Œwhere<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-choose-when-otherwise" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. choose when otherwise"><!---->2. choose when otherwise<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-trimå’Œset" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. trimå’Œset"><!---->3. trimå’Œset<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_4-sqlå’Œinclude" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. sqlå’Œinclude"><!---->4. sqlå’Œinclude<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_5-selectkeyè·å–è‡ªå¢id" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. selectKeyè·å–è‡ªå¢ID"><!---->5. selectKeyè·å–è‡ªå¢ID<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_6-foreachæ ‡ç­¾" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6. foreachæ ‡ç­¾"><!---->6. foreachæ ‡ç­¾<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#å››-mybatiså¤šè¡¨æŸ¥è¯¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å›› mybatiså¤šè¡¨æŸ¥è¯¢"><!---->å›› mybatiså¤šè¡¨æŸ¥è¯¢<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-ä¸€å¯¹ä¸€æŸ¥è¯¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. ä¸€å¯¹ä¸€æŸ¥è¯¢"><!---->1. ä¸€å¯¹ä¸€æŸ¥è¯¢<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-ä¸€å¯¹å¤šæŸ¥è¯¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. ä¸€å¯¹å¤šæŸ¥è¯¢"><!---->2. ä¸€å¯¹å¤šæŸ¥è¯¢<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-å¤šå¯¹å¤šæŸ¥è¯¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. å¤šå¯¹å¤šæŸ¥è¯¢"><!---->3. å¤šå¯¹å¤šæŸ¥è¯¢<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#äº”-ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº” ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•"><!---->äº” ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-ideaå¸¸ç”¨æ’ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. IDEAå¸¸ç”¨æ’ä»¶"><!---->1. IDEAå¸¸ç”¨æ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-mapperæ–‡ä»¶æ¨¡æ¿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. mapperæ–‡ä»¶æ¨¡æ¿"><!---->2. mapperæ–‡ä»¶æ¨¡æ¿<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-ç¼ºå¤±jboss-vfs" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. ç¼ºå¤±Jboss.VFS"><!---->3. ç¼ºå¤±Jboss.VFS<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/blog/Database/mybatis/mybatis-plus.html" class="nav-link sidebar-link sidebar-page" aria-label="mybatis-plus"><!---->mybatis-plus<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mybatis/tk-mybatis.html" class="nav-link sidebar-link sidebar-page" aria-label="tk-mybatis"><!---->tk-mybatis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mybatis/mybatis-generator.html" class="nav-link sidebar-link sidebar-page" aria-label="MyBatis-Generator"><!---->MyBatis-Generator<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mybatis/mybatis-resource.html" class="nav-link sidebar-link sidebar-page" aria-label="mybatisæºç å‰–æ"><!---->mybatisæºç å‰–æ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨</h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.github.com/itdrizzle" target="_blank" rel="noopener noreferrer">csdrizzle</a></span><span property="author" content="csdrizzle"></span></span><!----><!----><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 21 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT21M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#ä¸€-mybatis-document" class="router-link-active router-link-exact-active toc-link level2">ä¸€ mybatis document</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-getting-started" class="router-link-active router-link-exact-active toc-link level3">1. Getting started</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-mybatisåŠ¨æ€ä»£ç†" class="router-link-active router-link-exact-active toc-link level3">2. MybatisåŠ¨æ€ä»£ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-mybatiså¸¸ç”¨é…ç½®" class="router-link-active router-link-exact-active toc-link level3">3.mybatiså¸¸ç”¨é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_4-å’Œ-çš„åŒºåˆ«" class="router-link-active router-link-exact-active toc-link level3">4. ${}å’Œ#{}çš„åŒºåˆ«</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_5-mybatisç¼“å­˜" class="router-link-active router-link-exact-active toc-link level3">5. mybatisç¼“å­˜</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#äºŒ-è¾“å…¥è¾“å‡ºæ˜ å°„" class="router-link-active router-link-exact-active toc-link level2">äºŒ è¾“å…¥è¾“å‡ºæ˜ å°„</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-è¾“å…¥æ˜ å°„" class="router-link-active router-link-exact-active toc-link level3">1. è¾“å…¥æ˜ å°„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-è¾“å‡ºæ˜ å°„" class="router-link-active router-link-exact-active toc-link level3">2. è¾“å‡ºæ˜ å°„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-resultmap" class="router-link-active router-link-exact-active toc-link level3">3) ResultMap</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#ä¸‰-mybatisåŠ¨æ€sql" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ mybatisåŠ¨æ€SQL</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-ifå’Œwhere" class="router-link-active router-link-exact-active toc-link level3">1. ifå’Œwhere</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-choose-when-otherwise" class="router-link-active router-link-exact-active toc-link level3">2. choose when otherwise</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-trimå’Œset" class="router-link-active router-link-exact-active toc-link level3">3. trimå’Œset</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_4-sqlå’Œinclude" class="router-link-active router-link-exact-active toc-link level3">4. sqlå’Œinclude</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_5-selectkeyè·å–è‡ªå¢id" class="router-link-active router-link-exact-active toc-link level3">5. selectKeyè·å–è‡ªå¢ID</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_6-foreachæ ‡ç­¾" class="router-link-active router-link-exact-active toc-link level3">6. foreachæ ‡ç­¾</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#å››-mybatiså¤šè¡¨æŸ¥è¯¢" class="router-link-active router-link-exact-active toc-link level2">å›› mybatiså¤šè¡¨æŸ¥è¯¢</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-ä¸€å¯¹ä¸€æŸ¥è¯¢" class="router-link-active router-link-exact-active toc-link level3">1. ä¸€å¯¹ä¸€æŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-ä¸€å¯¹å¤šæŸ¥è¯¢" class="router-link-active router-link-exact-active toc-link level3">2. ä¸€å¯¹å¤šæŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-å¤šå¯¹å¤šæŸ¥è¯¢" class="router-link-active router-link-exact-active toc-link level3">3. å¤šå¯¹å¤šæŸ¥è¯¢</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#äº”-ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•" class="router-link-active router-link-exact-active toc-link level2">äº” ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_1-ideaå¸¸ç”¨æ’ä»¶" class="router-link-active router-link-exact-active toc-link level3">1. IDEAå¸¸ç”¨æ’ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_2-mapperæ–‡ä»¶æ¨¡æ¿" class="router-link-active router-link-exact-active toc-link level3">2. mapperæ–‡ä»¶æ¨¡æ¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mybatis/mybatis.html#_3-ç¼ºå¤±jboss-vfs" class="router-link-active router-link-exact-active toc-link level3">3. ç¼ºå¤±Jboss.VFS</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨" aria-hidden="true">#</a> Mybatisæ¡†æ¶åŠå…¶ä½¿ç”¨</h1><h2 id="ä¸€-mybatis-document" tabindex="-1"><a class="header-anchor" href="#ä¸€-mybatis-document" aria-hidden="true">#</a> ä¸€ mybatis document</h2><p>mybatis â€“ MyBatis 3 å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/index.html" target="_blank" rel="noopener noreferrer">https://mybatis.org/mybatis-3/index.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>MyBatis is a first class persistence framework with support for custom SQL, stored procedures and advanced mappings.</p><br><p>Mybatisæ˜¯ä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œåˆå«åš ORMæ¡†æ¶ (åŠè‡ªåŠ¨åŒ–ã€è½»é‡çº§çš„ORMæ¡†æ¶)ã€‚</p><p>ORMï¼šObject Relationship Mappingï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">Mybatis</span>å…¶å®å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠå¯¹è±¡æ˜ å°„ä¸ºå…³ç³»å‹æ•°æ®åº“ä¸­çš„è®°å½•ï¼ŒæŠŠå…³ç³»å‹æ•°æ®åº“ä¸­çš„è®°å½•æ˜ å°„ä¸ºå¯¹è±¡çš„è¿™ä¹ˆä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶ã€‚

æŒä¹…å±‚ï¼šæŒä¹…å±‚æ˜¯æŒ‡å’Œæ•°æ®åº“æ‰“äº¤é“çš„è¿™ä¸€å±‚ã€‚

<span class="token class-name">Mybatis</span>å…¶å®å°±æ˜¯ä¸€ä¸ªå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªå®šä¹‰SQLè¯­å¥å»æ“ä½œæ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„è¿™ä¹ˆä¸€ä¸ªæ¡†æ¶ã€‚
ç®€åŒ–æˆ‘ä»¬å¯¹äºæ•°æ®åº“çš„æ“ä½œï¼Œç®€åŒ–JDBCçš„æµç¨‹ã€‚
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/* ä¸ºä»€ä¹ˆä½¿ç”¨Mybatis?

- å¯¹æ¯”JDBC
  - åŸç”Ÿçš„JDBCä½¿ç”¨æµç¨‹æ›´å¤æ‚ï¼Œæ“ä½œç¹ç
  - SQLè¯­å¥å’Œä»£ç ä¸¥é‡è€¦åˆï¼Œå­˜åœ¨ç¡¬ç¼–ç 
  - ç»“æœé›†è§£æä¸æ™ºèƒ½ï¼Œéœ€è¦æ‰‹åŠ¨è§£æ
  
- å¯¹æ¯”DBUtils
  - SQLè¯­å¥å’Œä»£ç ä¸¥é‡è€¦åˆï¼Œå­˜åœ¨ç¡¬ç¼–ç 
  - ç»“æœé›†è§£æçš„æ—¶å€™å…¶å®è¿˜æ˜¯éœ€è¦æˆ‘ä»¬ä¼ å…¥ä¸åŒçš„ResultSetHandlerï¼Œä¸å¤Ÿå¼ºå¤§
  - å¯¹äºè¿æ¥æŸ¥è¯¢çš„æƒ…å†µï¼Œæ˜¯ä¸å¤ªèƒ½å¤Ÿæ”¯æŒçš„
  
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_1-getting-started" tabindex="-1"><a class="header-anchor" href="#_1-getting-started" aria-hidden="true">#</a> 1. Getting started</h3><p>To use MyBatis you just need to include the <a href="https://github.com/mybatis/mybatis-3/releases" target="_blank" rel="noopener noreferrer">mybatis-x.x.x.jar<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> file in the classpath.</p><p>If you are using Maven just add the following dependency to your pom.xml:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>x.x.x<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>**The configuration XML file ** ï¼ˆ <code>mybatis-config.xml</code> ï¼‰ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
        <span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
                <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
                <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--è·å–propertiesé…ç½®æ–‡ä»¶--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&lt;mapper resource=&quot;org/mybatis/example/BlogMapper.xml&quot;/&gt;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn/drizzle/mapper/userMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># jdbc.properties</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/academy?useSSL=false&amp;characterEncoding=utf8</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>Building SqlSessionFactory from XML</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// é€šè¿‡åå°„æˆ–è€…mybatisæä¾›çš„ Resources.getResourceAsStream() è¯»å– mavené¡¹ç›®çš„resourcesç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶</span>

<span class="token comment">// InputStream inputStream = SelectTest.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>Acquiring a SqlSession from SqlSessionFactory</strong>ï¼š</p><p>é…ç½®mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
    <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
    <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.userMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      select * from user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>The SqlSession contains absolutely every method needed to execute SQL commands against the database. You can execute mapped SQL statements directly against the SqlSession instance. For example:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// é€šè¿‡SQLSessionæ‰§è¡ŒSQLè¯­å¥</span>
<span class="token comment">// ä¼ å…¥ä¸¤ä¸ªå‚æ•° 1. SQLè¯­å¥çš„åæ ‡ï¼ˆnamespace+idï¼‰ 2. SQLè¯­å¥çš„å‚æ•°</span>
<span class="token class-name">User</span> user <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">selectOne</span><span class="token punctuation">(</span><span class="token string">&quot;cn.itdrizzle.userMapper.selectUserById&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><img src="/blog/assets/image-20220328142420298.14c3c120.png" alt="image-20220328142420298" loading="lazy"></p><br><h3 id="_2-mybatisåŠ¨æ€ä»£ç†" tabindex="-1"><a class="header-anchor" href="#_2-mybatisåŠ¨æ€ä»£ç†" aria-hidden="true">#</a> 2. MybatisåŠ¨æ€ä»£ç†</h3><p>å…³äºä½¿ç”¨Mybatisçš„åŠ¨æ€ä»£ç†ï¼Œæœ‰å‡ ä¸ªè§„èŒƒæ˜¯éœ€è¦éµå®ˆçš„</p><ul><li>æ¥å£çš„å…¨é™å®šåç§°å’Œé…ç½®æ–‡ä»¶ä¸­çš„namespaceä¿æŒä¸€è‡´</li><li>æ¥å£ä¸­çš„æ–¹æ³•åå’Œé…ç½®æ–‡ä»¶ä¸­çš„çš„idå€¼ä¿æŒä¸€è‡´</li><li>æ¥å£çš„è¿”å›å€¼ç±»å‹å’ŒresultTypeä¸­çš„å€¼ä¿æŒä¸€è‡´ ï¼ˆè¾“å‡ºæ˜ å°„ï¼‰</li><li>æ¥å£çš„å‚æ•°å’Œæ ‡ç­¾ä¸­çš„å‚æ•°ä¿æŒä¸€è‡´ ï¼ˆè¾“å…¥æ˜ å°„ï¼‰</li></ul><p>è¿˜æœ‰å‡ ä¸ªè¡Œä¸šé»˜è®¤çš„è§„èŒƒï¼ˆä¸éµå®ˆä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯å»ºè®®éµå®ˆï¼‰</p><ul><li><p>mapper.xmlé…ç½®æ–‡ä»¶çš„åå­—ï¼Œæœ€å¥½å’Œæ¥å£ä¿æŒä¸€è‡´</p></li><li><p>mapper.xmlé…ç½®æ–‡ä»¶å’Œæ¥å£æ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘ä¹‹åæœ€å¥½åœ¨åŒä¸€çº§ç›®å½•ä¸‹</p></li></ul><br><p>åˆ›å»ºmapperæ¥å£ï¼ˆæ³¨æ„æ¥å£ä¸xmlé…ç½®æ–‡ä»¶çš„å¯¹åº”å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼‰</p><p><img src="/blog/assets/image-20220328153000252.b7479fbf.png" alt="image-20220328153000252" loading="lazy"></p><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
* ä½¿ç”¨mybatisçš„åŠ¨æ€ä»£ç†
* <span class="token keyword">@author</span> itdrizzle
* <span class="token keyword">@date</span> 2022/3/28 14:38
*/</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
ä½¿ç”¨åŠ¨æ€ä»£ç†çš„æµç¨‹

- <span class="token number">1</span>. å£°æ˜ä¸€ä¸ªæ¥å£
- <span class="token number">2</span>. å†™ä¸€ä¸ªä¸æ¥å£å¯¹åº”çš„mapper.xmlé…ç½®æ–‡ä»¶
- <span class="token number">3</span>. è·å–æ¥å£çš„ä»£ç†å¯¹è±¡
    // è·å–ä»£ç†å¯¹è±¡<span class="token punctuation">(</span>MapperProxyçš„å®ä¾‹å¯¹è±¡<span class="token punctuation">)</span>
    AccountMapper accountMapper <span class="token operator">=</span> sqlSession.getMapper<span class="token punctuation">(</span>AccountMapper.class<span class="token punctuation">)</span><span class="token punctuation">;</span>

- <span class="token number">4</span>. æ‰§è¡Œæ¥å£ä¸­çš„æ–¹æ³•
    æ¯ä¸€ä¸ªæ¥å£éƒ½æ˜¯å’Œmapper.xmlé…ç½®æ–‡ä»¶å¯¹åº”èµ·æ¥çš„ï¼›
    æ¯ä¸€ä¸ªæ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯å’Œmapper.xmlé…ç½®æ–‡ä»¶ä¸­çš„SQLè¯­å¥çš„æ ‡ç­¾å¯¹åº”èµ·æ¥çš„ï¼Œ
    é‚£ä¹ˆæˆ‘ä»¬å»æ‰§è¡Œæ¥å£ä¸­çš„æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯ç›¸å½“äºæ‰§è¡ŒSQLè¯­å¥ï¼Œè·å–SQLè¯­å¥çš„ç»“æœã€‚

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-mybatiså¸¸ç”¨é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-mybatiså¸¸ç”¨é…ç½®" aria-hidden="true">#</a> 3.mybatiså¸¸ç”¨é…ç½®</h3><h4 id="_1-properties" tabindex="-1"><a class="header-anchor" href="#_1-properties" aria-hidden="true">#</a> 1) properties</h4><ul><li><p>é…ç½®ä¸€ä¸ªjdbc.properties</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/dbName?useSSL=false&amp;characterEncoding=utf8</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åœ¨mybatis-config.xmlä¸­å¼•å…¥propertiesé…ç½®æ–‡ä»¶</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- åŠ è½½properties é…ç½®æ–‡ä»¶--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/blog/assets/image-20220329090047702.3a88fa7d.png" alt="image-20220329090047702" loading="lazy"></p></li></ul><br><h4 id="_2-settings" tabindex="-1"><a class="header-anchor" href="#_2-settings" aria-hidden="true">#</a> 2) settings</h4><p>è¿™ä¸ªé‡Œé¢æ˜¯Mybatisæä¸ºé‡è¦çš„é…ç½®ï¼Œä¼šæ”¹å˜Mybatisçš„è¡Œä¸ºä¸å±æ€§å€¼ã€‚</p><p>å¯ä»¥æœ‰å¾ˆå¤šé…ç½®ï¼Œä¾‹å¦‚æ‡’åŠ è½½ï¼Œç¼“å­˜ï¼Œæ—¥å¿—ç­‰</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æ—¥å¿—é…ç½® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT_LOGGING<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    <span class="token comment">&lt;!-- æ‡’åŠ è½½   true: è¡¨ç¤ºå¼€å¯  falseï¼šè¡¨ç¤ºå…³é—­ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    
    <span class="token comment">&lt;!--&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;--&gt;</span>
    <span class="token comment">&lt;!--&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;--&gt;</span>
    <span class="token comment">&lt;!--&lt;setting name=&quot;&quot; value=&quot;&quot;/&gt;--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">/* æ‡’åŠ è½½ï¼šå»¶è¿ŸåŠ è½½çš„æ„æ€
   æ˜¯æŒ‡åœ¨æˆ‘ä»¬ä½¿ç”¨å¤šè¡¨æŸ¥è¯¢çš„åˆ†æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå‡å¦‚ç¬¬äºŒæ¬¡æ‰§è¡Œçš„SQLè¯­å¥ç»“æœï¼Œä»£ç ä¸­æ²¡æœ‰å¼•ç”¨çš„è¯ï¼Œå°±ä¸åŠ è½½ï¼Œ
   ç­‰åˆ°éœ€è¦ç¬¬äºŒæ¬¡æŸ¥è¯¢çš„SQLè¯­å¥çš„ç»“æœè¢«å¼•ç”¨çš„æ—¶å€™ï¼Œå†å»æ‰§è¡ŒSQLè¯­å¥

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_3-typealiases" tabindex="-1"><a class="header-anchor" href="#_3-typealiases" aria-hidden="true">#</a> 3) TypeAliases</h4><p>ç±»å‹åˆ«åçš„é…ç½®ã€‚ å³å¯ä»¥å¯¹Mybatisé…ç½®æ–‡ä»¶ä¸­çš„ç±»å‹å»å–åˆ«åã€‚</p><ul><li><p>é…ç½®åˆ«å</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- åˆ«åçš„é…ç½® --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ç»™å•ä¸ªjavaå®ä½“ç±»å–åˆ«å --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    
    <span class="token comment">&lt;!-- æ‰¹é‡èµ·åˆ«åï¼ˆè¯¥åŒ…ä¸‹çš„æ‰€æœ‰ç±»çš„ç±»åå³ä¸ºåˆ«åï¼Œä¸”ä¸åŒºåˆ†å¤§å°å†™ï¼‰ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ä½¿ç”¨åˆ«å</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from t_user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><br><p>å†…ç½®åˆ«åï¼šMybatisç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šå†…ç½®çš„åˆ«å</p><table><thead><tr><th style="text-align:left;">åˆ«å</th><th style="text-align:left;">æ˜ å°„çš„ç±»å‹ï¼ˆjavaä¸­çš„ç±»å‹ï¼‰</th></tr></thead><tbody><tr><td style="text-align:left;">_byte</td><td style="text-align:left;">byte</td></tr><tr><td style="text-align:left;">_long</td><td style="text-align:left;">long</td></tr><tr><td style="text-align:left;">_short</td><td style="text-align:left;">short</td></tr><tr><td style="text-align:left;">_int</td><td style="text-align:left;">int</td></tr><tr><td style="text-align:left;">_integer</td><td style="text-align:left;">int</td></tr><tr><td style="text-align:left;">_double</td><td style="text-align:left;">double</td></tr><tr><td style="text-align:left;">_float</td><td style="text-align:left;">float</td></tr><tr><td style="text-align:left;">_boolean</td><td style="text-align:left;">boolean</td></tr><tr><td style="text-align:left;">string</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">byte</td><td style="text-align:left;">Byte</td></tr><tr><td style="text-align:left;">long</td><td style="text-align:left;">Long</td></tr><tr><td style="text-align:left;">short</td><td style="text-align:left;">Short</td></tr><tr><td style="text-align:left;">int</td><td style="text-align:left;">Integer</td></tr><tr><td style="text-align:left;">integer</td><td style="text-align:left;">Integer</td></tr><tr><td style="text-align:left;">double</td><td style="text-align:left;">Double</td></tr><tr><td style="text-align:left;">float</td><td style="text-align:left;">Float</td></tr><tr><td style="text-align:left;">boolean</td><td style="text-align:left;">Boolean</td></tr><tr><td style="text-align:left;">date</td><td style="text-align:left;">Date</td></tr><tr><td style="text-align:left;">decimal</td><td style="text-align:left;">BigDecimal</td></tr><tr><td style="text-align:left;">bigdecimal</td><td style="text-align:left;">BigDecimal</td></tr><tr><td style="text-align:left;">object</td><td style="text-align:left;">Object</td></tr><tr><td style="text-align:left;">map</td><td style="text-align:left;">Map</td></tr><tr><td style="text-align:left;">hashmap</td><td style="text-align:left;">HashMap</td></tr><tr><td style="text-align:left;">list</td><td style="text-align:left;">List</td></tr><tr><td style="text-align:left;">arraylist</td><td style="text-align:left;">ArrayList</td></tr><tr><td style="text-align:left;">collection</td><td style="text-align:left;">Collection</td></tr><tr><td style="text-align:left;">iterator</td><td style="text-align:left;">Iterator</td></tr></tbody></table><p><span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"><strong>æ€»ç»“ï¼šMybatisç»™Javaç±»å‹ä¸­çš„åŸºæœ¬ç±»å‹ã€åŒ…è£…ç±»å‹å’Œé›†åˆç±»å‹èµ·äº†å†…ç½®çš„åˆ«åï¼ŒåŸºæœ¬éƒ½æ˜¯åç§°çš„å°å†™ã€‚</strong></span></p><p>tipsï¼šå»ºç«‹JavaBeançš„æ—¶å€™ï¼ŒJavaBeançš„æˆå‘˜å˜é‡çš„å±æ€§åº”è¯¥å°½é‡ä½¿ç”¨åŒ…è£…ç±»å‹ã€‚</p><br><h4 id="_4-typehandlers" tabindex="-1"><a class="header-anchor" href="#_4-typehandlers" aria-hidden="true">#</a> 4) typeHandlers</h4><p>è¿™ä¸ªæ˜¯ç±»å‹å¤„ç†å™¨ï¼Œä¸»è¦æ˜¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬æŠŠæ•°æ®åº“ä¸­çš„æ•°æ®ç±»å‹è½¬åŒ–ä¸ºJavaä¸­çš„æ•°æ®ç±»å‹ã€‚</p><p>Mybatisæœ‰å¾ˆå¤šé»˜è®¤çš„ç±»å‹å¤„ç†å™¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åšç±»å‹çš„è½¬åŒ–ã€‚</p><br><h4 id="_5-environment" tabindex="-1"><a class="header-anchor" href="#_5-environment" aria-hidden="true">#</a> 5) Environment</h4><p>è¿™ä¸ªæ˜¯å…³äºMybatisçš„ç¯å¢ƒé…ç½®ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ•°æ®åº“çš„ç¯å¢ƒçš„é…ç½®ã€‚</p><p>Mybatisçš„ç¯å¢ƒé…ç½®ä¸»è¦æ˜¯å¸®åŠ©æˆ‘ä»¬å»è¿æ¥å¤šä¸ªæ•°æ®åº“ã€‚</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- é‡‡ç”¨çš„ç¯å¢ƒçš„åå­—--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- testç¯å¢ƒ--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ ï¼Œè¡¨ç¤ºJDBCæ¥ç®¡ç†äº‹åŠ¡
            JDBCï¼šè¿™ä¸ªæ˜¯é‡‡ç”¨JDBCæ¥ç®¡ç†äº‹åŠ¡ï¼Œå’Œä¹‹å‰äº‹åŠ¡çš„ä½¿ç”¨æ–¹å¼ä¸€æ ·
            MANAGEDï¼šè¡¨ç¤ºäº¤ç»™å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡ï¼Œä¾‹å¦‚ Spring --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!-- æ•°æ®æº
                POOLEDï¼šè¡¨ç¤ºé‡‡ç”¨è¿æ¥æ± æ¥ç®¡ç†è¿æ¥
                UNPOOLEDï¼šè¡¨ç¤ºä¸é‡‡ç”¨è¿æ¥æ± æ¥ç®¡ç†è¿æ¥
                JNDIï¼šå…¶å®å°±æ˜¯è¡¨ç¤ºMybatisä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ•°æ®æº --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- é©±åŠ¨ï¼Œç”¨æˆ·åï¼Œè´¦å·ï¼Œå¯†ç çš„é…ç½®--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- devç¯å¢ƒ--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_6-mapper" tabindex="-1"><a class="header-anchor" href="#_6-mapper" aria-hidden="true">#</a> 6) Mapper</h4><p>è¿™ä¸ªæ˜¯æ˜ å°„å™¨çš„é…ç½®</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- æŒ‡å®šåˆ°å…·ä½“çš„é…ç½®æ–‡ä»¶--&gt;</span>
    <span class="token comment">&lt;!--&lt;mapper resource=&quot;it/drizzle/mapper/UserMapper.xml&quot;/&gt;--&gt;</span>
    <span class="token comment">&lt;!--&lt;mapper resource=&quot;it/drizzle/mapper/UserMapper2.xml&quot;/&gt;--&gt;</span>


    <span class="token comment">&lt;!-- é…ç½®åˆ°åŒ…ä¸‹çš„æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>it.drizzle.mapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥ä¸Šçš„ä¸¤ç§é…ç½®é€‰æ‹©å…¶ä¸­çš„ä¸€ç§å³å¯</p><br><h3 id="_4-å’Œ-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_4-å’Œ-çš„åŒºåˆ«" aria-hidden="true">#</a> 4. ${}å’Œ#{}çš„åŒºåˆ«</h3><p>åœ¨Mybatisçš„mapperæ–‡ä»¶é‡Œé¢ï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è·å–javaä¼ å…¥çš„å€¼ ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token operator">-</span> #<span class="token punctuation">{</span><span class="token punctuation">}</span> åº•å±‚æ˜¯è°ƒç”¨çš„prepareStatementï¼Œé‡‡ç”¨çš„æ˜¯é¢„ç¼–è¯‘å ä½çš„æ–¹å¼ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ›´åŠ å®‰å…¨ 

<span class="token operator">-</span> $<span class="token punctuation">{</span><span class="token punctuation">}</span> åº•å±‚æ˜¯é‡‡ç”¨çš„statementï¼Œåº•å±‚è¿˜æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæœ‰sqlæ³¨å…¥çš„é£é™©ï¼Œä½†æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯
    
    #<span class="token punctuation">{</span><span class="token punctuation">}</span>ä¼šæŠŠä¼ å…¥çš„æ•°æ®éƒ½å½“æˆä¸€ä¸ªå­—ç¬¦ä¸²æ¥å¤„ç†ï¼Œä¼šåœ¨ä¼ å…¥çš„æ•°æ®ä¸Šé¢åŠ å¼•å·

	$<span class="token punctuation">{</span><span class="token punctuation">}</span>åˆ™æ˜¯æŠŠä¼ å…¥çš„æ•°æ®ç›´æ¥æ˜¾ç¤ºåœ¨sqlè¯­å¥ä¸­ï¼Œä¸ä¼šæ·»åŠ åŒå¼•å·<span class="token punctuation">(</span>è¿™æ„å‘³ç€å¦‚æœéè¦ä¼ å…¥éè¡¨åæˆ–åˆ—åçš„å‚æ•°ï¼Œéœ€è¦è‡ªå·±åŠ å¼•å·<span class="token punctuation">)</span>

    statementæœ‰æ•°æ®åº“æ³¨å…¥çš„é£é™©ï¼Œå·¥ä½œä¸­æˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨<span class="token class-name">PrepareStatement</span>ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨#<span class="token punctuation">{</span><span class="token punctuation">}</span> è¿™ç§æ–¹å¼
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> 
<span class="token operator">-</span> $<span class="token punctuation">{</span><span class="token punctuation">}</span> çš„ä½¿ç”¨åœºæ™¯ï¼š

  å½“æˆ‘ä»¬å¯¹SQLè¯­å¥ä¼ å…¥è¡¨åæˆ–è€…æ˜¯åˆ—åçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨$<span class="token punctuation">{</span><span class="token punctuation">}</span> æ¥å–å€¼ã€‚
  ï¼ˆå› ä¸ºå¦‚æœä½¿ç”¨ #<span class="token punctuation">{</span><span class="token punctuation">}</span> æ¥å–å€¼ï¼ŒSQLè¯­å¥ä¼šå…ˆé¢„ç¼–è¯‘ï¼ˆç¼ºå°‘è¡¨å æˆ–è€…æ˜¯åˆ—åï¼‰ï¼Œé¢„ç¼–è¯‘ä¼šé€šä¸è¿‡ï¼‰
  
   <span class="token operator">-</span> å½“æ•°æ®åº“åˆ†è¡¨åï¼Œéœ€è¦ä¼ å…¥è¡¨å 
     åˆ†è¡¨ï¼šåŒä¸€ç§æ•°æ®ï¼Œåˆ†å¼€åœ¨ä¸åŒçš„è¡¨ï¼ˆè¿™äº›ä¸åŒçš„è¡¨ï¼Œåªæœ‰åå­—ä¸åŒï¼Œç»“æ„æ˜¯ä¸€æ ·çš„ï¼‰ä¸­å­˜å‚¨çš„æƒ…å†µ
    
   <span class="token operator">-</span> å½“éœ€è¦æ’åºã€åˆ†ç»„çš„æ—¶å€™ï¼Œä¹Ÿè¦ä¼ å…¥åˆ—å
    
 è¿™äº›åœºæ™¯ä¸­è™½ç„¶éœ€è¦ä¼ å€¼ï¼Œä½†éƒ½ä¸ä¼šæ˜¯ç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œå³ä¾¿æ˜¯åˆ—åã€æˆ‘ä»¬ä¹Ÿä¼šè¿›è¡Œå„ç§é™åˆ¶ï¼Œé¿å…ç”¨æˆ·è¾“å…¥è¿™äº›å†…å®¹ï¼Œé€ æˆå®‰å…¨éšæ‚£

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Order</span><span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token function">selectOrderArray</span><span class="token punctuation">(</span><span class="token class-name">String</span> tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    id, order_name as orderName, price, user_id as userId
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectOrderArray<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    from ${tableName}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectOrderArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">String</span> tableName <span class="token operator">=</span> <span class="token string">&quot;`order`&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">Order</span><span class="token punctuation">[</span><span class="token punctuation">]</span> orders <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">selectOrderArray</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> orders<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orders<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_5-mybatisç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_5-mybatisç¼“å­˜" aria-hidden="true">#</a> 5. mybatisç¼“å­˜</h3><p>Mybatiså¯ä»¥ç»™æˆ‘ä»¬ç¼“å­˜æŸ¥è¯¢çš„ç»“æœã€‚</p><p>Mybatisçš„ç¼“å­˜æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«å«åšä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ã€‚</p><br><p><strong>ä¸€çº§ç¼“å­˜</strong>ï¼š</p><p>Mybatisçš„ä¸€çº§ç¼“å­˜æ˜¯ä¸€ä¸ª<span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"><strong>SqlSessionçº§åˆ«</strong></span>çš„ç¼“å­˜ã€‚</p><p>æ„æ€å°±æ˜¯ä½¿ç”¨åŒä¸€ä¸ªSqlSessionï¼Œå»ä½¿ç”¨åŒæ ·çš„æ¡ä»¶æŸ¥è¯¢åŒæ ·çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢å®Œä¹‹åï¼Œä¼šæŠŠæŸ¥è¯¢çš„ç»“æœæ”¾åˆ°è¿™ä¸ªSqlSessionçš„å†…éƒ¨ï¼ˆå†…å­˜ç©ºé—´ï¼‰ï¼Œç­‰åˆ°åé¢æŸ¥è¯¢çš„æ—¶å€™ï¼Œå‡å¦‚ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªSqlSessionï¼Œä¼ å…¥çš„æ˜¯åŒæ ·çš„å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±ä¼šç›´æ¥ä»SqlSesssionå†…éƒ¨å–å‡ºç»“æœï¼Œå¹¶è¿”å›ï¼Œä¸ä¼šæŸ¥è¯¢æ•°æ®åº“äº†ã€‚</p><p>Mybatisçš„ä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œä¹Ÿæ²¡æœ‰æä¾›å¼€å…³ç»™ç”¨æˆ·å…³é—­ã€‚</p><br><p>äºŒçº§ç¼“å­˜æ˜¯ä¸€ä¸ª<span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"><strong>namespaceçº§åˆ«</strong></span>çš„ç¼“å­˜ã€‚æ„æ€å°±æ˜¯æ¯ä¸€ä¸ªMapper.xmlé…ç½®æ–‡ä»¶ï¼Œéƒ½å¯ä»¥å¼€å¯è‡ªå·±çš„ç¼“å­˜ã€‚</p><p><img src="/blog/assets/image-20220331211827277.6c0d8825.png" alt="image-20220331211827277" loading="lazy"></p><br><p>å¦‚ä½•å¼€å¯Mybatisçš„äºŒçº§ç¼“å­˜å‘¢ï¼Ÿ</p><ul><li><p>ç¼“å­˜æ€»å¼€å…³</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- äºŒçº§ç¼“å­˜æ€»å¼€å…³ é»˜è®¤æ˜¯å¼€å¯çš„--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>éœ€è¦æ‰“å¼€å…·ä½“çš„Mapper.xml é…ç½®æ–‡ä»¶çš„ç¼“å­˜å¼€å…³</p><p><img src="/blog/assets/image-20220331155958577.8f3d43c1.png" alt="image-20220331155958577" loading="lazy"></p></li><li><p>æŸ¥è¯¢æ¶‰åŠåˆ°çš„å®ä¾‹å¯¹è±¡ï¼Œéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£</p><p><img src="/blog/assets/image-20220331161218301.3fbeb244.png" alt="image-20220331161218301" loading="lazy"></p></li></ul><p>â€‹ å¦‚ä½•å¼€å¯å‘¢ï¼Ÿ</p><p><img src="/blog/assets/image-20220331161307273.effa27b5.png" alt="image-20220331161307273" loading="lazy"></p><br><p>Mybatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜åœ¨å·¥ä½œä¸­ç”¨ä¸ç”¨å‘¢ï¼Ÿ ç°åœ¨çš„æƒ…å†µæ˜¯ä¼ä¸šä¸€èˆ¬ä¸ä½¿ç”¨Mybatisçš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ã€‚</p><p>ä¸€çº§ç¼“å­˜ä¸å¤Ÿå¼ºå¤§ï¼Œå› ä¸ºä¸€çº§ç¼“å­˜çš„ä½¿ç”¨æœ‰å±€é™æ€§ï¼Œè¦åŸºäºåŒä¸€ä¸ªSQLSessionã€‚</p><p>äºŒçº§ç¼“å­˜ä¸€èˆ¬ä¹Ÿä¸ç”¨ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜ä½œä¸ºç¼“å­˜æ¥è¯´ï¼ŒåŠŸèƒ½æ˜¯ä¸å¤Ÿçš„ã€‚</p><p>å¯¹äºç¼“å­˜çš„ <span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"><strong>åŠŸèƒ½æ€§çš„æ”¯æŒæ˜¯æ¯”è¾ƒå°‘</strong></span> çš„ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥ï¼Œè¿˜æœ‰å®‰å…¨æ€§çš„é—®é¢˜ã€‚</p><br><p>é‚£ä¹ˆä½¿ç”¨ä»€ä¹ˆæ¥å½“ç¼“å­˜å‘¢ï¼Ÿ</p><ul><li>Redis</li></ul><p><img src="/blog/assets/image-20220331162653277.afc15fa3.png" alt="image-20220331162653277" loading="lazy"></p><br><h2 id="äºŒ-è¾“å…¥è¾“å‡ºæ˜ å°„" tabindex="-1"><a class="header-anchor" href="#äºŒ-è¾“å…¥è¾“å‡ºæ˜ å°„" aria-hidden="true">#</a> äºŒ è¾“å…¥è¾“å‡ºæ˜ å°„</h2><h3 id="_1-è¾“å…¥æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_1-è¾“å…¥æ˜ å°„" aria-hidden="true">#</a> 1. è¾“å…¥æ˜ å°„</h3><p>è¾“å…¥æ˜ å°„å…¶å®å°±æ˜¯è¯´Mybatisæ˜¯å¦‚ä½•ä¼ å€¼çš„</p><h4 id="_1-ä¸€ä¸ªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_1-ä¸€ä¸ªå‚æ•°" aria-hidden="true">#</a> 1) ä¸€ä¸ªå‚æ•°</h4><p>mapper</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä»€ä¹ˆæ˜¯ç®€å•å‚æ•°å‘¢ï¼Ÿ</span>
<span class="token comment">// åœ¨Mybatisä¸­ï¼ŒåŸºæœ¬ç±»å‹+String + åŒ…è£…ç±»å‹ = ç®€å•å‚æ•°</span>
<span class="token class-name">User</span> <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.cskaoyan.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"><strong>#{ä»»æ„å€¼}</strong></span> è¿™ç§æ–¹å¼æ¥å–å€¼ã€‚</p><p>tipï¼šå½“åªä¼ ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå‡å¦‚è¿™ä¸ªå‚æ•°é…ç½®äº†@Paramæ³¨è§£ï¼Œé‚£ä¹ˆåç»­å°±ä¸èƒ½é€šè¿‡ <code>#{ä»»æ„å€¼} </code> æ¥å–å€¼äº†</p><br><h4 id="_2-å¤šä¸ªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-å¤šä¸ªå‚æ•°" aria-hidden="true">#</a> 2) å¤šä¸ªå‚æ•°</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token number">1.</span> æŒ‰ç…§å‚æ•°å‡ºç°çš„é¡ºåº ï¼ˆå‡ ä¹ä¸ç”¨ï¼‰
    
<span class="token number">2.</span> ä½¿ç”¨javaå¯¹è±¡ä¼ å‚ ï¼ˆå¸¸ç”¨ï¼‰
    
<span class="token number">3.</span> ä½¿ç”¨<span class="token annotation punctuation">@Param</span>æ³¨è§£ä¼ å‚ ï¼ˆå¸¸ç”¨ï¼‰
    
<span class="token number">4.</span> ä½¿ç”¨ map ä¼ å‚ï¼ˆå‡ ä¹ä¸ç”¨ï¼‰

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>1. æŒ‰ç…§å‚æ•°é¡ºåº</strong>ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Mapperæ¥å£</span>
<span class="token class-name">Integer</span> <span class="token function">insertUser3</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">String</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (null, #{arg0}, #{arg1}, #{arg2}, #{arg3})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>arg0, arg1... è¿˜å¯ä»¥æ›¿æ¢ä¸º param1, param2 ...</p><p>ä½†è¿™ç§æ–¹å¼å¯è¯»æ€§è¾ƒå·®ï¼Œå½“å‚æ•°ä¸ªæ•°å¢åŠ æ—¶ï¼Œå¾ˆå®¹æ˜“å‡ºé”™</p><br><p>**2. ä½¿ç”¨javaå¯¹è±¡ä¼ å‚ **ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Mapperæ¥å£</span>
<span class="token class-name">Integer</span> <span class="token function">insertUser1</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (#{id}, #{username}, #{password}, #{age}, #{gender})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"><strong>#{æˆå‘˜å˜é‡å}</strong></span> æ¥å–å€¼ã€‚æœ¬è´¨ä¸Šæ˜¯é€šè¿‡JavaBeanä¸­çš„getterçš„åå­—æ¥å–å€¼ã€‚ä¸€èˆ¬æˆå‘˜å˜é‡åå’Œgetteræ–¹æ³•æ˜¯åŒåçš„ã€‚</p><br><p>**3. ä½¿ç”¨@Paramæ³¨è§£ä¼ å‚ **ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Mapperæ¥å£</span>
<span class="token class-name">Integer</span> <span class="token function">insertUser2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Integer</span> <span class="token function">insertUser4</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;pw&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (#{user.id}, #{user.username}, #{user.password}, #{user.age}, #{user.gender})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUser4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (null, #{name}, #{pw}, #{age}, #{gender})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šå½“å‚æ•°ä¸­çš„å¯¹è±¡æœ‰@Paramæ³¨è§£çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡<span style="color:red;font-size:æ–‡å­—å¤§å°;font-family:å­—ä½“;"> #{æ³¨è§£çš„å€¼ . æˆå‘˜å˜é‡å} </span>æ¥å–å€¼ã€‚</p><br><p>**4. ä½¿ç”¨ map ä¼ å‚ **ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// Mapperæ¥å£</span>
<span class="token class-name">User</span> <span class="token function">selectUserByMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šå½“æ¥å£ä¸­ä½¿ç”¨äº† @Param æ³¨è§£æ—¶ï¼Œåœ¨xmlé…ç½®æ–‡ä»¶ä¸­çš„ä½¿ç”¨æ–¹å¼å’Œå¯¹è±¡+æ³¨è§£çš„æ–¹å¼ç±»ä¼¼</p><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserByMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.Map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where username = #{name} and age = #{age}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserByMap</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±ä¸Šå¯è§ï¼Œmapä¸­çš„keyå€¼æ˜¯ä¸å¯æ§çš„ï¼Œå¯ç”±è°ƒç”¨è€…éšæ„å‘½åï¼Œæ•…è¯¥æ–¹å¼ä¸æ¨èä½¿ç”¨</p><br><h3 id="_2-è¾“å‡ºæ˜ å°„" tabindex="-1"><a class="header-anchor" href="#_2-è¾“å‡ºæ˜ å°„" aria-hidden="true">#</a> 2. è¾“å‡ºæ˜ å°„</h3><p>è¾“å‡ºæ˜ å°„å³Mybatis å¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼ç»™æˆ‘ä»¬å°è£…ä»æ•°æ®åº“è¿”å›çš„æ•°æ®ã€‚</p><br><h4 id="_1-ç®€å•ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_1-ç®€å•ç±»å‹" aria-hidden="true">#</a> 1) ç®€å•ç±»å‹</h4><p><strong>è¿”å›ç®€å•ç±»å‹</strong>ï¼šï¼ˆåŒ…æ‹¬ï¼šJavaè¯­æ³•ä¸­çš„åŸºæœ¬ç±»å‹ã€åŒ…è£…ç±»ä»¥åŠå­—ç¬¦ä¸² Java.lang.Stringï¼‰</p><p>ä¸è®ºä½ éœ€è¦è¿”å›å•ä¸ªå€¼ã€è¿˜æ˜¯è¿”å›ä¸€ä¸ªListï¼Œéƒ½åªéœ€è¦åœ¨æ¥å£ä¸­æŒ‡å®šç±»å‹å³å¯ï¼Œxmlæ–‡ä»¶ä¸­çš„ resultType å±æ€§å¯è®¾ç½®ä¹Ÿå¯ä»¥ä¸è®¾ç½®</p><br><h4 id="_2-javaå¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#_2-javaå¯¹è±¡" aria-hidden="true">#</a> 2) Javaå¯¹è±¡</h4><p><strong>è¿”å›ä¸€ä¸ªJavaå¯¹è±¡ï¼ˆæˆ–è€…è¯´java bean ã€å®ä½“ç±»ç­‰ï¼‰</strong>ï¼š</p><p>æ¥å£ä¸­è¿”å›å€¼ä¸ºç±»åï¼Œxmlä¸­ resultType éœ€è¦è®¾ç½® å…¨é™å®šç±»å</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// JavaBean</span>
<span class="token class-name">User</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ—åå’Œè¡¨å­—æ®µåä¸ä¸€è‡´çš„æƒ…å†µ</span>
<span class="token class-name">UserVO</span> <span class="token function">selectById2</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.vo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- å¦‚æœå‡ºç°æ•°æ®åº“ä¸­åˆ—çš„å€¼å’Œå¯¹è±¡ä¸­æˆå‘˜å˜é‡çš„å€¼å¯¹åº”ä¸ä¸Šçš„æ—¶å€™ï¼Œå¯ä»¥é‡‡ç”¨åˆ«åçš„æ–¹å¼æ¥è§£å†³ (æˆ–è€…å‚ç…§åé¢çš„ResultMap)--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.vo.UserVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id,name as username,email,age from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-resultmap" tabindex="-1"><a class="header-anchor" href="#_3-resultmap" aria-hidden="true">#</a> 3) ResultMap</h3><p>Mybatisç»™å¼€å‘è€…æä¾›çš„é«˜çº§æ˜ å°„åŠŸèƒ½ï¼Œç›®å‰å¯ä»¥å…ˆä½¿ç”¨ä¸€ä¸ªç®€å•ç‰ˆæœ¬ï¼Œè¿æ¥æŸ¥è¯¢çš„æ—¶å€™ ResultMapè¿˜å¤§æœ‰ç”¨æ­¦ä¹‹åœ°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// resultMap </span>
<span class="token class-name">User</span> <span class="token function">selectUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAllUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2Map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- ä¸»é”®é€šè¿‡idæ ‡ç­¾æ¥æ˜ å°„ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å¤šè¡¨æŸ¥è¯¢çš„æ—¶å€™æé«˜æ•ˆç‡
		column: åˆ—å
		propertyï¼šæˆå‘˜å˜é‡å     --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nickname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nickname<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2Map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAllUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user2Map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="ä¸‰-mybatisåŠ¨æ€sql" tabindex="-1"><a class="header-anchor" href="#ä¸‰-mybatisåŠ¨æ€sql" aria-hidden="true">#</a> ä¸‰ mybatisåŠ¨æ€SQL</h2><h3 id="_1-ifå’Œwhere" tabindex="-1"><a class="header-anchor" href="#_1-ifå’Œwhere" aria-hidden="true">#</a> 1. ifå’Œwhere</h3><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">void</span> <span class="token function">updateUsernameOrAgeById</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUsernameOrAgeById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>username = #{username},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>age = #{age},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*
whereæ ‡ç­¾ä¸‰ä¸ªä½œç”¨ï¼š
1. sqlè¯­å¥ä¸­æ‹¼æ¥whereå­—ç¬¦
2. sqlè¯­å¥ä¸­å»é™¤è·Ÿç€çš„andæˆ–è€…or
3. where æ ‡ç­¾é‡Œé¢æ²¡æœ‰å†…å®¹ï¼Œä¸ä¼šæ‹¼æ¥where


xmlæ–‡ä»¶ä¸­å¦‚æœéœ€è¦ç”¨åˆ°å°äºï¼Œéœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦(æ­£å¸¸å¤§äºæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿæ¨èä½¿ç”¨è½¬ä¹‰å­—ç¬¦)

    ç‰¹æ®Šå­—ç¬¦           è½¬ä¹‰å­—ç¬¦            	OGNL
    &gt;                  &amp;gt;                gt
    &lt;                  &amp;lt;                lt
    &gt;=                 &amp;gt;=               gte
    &lt;=                 &amp;lt;=               lte

</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-choose-when-otherwise" tabindex="-1"><a class="header-anchor" href="#_2-choose-when-otherwise" aria-hidden="true">#</a> 2. choose when otherwise</h3><p>ifå¹¶æ²¡æœ‰elseæ ‡ç­¾ï¼Œåœ¨Mybatisä¸­ä½¿ç”¨ <code>choose-when-otherwise</code> æ¥æ›¿ä»£ <code>if-else</code> çš„ä½œç”¨</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
è¿™ä¸ªæ ‡ç­¾å°±ç›¸å½“äºjavaä¸­çš„ `<span class="token keyword">if</span> <span class="token keyword">else</span>`<span class="token operator">:</span>

<span class="token generics"><span class="token punctuation">&lt;</span>when<span class="token punctuation">&gt;</span></span>       ç›¸å½“äº  <span class="token keyword">if</span>

<span class="token generics"><span class="token punctuation">&lt;</span>otherwise<span class="token punctuation">&gt;</span></span>  ç›¸å½“äº  <span class="token keyword">else</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserListById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.xxx.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from user where
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id gt 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                id = (select max(id) from user)
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>
                id = (select min(id) from user)
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-trimå’Œset" tabindex="-1"><a class="header-anchor" href="#_3-trimå’Œset" aria-hidden="true">#</a> 3. trimå’Œset</h3><p><strong>trimç¤ºä¾‹</strong>:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token comment">&lt;!--
        prefix: å¢åŠ æŒ‡å®šçš„å‰ç¼€
        suffix: å¢åŠ æŒ‡å®šçš„åç¼€
        prefixoverrdes:  åˆ é™¤æŒ‡å®šçš„å‰ç¼€
        suffixOverrides: åˆ é™¤æŒ‡å®šçš„åç¼€
    --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ ¹æ®idä¿®æ”¹userçš„å€¼ï¼Œå‡å¦‚æˆå‘˜å˜é‡æ²¡æœ‰å€¼ï¼Œé‚£ä¹ˆä¸ä¿®æ”¹</span>
<span class="token keyword">int</span> <span class="token function">updateUserByIdSelective</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUserByIdSelective<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    update user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>set<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.name != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> name = #{user.name},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> age = #{user.age},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.nickname != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> nickname = #{user.nickname},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        id = #{user.id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>setç¤ºä¾‹</strong>ï¼š</p><p>mapper</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ ¹æ®idä¿®æ”¹userçš„å€¼ï¼Œå‡å¦‚æˆå‘˜å˜é‡æ²¡æœ‰å€¼ï¼Œé‚£ä¹ˆä¸ä¿®æ”¹</span>
<span class="token keyword">int</span> <span class="token function">updateUserByIdSelectiveUseSet</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>mapper.xml</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUserByIdSelectiveUseSet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.name != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> name = #{user.name},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> age = #{user.age},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.nickname != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> nickname = #{user.nickname},<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        id = #{user.id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>&lt;set&gt;</code> æ ‡ç­¾å°±ç›¸å½“äº <code>&lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt;</code> è¿™ä¸ªé…ç½®ã€‚</p><br><h3 id="_4-sqlå’Œinclude" tabindex="-1"><a class="header-anchor" href="#_4-sqlå’Œinclude" aria-hidden="true">#</a> 4. sqlå’Œinclude</h3><p>åœ¨Mybatisä¸­ï¼Œå¯¹é‡å¤ä½¿ç”¨çš„ä»£ç ç‰‡æ®µå¯ä»¥ä½¿ç”¨sqlæ ‡ç­¾å•ç‹¬åˆ—å‡ºæ¥ï¼Œç„¶ååœ¨å„ä¸ªsqlè¯­å¥ä¸­ä½¿ ç”¨æ ‡ç­¾å¼•å…¥ä»£ç ç‰‡æ®µ</p><p>ä¸€èˆ¬ä½¿ç”¨ <code>sql-include</code> æ ‡ç­¾æ¥å¸®åŠ©æˆ‘ä»¬æå–åˆ—å</p><br><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectUserDynamic</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    id, username, password, age, gender
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserDynamic<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>all_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    from user
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> and username = #{username} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> and age = #{age} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> and gender = #{gender} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_5-selectkeyè·å–è‡ªå¢id" tabindex="-1"><a class="header-anchor" href="#_5-selectkeyè·å–è‡ªå¢id" aria-hidden="true">#</a> 5. selectKeyè·å–è‡ªå¢ID</h3><p><strong>selectKeyæ ‡ç­¾</strong>ï¼šè¿™ä¸ªæ ‡ç­¾å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ‰§è¡Œç›®æ ‡SQLè¯­å¥ä¹‹å‰æˆ–è€…ä¹‹åæ‰§è¡Œé¢å¤–çš„ä¸€æ¡SQLè¯­å¥</p><br><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">Integer</span> <span class="token function">insertUserAndGetId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span> <span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUserAndGetId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into user values (null, #{user.username}, #{user.password}, #{user.age}, #{user.gender})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select last_insert_id()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æµ‹è¯•ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsertUserAndGetId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;user2205&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Integer</span> affectedRows <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">insertUserAndGetId</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;affectedRows = &quot;</span> <span class="token operator">+</span> affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ’å…¥æˆåŠŸ, ID = &quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>useGeneratedKeyså±æ€§</strong>ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token comment">&lt;!--
é™¤äº†ä¸Šè¿°æ–¹å¼å¤–ï¼Œè·å–è‡ªå¢IDè¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨ insertæ ‡ç­¾çš„ useGeneratedKeys å±æ€§ï¼š
    useGeneratedKeys: è¡¨ç¤ºå¼€å¯è‡ªå¢ä¸»é”®çš„åŠŸèƒ½
    keyProperty: è¡¨ç¤ºæŠŠå€¼æ˜ å°„åˆ°å“ªé‡Œå»
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertUserAndGetId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&gt;
    insert into user values (null, #{user.username}, #{user.password}, #{user.age}, #{user.gender})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AFTER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select last_insert_id()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

&lt;!-- useGeneratedKeys (insert and update only) 
This tells MyBatis to use the JDBC getGeneratedKeys method to retrieve keys generated internally 
by the database (e.g. auto increment fields in RDBMS like MySQL or SQL Server). Default: false.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_6-foreachæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_6-foreachæ ‡ç­¾" aria-hidden="true">#</a> 6. foreachæ ‡ç­¾</h3><p>The <em>foreach</em> element is very powerful, and allows you to specify a collection, declare item and index variables that can be used inside the body of the element.</p><p>It also allows you to specify opening and closing strings, and add a separator to place in between iterations.</p><p>The element is smart in that it wonâ€™t accidentally append extra separators.</p><br><p><strong>foreachæ ‡ç­¾ ä½¿ç”¨åœºæ™¯</strong> ï¼š1 - in æŸ¥è¯¢ã€ 2 - æ‰¹é‡æ’å…¥</p><br><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">int</span> <span class="token function">insertOrderBatch</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;orderList&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orderList<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderByIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertOrderBatch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into `order` values
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>o<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        (null, #{o.orderName}, #{o.price}, #{o.userId})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectOrderByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id, order_name as orderName, price
    from `order` where
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ids<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id in (<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ã€æ³¨æ„ã€‘ï¼š<code>&lt;foreach collection=&quot;&quot;&gt;</code> æ ‡ç­¾çš„collectionå±æ€§</p><p>å½“æ¥å£ä¸­ä½¿ç”¨äº† @Param æ³¨è§£æ—¶ï¼Œç›´æ¥ä½¿ç”¨ æ³¨è§£ä¸­çš„åå­—å³å¯ï¼Œå…¥ä¸Šä¾‹ä¸­æƒ…å½¢</p><p>ä½†å¦‚æœæ¥å£ä¸­æ²¡æœ‰ä½¿ç”¨æ³¨è§£ï¼Œ</p><p>â€‹ é‚£ä¹ˆå¦‚æœæ˜¯ List ç±»å‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>agr0 | collection | list</code> ä¸‰ç§æ–¹å¼å‡å¯</p><p>â€‹ å¦‚æœæ˜¯æ•°ç»„ç±»å‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>arg0 | array</code></p><br><p>æµ‹è¯•ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// in æŸ¥è¯¢æµ‹è¯•</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectOrderByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orderList <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">selectOrderByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Order</span> order <span class="token operator">:</span> orderList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ‰¹é‡æ’å…¥</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsertOrderBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orderList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> orderName <span class="token operator">=</span> <span class="token string">&quot;mystery&quot;</span> <span class="token operator">+</span> start<span class="token punctuation">;</span>
        <span class="token class-name">Long</span> price <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">999999</span> <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> userId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Order</span> order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> orderName<span class="token punctuation">,</span> price<span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        orderList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
        start<span class="token operator">++</span><span class="token punctuation">;</span>
        num<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>orderList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> affectedRows <span class="token operator">=</span> orderMapper<span class="token punctuation">.</span><span class="token function">insertOrderBatch</span><span class="token punctuation">(</span>orderList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;batch insert affectedRows = &quot;</span> <span class="token operator">+</span> affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="å››-mybatiså¤šè¡¨æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#å››-mybatiså¤šè¡¨æŸ¥è¯¢" aria-hidden="true">#</a> å›› mybatiså¤šè¡¨æŸ¥è¯¢</h2><h3 id="_1-ä¸€å¯¹ä¸€æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_1-ä¸€å¯¹ä¸€æŸ¥è¯¢" aria-hidden="true">#</a> 1. ä¸€å¯¹ä¸€æŸ¥è¯¢</h3><p><img src="/blog/assets/image-20220330154112463.905be424.png" alt="image-20220330154112463" loading="lazy"></p><br><p><img src="/blog/assets/image-20220330154913251.1e77558b.png" alt="image-20220330154913251" loading="lazy"></p><br><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">GoodsMapper</span> <span class="token punctuation">{</span>

    <span class="token class-name">GoodsVO</span> <span class="token function">selectGoodsById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectGoodsByIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;idList&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">GoodsDetail</span> <span class="token function">selectGoodsDetailById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.mapper.GoodsMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    
	<span class="token comment">&lt;!--è¿æ¥æŸ¥è¯¢--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.GoodsVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.GoodsDetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gd_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>img_url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>imgUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select *
        from goods as g
                 left join goods_detail as gd
                           on g.gd_id = gd.id
        where g.id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

    
    <span class="token comment">&lt;!--åˆ†æ¬¡æŸ¥è¯¢--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from goods
        where id in
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                #{id}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.GoodsVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goodsDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.GoodsDetail<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsDetailById<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gd_id<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectGoodsDetailById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.GoodsDetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select id, price, img_url as imgUrl, g_id as gId
        from goods_detail where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æµ‹è¯•ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GoodsMapperTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">GoodsMapper</span> goodsMapper<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            goodsMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">GoodsMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectGoodsById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">GoodsVO</span> goodsVO <span class="token operator">=</span> goodsMapper<span class="token punctuation">.</span><span class="token function">selectGoodsById</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goodsVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectGoodsDetailByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsVO</span><span class="token punctuation">&gt;</span></span> goodsVOList <span class="token operator">=</span> goodsMapper<span class="token punctuation">.</span><span class="token function">selectGoodsByIds</span><span class="token punctuation">(</span>idList<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">GoodsVO</span> goodsVO <span class="token operator">:</span> goodsVOList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>goodsVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-ä¸€å¯¹å¤šæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_2-ä¸€å¯¹å¤šæŸ¥è¯¢" aria-hidden="true">#</a> 2. ä¸€å¯¹å¤šæŸ¥è¯¢</h3><p><img src="/blog/assets/image-20220330192058797.41ca0323.png" alt="image-20220330192058797" loading="lazy"></p><br><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token comment">// æŸ¥è¯¢æŒ‡å®šidçš„ç”¨æˆ·åŠå…¶å¯¹åº”çš„è®¢å•åˆ—è¡¨</span>
<span class="token class-name">UserVO</span> <span class="token function">selectUserVOById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- UserMapper.xml --&gt;</span>
	<span class="token comment">&lt;!-- è¿æ¥æŸ¥è¯¢ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserVOByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from user as u
        left join `order` as o on u.id = o.user_id
        where u.id in
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                #{id}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>order_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>


    <span class="token comment">&lt;!-- åˆ†æ¬¡æŸ¥è¯¢ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserVOById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select  id as uid, username, password, age, gender
        from user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userVOMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orderList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.util.List<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.mapper.OrderMapper.selectOrderByUserId<span class="token punctuation">&quot;</span></span>
                     <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uid<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- OrderMapper.xml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectOrderByUserId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Order<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select id, order_name as orderName, price, user_id as userId
    from `order`
    where user_id = #{userId}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æµ‹è¯•ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUserVOById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">UserVO</span> userVO <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserVOById</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-å¤šå¯¹å¤šæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_3-å¤šå¯¹å¤šæŸ¥è¯¢" aria-hidden="true">#</a> 3. å¤šå¯¹å¤šæŸ¥è¯¢</h3><p><img src="/blog/assets/image-20220330201309679.077972ac.png" alt="image-20220330201309679" loading="lazy"></p><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// UserRoleVO.java</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserRoleVO</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Role</span><span class="token punctuation">&gt;</span></span> roleList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>Mapperæ¥å£ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…æ‹¬æœ‰å“ªäº› role ï¼‰</span>
<span class="token class-name">UserRoleVO</span> <span class="token function">selectUserRoleVOById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserRoleVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectUserRoleVOByIds</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>mapper.xmlï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--å¤šè¡¨æŸ¥è¯¢ â€”â€” å¤šå¯¹å¤š (è¿æ¥æŸ¥è¯¢ï¼šä¸ä¸€å¯¹å¤šçš„æ–¹å¼åŸºæœ¬ä¸€è‡´) --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserRoleVOById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select u.id as uid, username, `password`, age, gender,role_id, role_name, description
        from user as u
        left join sys_user_role as ur on u.id = ur.user_id
        left join role as r on ur.role_id = r.id
        where u.id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserRoleVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>


    <span class="token comment">&lt;!--å¤šè¡¨æŸ¥è¯¢ â€”â€” å¤šå¯¹å¤š (åˆ†æ¬¡æŸ¥è¯¢ ) --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectUserRoleVOByIds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      select * from user
      where id in
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              #{id}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userRoleVOMap2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.vo.UserRoleVO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>roleList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Role<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectRoleByUserId<span class="token punctuation">&quot;</span></span>
                    <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--æ ¹æ®ç”¨æˆ· idæŸ¥è¯¢ è§’è‰² --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectRoleByUserId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cn.itdrizzle.bean.Role<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select role_id as id, role_name as roleName, description
        from sys_user_role as ur
        left join role as r on ur.role_id = r.id
        where user_id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æµ‹è¯•ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// å¤šå¯¹å¤š</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUserRoleVOById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">UserRoleVO</span> userRoleVO <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserRoleVOById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userRoleVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectUserRoleVOByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> idList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    idList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserRoleVO</span><span class="token punctuation">&gt;</span></span> userRoleVOList <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">selectUserRoleVOByIds</span><span class="token punctuation">(</span>idList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">UserRoleVO</span> userRoleVO <span class="token operator">:</span> userRoleVOList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userRoleVO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="äº”-ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•" tabindex="-1"><a class="header-anchor" href="#äº”-ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•" aria-hidden="true">#</a> äº” ä½¿ç”¨æŠ€å·§åŠé—®é¢˜è®°å½•</h2><h3 id="_1-ideaå¸¸ç”¨æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-ideaå¸¸ç”¨æ’ä»¶" aria-hidden="true">#</a> 1. IDEAå¸¸ç”¨æ’ä»¶</h3><p><strong>Lombok</strong>ï¼š</p><p>å…ˆåœ¨ IDEA ä¸­ å®‰è£… Lombok æ’ä»¶ï¼Œç„¶ååœ¨é¡¹ç›®ä¸­å¯¼åŒ…å³å¯ä½¿ç”¨</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.18.22<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨ç¤ºä¾‹ï¼š</span>
<span class="token annotation punctuation">@Data</span>                     <span class="token comment">// æœ‰æ— å‚æ„é€ </span>
<span class="token annotation punctuation">@AllArgsConstructor</span>       <span class="token comment">// å…¨å‚æ„é€ ï¼ˆä¼šå¯¼è‡´@Dataçš„æ— å‚æ„é€ å¤±æ•ˆï¼‰</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>        <span class="token comment">// æ— å‚æ„é€ ï¼ˆå¯ä»¥ç”¨æ¥è§£å†³@AllArgsConstructorå¯¼è‡´çš„@Dataæ— å‚æ„é€ å¤±æ•ˆé—®é¢˜ï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> gender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>lombokä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼š</p><p>ä¸€ä¸ªé¡¹ç›®ç»„ä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªäººä½¿ç”¨lombokï¼Œé‚£ä¹ˆå¤§å®¶å°±éƒ½å¾—ä½¿ç”¨lombokï¼Œå…¶å®ä¸å¤ªå‹å¥½</p><p>ï¼ˆ é¡¹ç›®ç»„ä¸­ä¸è¦åšç¬¬ä¸€ä¸ªä½¿ç”¨Lombokçš„äººï¼ï¼‰</p><br><p><strong>MyBatisCodeHelper-Pro</strong>ï¼š</p><p>Documentï¼š <a href="https://gejun123456.github.io/MyBatisCodeHelper-Pro" target="_blank" rel="noopener noreferrer">https://gejun123456.github.io/MyBatisCodeHelper-Pro<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
Mybatisæœ‰å¾ˆå¤šç±»ä¼¼çš„æ’ä»¶ï¼Œè¿™äº›æ’ä»¶çš„åŠŸèƒ½å¤§åŒå°å¼‚ã€‚

- å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ@Paramæ³¨è§£
- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ æ¥å£æ–‡ä»¶ å’Œå…¶å¯¹åº”çš„ Mapper.xml ä¹‹é—´æ¥å›è·³è½¬
- å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾
- å¯ä»¥å¸®åŠ©æˆ‘ä»¬æç¤ºä»£ç ï¼Œæ£€æŸ¥é”™è¯¯
   <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-mapperæ–‡ä»¶æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#_2-mapperæ–‡ä»¶æ¨¡æ¿" aria-hidden="true">#</a> 2. mapperæ–‡ä»¶æ¨¡æ¿</h3><p>æ¨¡æ¿ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æ–‡ä»¶æ¨¡æ¿è®¾ç½®æ­¥éª¤ï¼š</p><p><img src="/blog/assets/image-20220329155905784.5062e23a.png" alt="image-20220329155905784" loading="lazy"></p><br><h3 id="_3-ç¼ºå¤±jboss-vfs" tabindex="-1"><a class="header-anchor" href="#_3-ç¼ºå¤±jboss-vfs" aria-hidden="true">#</a> 3. ç¼ºå¤±Jboss.VFS</h3><p>å…·ä½“é—®é¢˜æè¿°ï¼šmybatiså¼€å¯æ—¥å¿—æ—¶ï¼ŒIDEAæ§åˆ¶å°ä¼šè¾“å‡ºä¸€äº›å¤šä½™çš„å¹²æ‰°ä¿¡æ¯ä»¥åŠä¹±ç ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="/blog/assets/image-20220329144640587.717f75a5.png" alt="image-20220329144640587" loading="lazy"></p><br><p>åŸå› ï¼ˆ mybatis-config.xml ä¸­ä½¿ç”¨äº† packageçš„æ–¹å¼ ï¼‰ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--some environments--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Tag<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain.blog.Tag<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- æ­¤å¤„ä¼šè°ƒç”¨ VFS --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain.blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mapper.PostMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

        <span class="token comment">&lt;!-- æ­¤å¤„ä¼šè°ƒç”¨ VFS --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.demo.mapper.builder<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>è§£å†³æ–¹æ³•ï¼šå¼•å…¥ Jboss-VFS å³å¯</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jboss<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jboss-vfs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.16.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/develop-note/edit/main/demo/src/Database/mybatis/mybatis.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><!----><a href="/blog/Database/mybatis/mybatis-plus.html" class="nav-link next" aria-label="mybatis-plus"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">mybatis-plus<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Drizzle</div><div class="copyright">Copyright Â© 2022 csdrizzle</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.837ab119.js" defer></script>
  </body>
</html>
