<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.itdrizzle.cn/blog/Database/mysql/jdbc.html"><meta property="og:site_name" content="Blog"><meta property="og:title" content="JDBCå’Œæ•°æ®åº“è¿æ¥æ± "><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><title>JDBCå’Œæ•°æ®åº“è¿æ¥æ±  | Blog</title><meta name="description" content="DevelopNote and Blog">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/blog/assets/style.03678e8d.css">
    <link rel="modulepreload" href="/blog/assets/app.3dc893b0.js"><link rel="modulepreload" href="/blog/assets/jdbc.html.a0c4e800.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog/assets/jdbc.html.b1c099cf.js"><link rel="prefetch" href="/blog/assets/home.html.47397180.js"><link rel="prefetch" href="/blog/assets/index.html.7d30cc84.js"><link rel="prefetch" href="/blog/assets/slide.html.60900976.js"><link rel="prefetch" href="/blog/assets/index.html.8704b022.js"><link rel="prefetch" href="/blog/assets/index.html.6f5cb701.js"><link rel="prefetch" href="/blog/assets/index.html.7d22017f.js"><link rel="prefetch" href="/blog/assets/article10.html.77feb948.js"><link rel="prefetch" href="/blog/assets/article11.html.0a62477e.js"><link rel="prefetch" href="/blog/assets/article12.html.0b963e0f.js"><link rel="prefetch" href="/blog/assets/article9.html.b358c2f5.js"><link rel="prefetch" href="/blog/assets/Tablespace.html.0b19118f.js"><link rel="prefetch" href="/blog/assets/index.html.85c367f3.js"><link rel="prefetch" href="/blog/assets/index.html.9ac293f9.js"><link rel="prefetch" href="/blog/assets/index.html.a706e77f.js"><link rel="prefetch" href="/blog/assets/mybatis-generator.html.28df4ffa.js"><link rel="prefetch" href="/blog/assets/mybatis-plus.html.3fa0b517.js"><link rel="prefetch" href="/blog/assets/mybatis.html.5e9dad89.js"><link rel="prefetch" href="/blog/assets/mybatisæºç å‰–æ.html.fa814eb0.js"><link rel="prefetch" href="/blog/assets/tk-mybatis.html.82ee5630.js"><link rel="prefetch" href="/blog/assets/innodb.html.f54e0c7f.js"><link rel="prefetch" href="/blog/assets/mysql-index.html.ce424929.js"><link rel="prefetch" href="/blog/assets/mysql.html.0c8aff2c.js"><link rel="prefetch" href="/blog/assets/sql.html.5ed963f5.js"><link rel="prefetch" href="/blog/assets/sqlä¼˜åŒ–.html.643d26c3.js"><link rel="prefetch" href="/blog/assets/db2.html.d42c9406.js"><link rel="prefetch" href="/blog/assets/Oracle.html.e449c86e.js"><link rel="prefetch" href="/blog/assets/Redis.html.7f6721dc.js"><link rel="prefetch" href="/blog/assets/Redisæºç .html.8f4fc340.js"><link rel="prefetch" href="/blog/assets/index.html.d42f6808.js"><link rel="prefetch" href="/blog/assets/gc.html.57697c19.js"><link rel="prefetch" href="/blog/assets/Jvmå†…å­˜ç®¡ç†.html.8c6815b8.js"><link rel="prefetch" href="/blog/assets/Jvmç±»åŠ è½½.html.70a9dcdf.js"><link rel="prefetch" href="/blog/assets/Specification.html.5149959a.js"><link rel="prefetch" href="/blog/assets/index.html.55dec906.js"><link rel="prefetch" href="/blog/assets/article1.html.c9355f77.js"><link rel="prefetch" href="/blog/assets/article2.html.1de2313c.js"><link rel="prefetch" href="/blog/assets/article3.html.4790b5b1.js"><link rel="prefetch" href="/blog/assets/article4.html.4ba7a1ae.js"><link rel="prefetch" href="/blog/assets/article5.html.8e5d7205.js"><link rel="prefetch" href="/blog/assets/article6.html.d57d531d.js"><link rel="prefetch" href="/blog/assets/article7.html.5123fa28.js"><link rel="prefetch" href="/blog/assets/article8.html.3a977b4b.js"><link rel="prefetch" href="/blog/assets/disable.html.df7fe42f.js"><link rel="prefetch" href="/blog/assets/encrypt.html.dfe29285.js"><link rel="prefetch" href="/blog/assets/markdown.html.bd0a35bc.js"><link rel="prefetch" href="/blog/assets/index.html.5346c78d.js"><link rel="prefetch" href="/blog/assets/Docker.html.b04ca486.js"><link rel="prefetch" href="/blog/assets/kubernetes.html.3ac6fbd7.js"><link rel="prefetch" href="/blog/assets/Linux-install.html.e25f57da.js"><link rel="prefetch" href="/blog/assets/Linux.html.1ecea965.js"><link rel="prefetch" href="/blog/assets/shell.html.6dfc6824.js"><link rel="prefetch" href="/blog/assets/vim.html.342a8ea2.js"><link rel="prefetch" href="/blog/assets/git.html.ce119a67.js"><link rel="prefetch" href="/blog/assets/Gradle.html.8fd63484.js"><link rel="prefetch" href="/blog/assets/maven.html.efa698b6.js"><link rel="prefetch" href="/blog/assets/idea.html.f12c1077.js"><link rel="prefetch" href="/blog/assets/windows.html.3fa064b6.js"><link rel="prefetch" href="/blog/assets/collection.html.6adacdda.js"><link rel="prefetch" href="/blog/assets/generics.html.eacc8603.js"><link rel="prefetch" href="/blog/assets/HashMapæºç åˆ†æ.html.70f3c007.js"><link rel="prefetch" href="/blog/assets/setå’Œmap.html.e40d87b7.js"><link rel="prefetch" href="/blog/assets/JaråŒ…çš„å¯¼å…¥.html.42e18cc4.js"><link rel="prefetch" href="/blog/assets/Javaå†å²åŠç®€ä»‹.html.717d3cb8.js"><link rel="prefetch" href="/blog/assets/JavaåŸºç¡€.html.7dd5cf86.js"><link rel="prefetch" href="/blog/assets/Javaå¸¸ç”¨ç±»åº“.html.b359beb0.js"><link rel="prefetch" href="/blog/assets/Javaé¢å‘å¯¹è±¡.html.8ba23325.js"><link rel="prefetch" href="/blog/assets/åŸç åç å’Œè¡¥ç .html.0bb15e36.js"><link rel="prefetch" href="/blog/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html.8dba9f48.js"><link rel="prefetch" href="/blog/assets/Annotation.html.1b439d5e.js"><link rel="prefetch" href="/blog/assets/Enum.html.bbb4d530.js"><link rel="prefetch" href="/blog/assets/Reflection.html.81b8417f.js"><link rel="prefetch" href="/blog/assets/Lambda.html.3d1df8c9.js"><link rel="prefetch" href="/blog/assets/Stream.html.1fb1bdc8.js"><link rel="prefetch" href="/blog/assets/zookeeper.html.c221500b.js"><link rel="prefetch" href="/blog/assets/404.html.0b36b055.js"><link rel="prefetch" href="/blog/assets/index.html.bab2af12.js"><link rel="prefetch" href="/blog/assets/index.html.e41e87d3.js"><link rel="prefetch" href="/blog/assets/index.html.7787152c.js"><link rel="prefetch" href="/blog/assets/index.html.cef3111a.js"><link rel="prefetch" href="/blog/assets/index.html.c90b33f8.js"><link rel="prefetch" href="/blog/assets/index.html.9b9d8436.js"><link rel="prefetch" href="/blog/assets/index.html.f8e39c2d.js"><link rel="prefetch" href="/blog/assets/index.html.5d331ca5.js"><link rel="prefetch" href="/blog/assets/index.html.267b9d3d.js"><link rel="prefetch" href="/blog/assets/index.html.dbbba9a7.js"><link rel="prefetch" href="/blog/assets/index.html.df38ef9c.js"><link rel="prefetch" href="/blog/assets/index.html.a9e7b934.js"><link rel="prefetch" href="/blog/assets/index.html.0a3a7cd7.js"><link rel="prefetch" href="/blog/assets/index.html.b2c9c053.js"><link rel="prefetch" href="/blog/assets/index.html.6eb84cb8.js"><link rel="prefetch" href="/blog/assets/index.html.80f037bb.js"><link rel="prefetch" href="/blog/assets/index.html.b4f94eaf.js"><link rel="prefetch" href="/blog/assets/index.html.93d4b516.js"><link rel="prefetch" href="/blog/assets/index.html.9f380a09.js"><link rel="prefetch" href="/blog/assets/index.html.564cd1b7.js"><link rel="prefetch" href="/blog/assets/index.html.d2850d4e.js"><link rel="prefetch" href="/blog/assets/index.html.1903a545.js"><link rel="prefetch" href="/blog/assets/home.html.73ab144c.js"><link rel="prefetch" href="/blog/assets/index.html.6261ea75.js"><link rel="prefetch" href="/blog/assets/slide.html.7879fd9c.js"><link rel="prefetch" href="/blog/assets/index.html.6e53be50.js"><link rel="prefetch" href="/blog/assets/index.html.e41330ee.js"><link rel="prefetch" href="/blog/assets/index.html.730336dc.js"><link rel="prefetch" href="/blog/assets/article10.html.cea5c1bc.js"><link rel="prefetch" href="/blog/assets/article11.html.7786743d.js"><link rel="prefetch" href="/blog/assets/article12.html.8d19efa2.js"><link rel="prefetch" href="/blog/assets/article9.html.52f6909a.js"><link rel="prefetch" href="/blog/assets/Tablespace.html.d75ba588.js"><link rel="prefetch" href="/blog/assets/index.html.755510b2.js"><link rel="prefetch" href="/blog/assets/index.html.74c82711.js"><link rel="prefetch" href="/blog/assets/index.html.32e79b66.js"><link rel="prefetch" href="/blog/assets/mybatis-generator.html.d09b8b43.js"><link rel="prefetch" href="/blog/assets/mybatis-plus.html.ca8c1553.js"><link rel="prefetch" href="/blog/assets/mybatis.html.d9983cae.js"><link rel="prefetch" href="/blog/assets/mybatisæºç å‰–æ.html.41c1c1b6.js"><link rel="prefetch" href="/blog/assets/tk-mybatis.html.b0af105e.js"><link rel="prefetch" href="/blog/assets/innodb.html.71109eea.js"><link rel="prefetch" href="/blog/assets/mysql-index.html.4c6061af.js"><link rel="prefetch" href="/blog/assets/mysql.html.4d5c3c64.js"><link rel="prefetch" href="/blog/assets/sql.html.4525bbf5.js"><link rel="prefetch" href="/blog/assets/sqlä¼˜åŒ–.html.5ad55062.js"><link rel="prefetch" href="/blog/assets/db2.html.631119e7.js"><link rel="prefetch" href="/blog/assets/Oracle.html.94c52a39.js"><link rel="prefetch" href="/blog/assets/Redis.html.23e3f728.js"><link rel="prefetch" href="/blog/assets/Redisæºç .html.6cbeb1a0.js"><link rel="prefetch" href="/blog/assets/index.html.b6cd68ad.js"><link rel="prefetch" href="/blog/assets/gc.html.8cc1af5a.js"><link rel="prefetch" href="/blog/assets/Jvmå†…å­˜ç®¡ç†.html.ca493412.js"><link rel="prefetch" href="/blog/assets/Jvmç±»åŠ è½½.html.824f3ed4.js"><link rel="prefetch" href="/blog/assets/Specification.html.a6636b14.js"><link rel="prefetch" href="/blog/assets/index.html.70e1f6a8.js"><link rel="prefetch" href="/blog/assets/article1.html.4c2e33ac.js"><link rel="prefetch" href="/blog/assets/article2.html.6effb58e.js"><link rel="prefetch" href="/blog/assets/article3.html.4eb5d2bc.js"><link rel="prefetch" href="/blog/assets/article4.html.20be7f5c.js"><link rel="prefetch" href="/blog/assets/article5.html.c233c6d9.js"><link rel="prefetch" href="/blog/assets/article6.html.41e5f459.js"><link rel="prefetch" href="/blog/assets/article7.html.d3feab94.js"><link rel="prefetch" href="/blog/assets/article8.html.adea2bba.js"><link rel="prefetch" href="/blog/assets/disable.html.04ee33a3.js"><link rel="prefetch" href="/blog/assets/encrypt.html.e8c0d27a.js"><link rel="prefetch" href="/blog/assets/markdown.html.8380e716.js"><link rel="prefetch" href="/blog/assets/index.html.05f9b372.js"><link rel="prefetch" href="/blog/assets/Docker.html.2cabb9f9.js"><link rel="prefetch" href="/blog/assets/kubernetes.html.02d1f6b2.js"><link rel="prefetch" href="/blog/assets/Linux-install.html.71ce1ffc.js"><link rel="prefetch" href="/blog/assets/Linux.html.abe80072.js"><link rel="prefetch" href="/blog/assets/shell.html.8e8c0dd7.js"><link rel="prefetch" href="/blog/assets/vim.html.cf8c2ccd.js"><link rel="prefetch" href="/blog/assets/git.html.d2e2f876.js"><link rel="prefetch" href="/blog/assets/Gradle.html.66ef55cd.js"><link rel="prefetch" href="/blog/assets/maven.html.bfce0a05.js"><link rel="prefetch" href="/blog/assets/idea.html.61367254.js"><link rel="prefetch" href="/blog/assets/windows.html.6da77d92.js"><link rel="prefetch" href="/blog/assets/collection.html.2da8865d.js"><link rel="prefetch" href="/blog/assets/generics.html.31afda86.js"><link rel="prefetch" href="/blog/assets/HashMapæºç åˆ†æ.html.5d2924d0.js"><link rel="prefetch" href="/blog/assets/setå’Œmap.html.6b3e9af2.js"><link rel="prefetch" href="/blog/assets/JaråŒ…çš„å¯¼å…¥.html.66b98c46.js"><link rel="prefetch" href="/blog/assets/Javaå†å²åŠç®€ä»‹.html.4d98e3e0.js"><link rel="prefetch" href="/blog/assets/JavaåŸºç¡€.html.07b0d859.js"><link rel="prefetch" href="/blog/assets/Javaå¸¸ç”¨ç±»åº“.html.c82f891d.js"><link rel="prefetch" href="/blog/assets/Javaé¢å‘å¯¹è±¡.html.0658e90b.js"><link rel="prefetch" href="/blog/assets/åŸç åç å’Œè¡¥ç .html.f288f0b3.js"><link rel="prefetch" href="/blog/assets/æ•°ç»„å’Œå­—ç¬¦ä¸².html.e3ed4199.js"><link rel="prefetch" href="/blog/assets/Annotation.html.809e759f.js"><link rel="prefetch" href="/blog/assets/Enum.html.ffa931f3.js"><link rel="prefetch" href="/blog/assets/Reflection.html.107323fd.js"><link rel="prefetch" href="/blog/assets/Lambda.html.1e8625e4.js"><link rel="prefetch" href="/blog/assets/Stream.html.21582103.js"><link rel="prefetch" href="/blog/assets/zookeeper.html.0b15223f.js"><link rel="prefetch" href="/blog/assets/404.html.d265c0ab.js"><link rel="prefetch" href="/blog/assets/index.html.f010ccbb.js"><link rel="prefetch" href="/blog/assets/index.html.47d97898.js"><link rel="prefetch" href="/blog/assets/index.html.d8078fe6.js"><link rel="prefetch" href="/blog/assets/index.html.06d64c54.js"><link rel="prefetch" href="/blog/assets/index.html.449ee3fe.js"><link rel="prefetch" href="/blog/assets/index.html.95774fa7.js"><link rel="prefetch" href="/blog/assets/index.html.b60f676d.js"><link rel="prefetch" href="/blog/assets/index.html.4e9ffdb6.js"><link rel="prefetch" href="/blog/assets/index.html.4940105e.js"><link rel="prefetch" href="/blog/assets/index.html.9d4cc2b3.js"><link rel="prefetch" href="/blog/assets/index.html.3a13a79e.js"><link rel="prefetch" href="/blog/assets/index.html.6c3ace92.js"><link rel="prefetch" href="/blog/assets/index.html.d9770159.js"><link rel="prefetch" href="/blog/assets/index.html.3debc004.js"><link rel="prefetch" href="/blog/assets/index.html.3e66e96a.js"><link rel="prefetch" href="/blog/assets/index.html.5f486629.js"><link rel="prefetch" href="/blog/assets/index.html.fc075472.js"><link rel="prefetch" href="/blog/assets/index.html.0a5944fb.js"><link rel="prefetch" href="/blog/assets/index.html.a8693a94.js"><link rel="prefetch" href="/blog/assets/index.html.842691ae.js"><link rel="prefetch" href="/blog/assets/index.html.f9c5c850.js"><link rel="prefetch" href="/blog/assets/index.html.27d24607.js"><link rel="prefetch" href="/blog/assets/404.888a5bdf.js"><link rel="prefetch" href="/blog/assets/Layout.a7b36dd7.js"><link rel="prefetch" href="/blog/assets/Slide.91b488dd.js"><link rel="prefetch" href="/blog/assets/Blog.3d3f12c9.js"><link rel="prefetch" href="/blog/assets/auto.264f6c8c.js"><link rel="prefetch" href="/blog/assets/index.d8a59108.js"><link rel="prefetch" href="/blog/assets/index.1842ee54.js"><link rel="prefetch" href="/blog/assets/mermaid.esm.min.fac286bf.js"><link rel="prefetch" href="/blog/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/blog/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/blog/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/blog/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/blog/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/blog/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/blog/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/blog/assets/Playground.4d81b47b.js"><link rel="prefetch" href="/blog/assets/photoswipe.esm.218074cd.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/blog/" class="brand"><img class="logo" src="/blog/logo.svg" alt="Blog"><!----><span class="site-name hide-in-pad">Blog</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Java"><span class="title"><span class="icon iconfont icon-edit"></span>Java</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaSE</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/javase/JavaBase/Java%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="JavaåŸºç¡€/é¢å‘å¯¹è±¡"><!---->JavaåŸºç¡€/é¢å‘å¯¹è±¡<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javase/Collection/collection.html" class="nav-link" aria-label="Javaé›†åˆ/æ³›å‹"><!---->Javaé›†åˆ/æ³›å‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javase/Senior/Enum.html" class="nav-link" aria-label="æšä¸¾/åå°„/æ³¨è§£"><!---->æšä¸¾/åå°„/æ³¨è§£<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javase/Lambda/Lambda.html" class="nav-link" aria-label="Lambdaè¡¨è¾¾å¼å’ŒStreamæµ"><!---->Lambdaè¡¨è¾¾å¼å’ŒStreamæµ<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JVMè™šæ‹Ÿæœº</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/jvm/Jvm%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" class="nav-link" aria-label="JVMå†…å­˜ç®¡ç†/åƒåœ¾å›æ”¶"><!---->JVMå†…å­˜ç®¡ç†/åƒåœ¾å›æ”¶<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/jvm/Jvm%E7%B1%BB%E5%8A%A0%E8%BD%BD.html" class="nav-link" aria-label="JVMæŒ‡ä»¤/ç±»åŠ è½½"><!---->JVMæŒ‡ä»¤/ç±»åŠ è½½<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JUCå¹¶å‘ç¼–ç¨‹</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/juc/Thread.md" class="nav-link" aria-label="Javaå¤šçº¿ç¨‹"><!---->Javaå¤šçº¿ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/juc/juc.md" class="nav-link" aria-label="JUCå¹¶å‘ç¼–ç¨‹"><!---->JUCå¹¶å‘ç¼–ç¨‹<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>IOå’Œç½‘ç»œç¼–ç¨‹</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/io/io.md" class="nav-link" aria-label="JavaIOæµ/ç½‘ç»œç¼–ç¨‹"><!---->JavaIOæµ/ç½‘ç»œç¼–ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/io/nio.md" class="nav-link" aria-label="Java BIOå’ŒNIO"><!---->Java BIOå’ŒNIO<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/io/Netty.md" class="nav-link" aria-label="Nettyæ ¸å¿ƒåŸç†"><!---->Nettyæ ¸å¿ƒåŸç†<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>JavaEE</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/javaee/Servlet.md" class="nav-link" aria-label="Servlet/JSP/MVC"><!---->Servlet/JSP/MVC<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/javaee/tomcat.md" class="nav-link" aria-label="Tomcatæºç å‰–æ"><!---->Tomcatæºç å‰–æ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Spring"><span class="title"><!---->Spring</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SpringåŸºç¡€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Spring/spring/Spring.md" class="nav-link" aria-label="Spring"><!---->Spring<!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/spring/SpringMVC.md" class="nav-link" aria-label="SpringMVC"><!---->SpringMVC<!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/spring/SpringBoot.md" class="nav-link" aria-label="SpringBoot"><!---->SpringBoot<!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/spring/Security.md" class="nav-link" aria-label="Spring Security And Shiro"><!---->Spring Security And Shiro<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Springæºç å‰–æ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Spring/resources/Spring.md" class="nav-link" aria-label="Springæºç "><!---->Springæºç <!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/resources/SpringMVC.md" class="nav-link" aria-label="SpringMVCæºç "><!---->SpringMVCæºç <!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/resources/SpringBoot.md" class="nav-link" aria-label="SpringBootæºç "><!---->SpringBootæºç <!----></a></li><li class="dropdown-subitem"><a href="/blog/Spring/resources/design.md" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼è¯¦è§£"><!---->è®¾è®¡æ¨¡å¼è¯¦è§£<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Database"><span class="title"><!---->Database</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å…³ç³»å‹æ•°æ®åº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Database/mysql/sql.html" class="nav-link" aria-label="SQLè¯­æ³•åŠä½¿ç”¨"><!---->SQLè¯­æ³•åŠä½¿ç”¨<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/mysql.html" class="nav-link" aria-label="MySQLåŸºç¡€"><!---->MySQLåŸºç¡€<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/mysql-index.html" class="nav-link" aria-label="MySQLç´¢å¼•"><!---->MySQLç´¢å¼•<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mysql/innodb.html" class="nav-link" aria-label="InnoDBå­˜å‚¨å¼•æ“"><!---->InnoDBå­˜å‚¨å¼•æ“<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/blog/Database/mysql/jdbc.html" class="router-link-active router-link-exact-active nav-link active" aria-label="JDBCå’Œè¿æ¥æ± "><!---->JDBCå’Œè¿æ¥æ± <!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/other/db2.html" class="nav-link" aria-label="DB2 Express-C"><!---->DB2 Express-C<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ORMæ¡†æ¶åŠåº”ç”¨</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis.html" class="nav-link" aria-label="mybatisæ¡†æ¶"><!---->mybatisæ¡†æ¶<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis-plus.html" class="nav-link" aria-label="mybatis-plus"><!---->mybatis-plus<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis-generator.html" class="nav-link" aria-label="mybatis-generaotor"><!---->mybatis-generaotor<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/mybatis/mybatis%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90.html" class="nav-link" aria-label="mybatisæºç å‰–æ"><!---->mybatisæºç å‰–æ<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>éå…³ç³»å‹æ•°æ®åº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Database/redis/Redis.html" class="nav-link" aria-label="Redis"><!---->Redis<!----></a></li><li class="dropdown-subitem"><a href="/blog/Database/redis/Redis%E6%BA%90%E7%A0%81.html" class="nav-link" aria-label="Redisæºç "><!---->Redisæºç <!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="MicroService"><span class="title"><!---->MicroService</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>åˆ†å¸ƒå¼ç³»ç»Ÿ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/dubbo.md" class="nav-link" aria-label="åˆ†å¸ƒå¼ç†è®º/æ¶æ„æ¼”è¿›"><!---->åˆ†å¸ƒå¼ç†è®º/æ¶æ„æ¼”è¿›<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Nginx.md" class="nav-link" aria-label="Nginx/LVS/Keepalived"><!---->Nginx/LVS/Keepalived<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Dubbo+Zookeeper</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/MicroService/dubbo+zookeeper/dubbo/dubbo.md" class="nav-link" aria-label="Dubbo"><!---->Dubbo<!----></a></li><li class="dropdown-subitem"><a href="/blog/MicroService/dubbo+zookeeper/zookeeper/zookeeper.html" class="nav-link" aria-label="Zookeeper"><!---->Zookeeper<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>SpringCloud Alibaba</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/nacos.md" class="nav-link" aria-label="Nacos"><!---->Nacos<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/feign.md" class="nav-link" aria-label="openFeign"><!---->openFeign<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Elastic Stack</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/es.md" class="nav-link" aria-label="ElasticSearch"><!---->ElasticSearch<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/elk.md" class="nav-link" aria-label="ELK"><!---->ELK<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ¶ˆæ¯ä¸­é—´ä»¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/RabbitMQ.md" class="nav-link" aria-label="RabbitMQ"><!---->RabbitMQ<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Kafaka.md" class="nav-link" aria-label="Kafaka"><!---->Kafaka<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/RocketMQ.md" class="nav-link" aria-label="RocketMQ"><!---->RocketMQ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tool"><span class="title"><!---->Tool</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>é¡¹ç›®ç®¡ç†</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/PM/git.html" class="nav-link" aria-label="Git-ç‰ˆæœ¬æ§åˆ¶"><!---->Git-ç‰ˆæœ¬æ§åˆ¶<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/PM/maven.html" class="nav-link" aria-label="Mavenä¾èµ–ç®¡ç†"><!---->Mavenä¾èµ–ç®¡ç†<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/PM/Gradle.html" class="nav-link" aria-label="Gradleé¡¹ç›®æ„å»º"><!---->Gradleé¡¹ç›®æ„å»º<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Linux</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/Linux/Linux.html" class="nav-link" aria-label="Linuxå¸¸ç”¨å‘½ä»¤"><!---->Linuxå¸¸ç”¨å‘½ä»¤<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/Linux/shell.html" class="nav-link" aria-label="Shellç¼–ç¨‹"><!---->Shellç¼–ç¨‹<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/Linux/vim.html" class="nav-link" aria-label="Vimä½¿ç”¨æŠ€å·§"><!---->Vimä½¿ç”¨æŠ€å·§<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>äº‘åŸç”Ÿ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/CloudNative/Docker.html" class="nav-link" aria-label="Docker"><!---->Docker<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/CloudNative/kubernetes.html" class="nav-link" aria-label="Kubernetes"><!---->Kubernetes<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å¸¸ç”¨è½¯ä»¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Tool/tools/idea.html" class="nav-link" aria-label="IDEA/Eclipse"><!---->IDEA/Eclipse<!----></a></li><li class="dropdown-subitem"><a href="/blog/Tool/tools/windows.html" class="nav-link" aria-label="Windowså‘½ä»¤"><!---->Windowså‘½ä»¤<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Theory"><span class="title"><!---->Theory</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è®¡ç®—æœºç»„æˆåŸç†</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>è®¡ç®—æœºç½‘ç»œ</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ“ä½œç³»ç»Ÿ</span></h4><ul class="dropdown-subitem-wrapper"></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ•°æ®ç»“æ„ä¸ç®—æ³•</span></h4><ul class="dropdown-subitem-wrapper"></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Web"><span class="title"><!---->Web</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å‰ç«¯åŸºç¡€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/html.md" class="nav-link" aria-label="HTML/CSS"><!---->HTML/CSS<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/js.md" class="nav-link" aria-label="JavaScript"><!---->JavaScript<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/es6.md" class="nav-link" aria-label="ECMAScript6+"><!---->ECMAScript6+<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/ts.md" class="nav-link" aria-label="TypeScript"><!---->TypeScript<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Ajax.md" class="nav-link" aria-label="AjaxæŠ€æœ¯"><!---->AjaxæŠ€æœ¯<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/Json.md" class="nav-link" aria-label="XMLå’ŒJson"><!---->XMLå’ŒJson<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å¸¸ç”¨æ¡†æ¶å’Œåº“</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/node.md" class="nav-link" aria-label="nodeå’Œnpm"><!---->nodeå’Œnpm<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/vue.md" class="nav-link" aria-label="Vue"><!---->Vue<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/react.md" class="nav-link" aria-label="React"><!---->React<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å°ç¨‹åºå’Œè·¨ç«¯æ¡†æ¶</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/Java/weixin.md" class="nav-link" aria-label="å¾®ä¿¡å°ç¨‹åº"><!---->å¾®ä¿¡å°ç¨‹åº<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/uniapp.md" class="nav-link" aria-label="Uniapp"><!---->Uniapp<!----></a></li><li class="dropdown-subitem"><a href="/blog/Java/flutter.md" class="nav-link" aria-label="flutter"><!---->flutter<!----></a></li></ul></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/develop-note" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-structure"></span><span class="title">æ•°æ®åº“/MySQL/Redis</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-note"></span><span class="title">å…³ç³»å‹æ•°æ®åº“MySQL</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/blog/Database/mysql/sql.html" class="nav-link sidebar-link sidebar-page" aria-label="SQLåŸºç¡€è¯­æ³•åŠä½¿ç”¨"><!---->SQLåŸºç¡€è¯­æ³•åŠä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mysql/mysql.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQLçš„å®‰è£…å’Œä½¿ç”¨"><!---->MySQLçš„å®‰è£…å’Œä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mysql/mysql-index.html" class="nav-link sidebar-link sidebar-page" aria-label="MySQLç´¢å¼•åŠæŸ¥è¯¢ä¼˜åŒ–"><!---->MySQLç´¢å¼•åŠæŸ¥è¯¢ä¼˜åŒ–<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mysql/sql%E4%BC%98%E5%8C%96.html" class="nav-link sidebar-link sidebar-page" aria-label="SQLè°ƒä¼˜-æ…¢æŸ¥è¯¢ä¼˜åŒ–"><!---->SQLè°ƒä¼˜-æ…¢æŸ¥è¯¢ä¼˜åŒ–<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/blog/Database/mysql/innodb.html" class="nav-link sidebar-link sidebar-page" aria-label="InnoDBå­˜å‚¨å¼•æ“"><!---->InnoDBå­˜å‚¨å¼•æ“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/blog/Database/mysql/jdbc.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="JDBCå’Œæ•°æ®åº“è¿æ¥æ± "><!---->JDBCå’Œæ•°æ®åº“è¿æ¥æ± <!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#ä¸€-jdbcæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ JDBCæ˜¯ä»€ä¹ˆ"><!---->ä¸€ JDBCæ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-è®¿é—®è¿‡ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. è®¿é—®è¿‡ç¨‹"><!---->1. è®¿é—®è¿‡ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-jdbcæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. JDBCæ˜¯ä»€ä¹ˆ"><!---->2. JDBCæ˜¯ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-jdbcä½“ç³»ç»“æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. JDBCä½“ç³»ç»“æ„"><!---->3. JDBCä½“ç³»ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#äºŒ-jdbcçš„ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒ JDBCçš„ä½¿ç”¨"><!---->äºŒ JDBCçš„ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-jdbcä½¿ç”¨æ­¥éª¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. JDBCä½¿ç”¨æ­¥éª¤"><!---->1. JDBCä½¿ç”¨æ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-jdbcå·¥å…·ç±»-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. JDBCå·¥å…·ç±»(1)"><!---->2. JDBCå·¥å…·ç±»(1)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-jdbcå·¥å…·ç±»-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. JDBCå·¥å…·ç±»(2)"><!---->3. JDBCå·¥å…·ç±»(2)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_4-sqlæ³¨å…¥é—®é¢˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. SQLæ³¨å…¥é—®é¢˜"><!---->4. SQLæ³¨å…¥é—®é¢˜<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#ä¸‰-äº‹åŠ¡ä¸æ‰¹å¤„ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ äº‹åŠ¡ä¸æ‰¹å¤„ç†"><!---->ä¸‰ äº‹åŠ¡ä¸æ‰¹å¤„ç†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-jdbcäº‹åŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. JDBCäº‹åŠ¡"><!---->1. JDBCäº‹åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-jdbcæ‰¹å¤„ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. JDBCæ‰¹å¤„ç†"><!---->2. JDBCæ‰¹å¤„ç†<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#å››-æ•°æ®åº“è¿æ¥æ± " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å›› æ•°æ®åº“è¿æ¥æ± "><!---->å›› æ•°æ®åº“è¿æ¥æ± <!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-è‡ªå®šä¹‰è¿æ¥æ± " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. è‡ªå®šä¹‰è¿æ¥æ± "><!---->1. è‡ªå®šä¹‰è¿æ¥æ± <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-dbcpè¿æ¥æ± " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. DBCPè¿æ¥æ± "><!---->2. DBCPè¿æ¥æ± <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-c3p0è¿æ¥æ± " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. C3P0è¿æ¥æ± "><!---->3. C3P0è¿æ¥æ± <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_4-druidè¿æ¥æ± " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. Druidè¿æ¥æ± "><!---->4. Druidè¿æ¥æ± <!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#äº”-dbutilsåº“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº” DbUtilsåº“"><!---->äº” DbUtilsåº“<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-queryrunner" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. QueryRunner"><!---->1. QueryRunner<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-resultsethandler" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. ResultSetHandler"><!---->2. ResultSetHandler<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-dbutilsç±»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. DBUtilsç±»"><!---->3. DBUtilsç±»<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">Oracle/DB2 Express-C</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">ORMæ¡†æ¶ä¹‹Mybatis</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><span class="title">éå…³ç³»å‹æ•°æ®åº“Redis</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->JDBCå’Œæ•°æ®åº“è¿æ¥æ± </h1><div class="page-info"><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.github.com/itdrizzle" target="_blank" rel="noopener noreferrer">csdrizzle</a></span><span property="author" content="csdrizzle"></span></span><!----><!----><!----><!----><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 21 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT21M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#ä¸€-jdbcæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level2">ä¸€ JDBCæ˜¯ä»€ä¹ˆ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-è®¿é—®è¿‡ç¨‹" class="router-link-active router-link-exact-active toc-link level3">1. è®¿é—®è¿‡ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-jdbcæ˜¯ä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">2. JDBCæ˜¯ä»€ä¹ˆ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-jdbcä½“ç³»ç»“æ„" class="router-link-active router-link-exact-active toc-link level3">3. JDBCä½“ç³»ç»“æ„</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#äºŒ-jdbcçš„ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">äºŒ JDBCçš„ä½¿ç”¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-jdbcä½¿ç”¨æ­¥éª¤" class="router-link-active router-link-exact-active toc-link level3">1. JDBCä½¿ç”¨æ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-jdbcå·¥å…·ç±»-1" class="router-link-active router-link-exact-active toc-link level3">2. JDBCå·¥å…·ç±»(1)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-jdbcå·¥å…·ç±»-2" class="router-link-active router-link-exact-active toc-link level3">3. JDBCå·¥å…·ç±»(2)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_4-sqlæ³¨å…¥é—®é¢˜" class="router-link-active router-link-exact-active toc-link level3">4. SQLæ³¨å…¥é—®é¢˜</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#ä¸‰-äº‹åŠ¡ä¸æ‰¹å¤„ç†" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ äº‹åŠ¡ä¸æ‰¹å¤„ç†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-jdbcäº‹åŠ¡" class="router-link-active router-link-exact-active toc-link level3">1. JDBCäº‹åŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-jdbcæ‰¹å¤„ç†" class="router-link-active router-link-exact-active toc-link level3">2. JDBCæ‰¹å¤„ç†</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#å››-æ•°æ®åº“è¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level2">å›› æ•°æ®åº“è¿æ¥æ± </a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-è‡ªå®šä¹‰è¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level3">1. è‡ªå®šä¹‰è¿æ¥æ± </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-dbcpè¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level3">2. DBCPè¿æ¥æ± </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-c3p0è¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level3">3. C3P0è¿æ¥æ± </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_4-druidè¿æ¥æ± " class="router-link-active router-link-exact-active toc-link level3">4. Druidè¿æ¥æ± </a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#äº”-dbutilsåº“" class="router-link-active router-link-exact-active toc-link level2">äº” DbUtilsåº“</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_1-queryrunner" class="router-link-active router-link-exact-active toc-link level3">1. QueryRunner</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_2-resultsethandler" class="router-link-active router-link-exact-active toc-link level3">2. ResultSetHandler</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/blog/Database/mysql/jdbc.html#_3-dbutilsç±»" class="router-link-active router-link-exact-active toc-link level3">3. DBUtilsç±»</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="jdbcå’Œæ•°æ®åº“è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#jdbcå’Œæ•°æ®åº“è¿æ¥æ± " aria-hidden="true">#</a> JDBCå’Œæ•°æ®åº“è¿æ¥æ± </h1><h2 id="ä¸€-jdbcæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸€-jdbcæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> ä¸€ JDBCæ˜¯ä»€ä¹ˆ</h2><h3 id="_1-è®¿é—®è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-è®¿é—®è¿‡ç¨‹" aria-hidden="true">#</a> 1. è®¿é—®è¿‡ç¨‹</h3><p>æ•°æ®åº“çš„è®¿é—®è¿‡ç¨‹</p><p><img src="/blog/assets/image-20220321231919521.889d3382.png" alt="image-20220321231919521" loading="lazy"></p><br><h3 id="_2-jdbcæ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_2-jdbcæ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 2. JDBCæ˜¯ä»€ä¹ˆ</h3><p>JDBCæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ JDBCï¼šJava Database Connectionã€‚Javaæ•°æ®åº“è¿æ¥ã€‚</p><p>æœ¬è´¨ä¸Šï¼ŒJDBCæ˜¯ä¸€å¥—Javaå»æ“ä½œæ•°æ®åº“çš„è¿™ä¹ˆä¸€å¥—æ¥å£ã€‚</p><p><img src="/blog/assets/image-20220321232222677.6f3fbac1.png" alt="image-20220321232222677" loading="lazy"></p><br><h3 id="_3-jdbcä½“ç³»ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_3-jdbcä½“ç³»ç»“æ„" aria-hidden="true">#</a> 3. JDBCä½“ç³»ç»“æ„</h3><p>JDBCï¼ˆJava DataBase Connectivity, javaæ•°æ®åº“è¿æ¥ï¼‰æ˜¯ä¸€ç§ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java API</p><ul><li><p>DriverManagerï¼š ç®¡ç†æ•°æ®åº“é©±åŠ¨ç¨‹åºåˆ—è¡¨ã€ä½¿ç”¨é€šä¿¡å­åè®®å°†æ¥è‡ªjavaåº”ç”¨ç¨‹åºçš„è¿æ¥è¯·æ±‚ä¸é€‚å½“çš„æ•°æ®åº“é©±åŠ¨ç¨‹åºåŒ¹é…</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ³¨å†Œé©±åŠ¨</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

<span class="token comment">// è·å–è¿æ¥</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br></li><li><p>Driver: å¤„ç†ä¸æ•°æ®åº“æœåŠ¡å™¨çš„é€šä¿¡ï¼ˆä½¿ç”¨ DriverManagerå¯¹è±¡æ¥ç®¡ç†è¿™ç§ç±»å‹çš„å¯¹è±¡ï¼‰</p><br></li><li><p>Connectionï¼šå…·æœ‰ç”¨äºè”ç³»æ•°æ®åº“çš„æ‰€æœ‰æ–¹æ³•ã€‚è¿æ¥å¯¹è±¡è¡¨ç¤ºé€šä¿¡ä¸Šä¸‹æ–‡ï¼Œä¸æ•°æ®åº“çš„æ‰€æœ‰é€šä¿¡ä»…é€šè¿‡è¿æ¥å¯¹è±¡</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                          <span class="token comment">// è·å–statement</span>

connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                                          <span class="token comment">// å…³é—­è¿æ¥</span>

<span class="token class-name">PrepareStatemnt</span> prePareStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// è·å–PrepareStatement</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br></li><li><p>Statementï¼šä½¿ç”¨ ä»æ­¤æ¥å£åˆ›å»ºçš„å¯¹è±¡å°†SQLè¯­å¥æäº¤åˆ°æ•°æ®åº“ã€‚é™¤äº†æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ä¹‹å¤–ï¼Œä¸€äº›æ´¾ç”Ÿæ¥å£è¿˜æ¥å—å‚æ•°</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ‰§è¡Œå¢åˆ æ”¹SQL, è¿”å›çš„æ˜¯å½±å“çš„è¡Œæ•°</span>
<span class="token keyword">int</span> affectedRows <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token class-name">String</span> updateSQL<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ‰§è¡ŒæŸ¥è¯¢SQLï¼Œè¿”å›ç»“æœé›†å¯¹è±¡</span>
<span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token class-name">String</span> querySQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br></li><li><p>ResultSetï¼šåœ¨ä½¿ç”¨Statementå¯¹è±¡æ‰§è¡ŒSQLæŸ¥è¯¢åï¼Œè¿™äº›å¯¹è±¡ä¿å­˜ä»æ•°æ®åº“æ£€ç´¢çš„æ•°æ®ã€‚</p><p>å®ƒä½œä¸ºä¸€ ä¸ªè¿­ä»£å™¨ï¼Œå…è®¸æˆ‘ä»¬ç§»åŠ¨å…¶æ•°æ® ï¼ˆresultSetæ˜¯ä»£è¡¨æŸ¥è¯¢è¯­å¥æŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸€ä¸ªæ¸¸æ ‡ï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œ å½“ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œçš„æ—¶å€™ï¼Œè¿”å›trueï¼Œå½“æ²¡æœ‰ä¸‹ä¸€è¡Œçš„æ—¶å€™ï¼Œè¿”å›false</span>
<span class="token class-name">Boolean</span> ret <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç§»åŠ¨æ¸¸æ ‡åˆ°ä¸Šä¸€è¡Œ å½“ç§»åŠ¨åˆ°ä¸Šä¸€è¡Œçš„æ—¶å€™ï¼Œè¿”å›trueï¼Œå½“æ²¡æœ‰ä¸Šä¸€è¡Œçš„æ—¶å€™ï¼Œè¿”å›false</span>
<span class="token class-name">Boolean</span> ret <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

resultSet<span class="token punctuation">.</span><span class="token function">beforeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ç§»åŠ¨æ¸¸æ ‡åˆ°ç¬¬ä¸€è¡Œä¹‹å‰</span>
resultSet<span class="token punctuation">.</span><span class="token function">afterLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">// ç§»åŠ¨æ¸¸æ ‡åˆ°æœ€åä¸€è¡Œä¹‹å</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>â€‹ <img src="/blog/assets/image-20220322211859477.f644f793.png" alt="image-20220322211859477" style="zoom:70%;"></p><p>â€‹ <br></p><ul><li>SQLExceptionï¼šæ­¤ç±»å¤„ç†æ•°æ®åº“åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿçš„ä»»ä½•é”™è¯¯</li></ul><br><h2 id="äºŒ-jdbcçš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#äºŒ-jdbcçš„ä½¿ç”¨" aria-hidden="true">#</a> äºŒ JDBCçš„ä½¿ç”¨</h2><h3 id="_1-jdbcä½¿ç”¨æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_1-jdbcä½¿ç”¨æ­¥éª¤" aria-hidden="true">#</a> 1. JDBCä½¿ç”¨æ­¥éª¤</h3><p>ä½¿ç”¨ä¹‹å‰éœ€è¦å¯¼å…¥jdbcçš„é©±åŠ¨åŒ…ï¼Œ ç‰ˆæœ¬è¯´æ˜ï¼š<a href="https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-versions.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-versions.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æ™®é€šjavaé¡¹ç›®å‚ç…§ï¼š<a href="/blog/Database/mysql/JavaSE/detail/jar%E5%8C%85%E5%AF%BC%E5%85%A5.html" class="">IDEAå¯¼å…¥jaråŒ…è¯´æ˜</a> ï¼Œ</p><p>mavené¡¹ç›®å¯¼å…¥ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.26<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>JDBCä½¿ç”¨æ­¥éª¤ï¼š</p><p><strong>1. å¯¼å…¥åŒ…</strong>ï¼šéœ€è¦å¯¼å…¥åŒ…å«æ•°æ®åº“ç¼–ç¨‹æ‰€éœ€çš„JDBCç±»çš„åŒ…ã€å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>import java.sql.*</code> å°±è¶³å¤Ÿ äº†</p><br><p><strong>2. æ³¨å†ŒJDBCé©±åŠ¨ç¨‹åº</strong>ï¼šåˆå§‹åŒ–é©±åŠ¨ç¨‹åºï¼Œä»¥ä¾¿æ‰“å¼€ä¸æ•°æ®åº“çš„é€šä¿¡é€šé“</p><ul><li>æ³¨å†Œé©±åŠ¨ç¨‹åºæœ€å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨Javaçš„<code>Class.forName()</code>æ–¹æ³•</li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨é™æ€<code>DriverManager.registerDriver() </code>æ–¹æ³•</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸¸ç”¨æ•°æ®åº“é©±åŠ¨ç¨‹åºåç§°ï¼š</p><table><thead><tr><th>æ•°æ®åº“</th><th>JDBCé©±åŠ¨ç¨‹åºåç§°</th><th>URLæ ¼å¼</th></tr></thead><tbody><tr><td>MYSQL8</td><td>com.mysql.cj.jdbc.Driver</td><td>jdbc:mysql://hostname:3306/databaseName?serverTimezone=UTC</td></tr><tr><td>MySQL</td><td>com.mysql.jdbc.Driver</td><td>jdbc:mysql://hostname:3306/databaseName</td></tr><tr><td>ORACLE</td><td>oracle.jdbc.driver.OracleDriver</td><td>jdbc:oracle:thin:@hostname:port Numberï¼šdatabaseName</td></tr><tr><td>DB2</td><td>com.ibm.db2.jdbc.net.DB2Driver</td><td>jdbc:db2:hostname:port Number / databaseName</td></tr><tr><td>SYBASE</td><td>com.sybase.jdbc.SybDriver</td><td>jdbc:sybase:Tds:hostname:port Number / databaseName</td></tr></tbody></table><br><p><strong>3. æ‰“å¼€è¿æ¥</strong>ï¼šä½¿ç”¨<code>DriverManager.getConnection()</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªConnectionå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è¡¨ç¤ºä¸æ•°æ®åº“çš„ç‰©ç†è¿æ¥</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä¸‰ä¸ªé‡è½½çš„DriverManager.getConnection()æ–¹æ³•</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token class-name">String</span> urlï¼Œ<span class="token class-name">Properties</span> prop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token class-name">String</span> urlï¼Œ<span class="token class-name">String</span> userï¼Œ<span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¸¸ç”¨</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è·å–è¿æ¥ï¼Œconnectionå¯¹è±¡æ˜¯ç”¨æ¥å£æ¥æ”¶çš„ï¼Œä½†æ˜¯å…¶å®å®ä¾‹å¯¹è±¡æ˜¯com.mysql.jdbc.JDBC4Connection</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>4. æ‰§è¡ŒæŸ¥è¯¢</strong>ï¼šä½¿ç”¨ç±»å‹ä¸ºStatementçš„å¯¹è±¡æ¥æ„å»ºå’Œæäº¤SQLè¯­å¥åˆ°æ•°æ®åº“</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨Statementå¯¹è±¡æ¥æ„å»ºå’Œæäº¤SQLè¯­å¥</span>
statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;select name from product&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»ºStatementå¯¹è±¡åï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥æ‰§è¡Œä¸€ä¸ªSQLè¯­å¥ï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªæ‰§è¡Œæ–¹æ³•ä¹‹ä¸€ï¼š</p><ul><li><code>boolean execute(String SQL)</code>ï¼šå¦‚æœå¯ä»¥æ£€ç´¢åˆ°ResultSetå¯¹è±¡ï¼Œåˆ™è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼true; å¦åˆ™è¿” å›false</li><li><code>int executeUpdate(String SQL)</code>ï¼šINSERTï¼ŒUPDATEæˆ–DELETEè¯­å¥</li><li><code>ResultSet executeQuery(String SQL)</code>ï¼šSELECTè¯­å¥ã€è¿”å›ä¸€ä¸ªResultSetå¯¹è±¡</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨PreparedStatementå¯¹è±¡æ¥æ„å»ºå’Œæäº¤SQLè¯­å¥</span>
<span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from product where name=? and price=?&quot;</span><span class="token punctuation">;</span>
preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Lemon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ResultSet</span> priceSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>priceSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Lemon price: &quot;</span><span class="token operator">+</span>priceSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;price&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><strong>5. ä»ç»“æœé›†ä¸­æå–æ•°æ®</strong>ï¼šä½¿ç”¨ç›¸åº”çš„ <code>ResultSet.getXXX()</code>æ–¹æ³•ä»ç»“æœé›†ä¸­æ£€ç´¢æ•°æ®</p><br><p><strong>6. é‡Šæ”¾èµ„æº</strong>ï¼šéœ€è¦æ˜ç¡®åœ°å…³é—­æ‰€æœ‰æ•°æ®åº“èµ„æºï¼Œè€Œä¸ä¾èµ–äºjc</p><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä»£ç ç¤ºä¾‹ï¼š</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> driver <span class="token operator">=</span> <span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://192.168.16.122:3306/mydb?serverTimezone=UTC &quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>

        <span class="token class-name">Connection</span> connection <span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ³¨å†Œé©±åŠ¨ç¨‹åº</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ‰“å¼€è¿æ¥</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// ä½¿ç”¨Statementæ¥æ„å»ºå’Œæäº¤SQLè¯­å¥</span>
            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token string">&quot;select name from product&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// ä½¿ç”¨PreparedStatementæ¥æ„å»ºå’Œæäº¤SQLè¯­å¥</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from product where name=? and price=?&quot;</span><span class="token punctuation">;</span>
            preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Lemon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            preparedStatement<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">ResultSet</span> priceSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>priceSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Lemon price: &quot;</span><span class="token operator">+</span>priceSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;price&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>preparedStatement<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
                <span class="token keyword">if</span><span class="token punctuation">(</span>statement<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>connection<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-jdbcå·¥å…·ç±»-1" tabindex="-1"><a class="header-anchor" href="#_2-jdbcå·¥å…·ç±»-1" aria-hidden="true">#</a> 2. JDBCå·¥å…·ç±»(1)</h3><p>ä¸»è¦ç”¨äºé¿å…é‡å¤ç¹ççš„è·å–è¿æ¥ã€é‡Šæ”¾èµ„æºé—®é¢˜ ï¼ˆåˆ›å»ºå¯¹è±¡æ–¹å¼ï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> driver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">PreparedStatement</span> preparedStatement<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ResultSet</span> resultSet<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>

    <span class="token comment">// 1. è¯»å–æ•°æ®åº“é…ç½®ä¿¡æ¯ã€æ³¨å†Œé©±åŠ¨</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// InputStream stream = JDBCUtils.class.getClassLoader().getResourceAsStream(&quot;db.properties&quot;);</span>
            <span class="token comment">// db.propertiesä½äºé¡¹ç›®æ ¹ç›®å½•ã€  åå°„åœ¨è¿™é‡Œè¯»ä¸åˆ°æ–‡ä»¶</span>
            <span class="token comment">// å…³äºjavaé¡¹ç›®è¯»æ–‡ä»¶çš„é—®é¢˜å‚ç…§åšå®¢ï¼šhttps://blog.csdn.net/drizzletowne/article/details/120887844</span>
            <span class="token class-name">FileInputStream</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;db.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
            driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            username <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2. è·å¾—æ•°æ®åº“è¿æ¥</span>
    <span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3. PreparedStatement</span>
    <span class="token keyword">public</span> <span class="token class-name">PreparedStatement</span> <span class="token function">getPreparedStatement</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            preparedStatement <span class="token operator">=</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> preparedStatement<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 4. ç»‘å®šå‚æ•°</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setParam</span><span class="token punctuation">(</span><span class="token class-name">List</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>list<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 5. å¢åˆ æ”¹</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">List</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">getPreparedStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setParam</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            count <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 6. æŸ¥è¯¢</span>
    <span class="token keyword">public</span> <span class="token class-name">ResultSet</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token class-name">List</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">getPreparedStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setParam</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> resultSet<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 7. å…³é—­èµ„æº</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>preparedStatement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è‡ªå®šä¹‰ JDBC å·¥å…·ç±»çš„ä½¿ç”¨æ¡ˆä¾‹ï¼š</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">JDBCUtils</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from product where name=? and price=?&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Apple&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        params<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        db<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸è¾ƒäºå‰é¢çš„ä¾‹å­ï¼Œè¿™æ ·çš„ä½¿ç”¨æ–¹å¼å·²ç»ç®€æ´äº†å¾ˆå¤š~</p><br><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># db.properties é…ç½®æ–‡ä»¶</span>
<span class="token key attr-name">driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/academy?useSSL=false&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true</span>
<span class="token key attr-name">user</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-jdbcå·¥å…·ç±»-2" tabindex="-1"><a class="header-anchor" href="#_3-jdbcå·¥å…·ç±»-2" aria-hidden="true">#</a> 3. JDBCå·¥å…·ç±»(2)</h3><p>é™æ€æ–¹æ³•çš„æ–¹å¼ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> driver<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> user<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;db.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fileInputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

            driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è·å–è¿æ¥
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// DriverManager.registerDriver(new Driver());</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> <span class="token operator">|</span> <span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * é‡Šæ”¾èµ„æº
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token class-name">Statement</span> stat<span class="token punctuation">,</span> <span class="token class-name">Connection</span> conn<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>stat <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> stat<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">selectByKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        connection <span class="token operator">=</span> <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;select * from day04 where id=?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">999999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> pps<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;selectByKeyï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_4-sqlæ³¨å…¥é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_4-sqlæ³¨å…¥é—®é¢˜" aria-hidden="true">#</a> 4. SQLæ³¨å…¥é—®é¢˜</h3><p>äº§ç”Ÿæ•°æ®åº“æ³¨å…¥é—®é¢˜çš„åŸå› ï¼šç”¨æˆ·è¾“å…¥äº†ä¸€äº›è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¸­å¯èƒ½åŒ…å«äº†SQLè¯­å¥çš„å…³é”®å­—ï¼Œå¯¼å…¥æ‹¼æ¥ä¹‹åçš„SQLè¯­å¥æ”¹å˜äº†åŸæ¥çš„æ ¼å¼ï¼ŒMySQLæœåŠ¡å™¨é”™è¯¯çš„å»è§£æäº†SQLè¯­å¥ï¼Œå¯¼è‡´ç”¨æˆ·å¯ä»¥ç™»å½•æˆåŠŸã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¸¸è§„çš„ç™»å½•</span>
        <span class="token comment">// boolean ret = login(&quot;zhangsan&quot;, &quot;123456&quot;);</span>

        <span class="token comment">// éå¸¸è§„ç™»å½•</span>
        <span class="token keyword">boolean</span> ret <span class="token operator">=</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;asdhajdh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aefwjfwegb&#39; or &#39;1=1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç™»å½•æˆåŠŸï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç™»å½•å¤±è´¥ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// ç™»å½•çš„æ–¹æ³•</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–è¿æ¥</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è·å–statementå¯¹è±¡</span>
    <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_user where username = &#39;&quot;</span> <span class="token operator">+</span> username <span class="token operator">+</span> <span class="token string">&quot;&#39; and password = &#39;&quot;</span> <span class="token operator">+</span> password <span class="token operator">+</span> <span class="token string">&quot;&#39;&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// æ‰§è¡ŒSQLè¯­å¥</span>
    <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆå¦‚ä½•å»è§£å†³æ•°æ®åº“çš„æ³¨å…¥é—®é¢˜å‘¢ï¼Ÿä½¿ç”¨PrepareStatementå°±å¯ä»¥è§£å†³.</p><p>PrepareStatementå¦‚ä½•è§£å†³é—®é¢˜çš„å‘¢ï¼Ÿ</p><p>å…¶å®å°±æ˜¯é€šè¿‡é¢„ç¼–è¯‘çš„æ–¹å¼ï¼ŒæŠŠSQLè¯­å¥æå‰å‘é€ç»™MySQLæœåŠ¡å™¨ï¼Œç„¶åå†æŠŠå‚æ•°å‘ç»™MySQLæœåŠ¡å™¨ã€‚</p><p>é‚£ä¹ˆåç»­å‘é€çš„å‚æ•°å°±åªä¼šè¢«MySQLæœåŠ¡å™¨è¯†åˆ«ä¸ºæ™®é€šçš„å­—ç¬¦ä¸²æˆ–è€…æ˜¯æ™®é€šçš„å‚æ•°ï¼Œä¸ä¼šè¢«å½“æˆå…³é”®å­—ç±»è§£æäº†ï¼Œå› ä¸ºå·²ç»è§£æè¿‡äº†ã€‚</p><p>è¿™æ ·å°±å¯ä»¥é¿å…æ•°æ®åº“çš„æ³¨å…¥é—®é¢˜ã€‚</p><br><h2 id="ä¸‰-äº‹åŠ¡ä¸æ‰¹å¤„ç†" tabindex="-1"><a class="header-anchor" href="#ä¸‰-äº‹åŠ¡ä¸æ‰¹å¤„ç†" aria-hidden="true">#</a> ä¸‰ äº‹åŠ¡ä¸æ‰¹å¤„ç†</h2><h3 id="_1-jdbcäº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-jdbcäº‹åŠ¡" aria-hidden="true">#</a> 1. JDBCäº‹åŠ¡</h3><p>JDBCé©±åŠ¨ç¨‹åºé»˜è®¤ä½¿ç”¨è‡ªåŠ¨æäº¤æ¨¡å¼ã€è¦å¯ç”¨æ‰‹åŠ¨äº‹åŠ¡æ”¯æŒã€éœ€è¦ä½¿ç”¨Connectionå¯¹è±¡çš„ <code>setAutoCommit()</code>æ–¹æ³•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span> å¼€å¯äº‹åŠ¡

  `connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

<span class="token operator">-</span> æäº¤äº‹åŠ¡

  `connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`

<span class="token operator">-</span> å›æ»šäº‹åŠ¡

  `connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//Assume a valid connection object conn</span>
    conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO Employees values (106, 20, &#39;Rita&#39;, &#39;Tez&#39;)&quot;</span><span class="token punctuation">;</span>
    stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Submit a malformed SQL statement that breaks</span>
    <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERTED IN Employees VALUES (107, 22, &#39;Sita&#39;, &#39;Singh&#39;)&quot;</span><span class="token punctuation">;</span>
    stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// If there is no error.</span>
    conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> se<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// If there is any error.</span>
    conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æ–°çš„JDBC 3.0 Savepointæ¥å£ä¸ºæ‚¨æä¾›äº†é¢å¤–çš„äº‹åŠ¡æ§åˆ¶ã€å¯ä»¥åœ¨äº‹åŠ¡ä¸­å®šä¹‰é€»è¾‘å›æ»šç‚¹ï¼š</p><p>å¦‚æœé€šè¿‡ä¿å­˜ç‚¹å‘ç”Ÿé”™è¯¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å›æ»šæ–¹æ³• æ¥æ’¤æ¶ˆæ›´æ”¹</p><p>Connectionå¯¹è±¡æœ‰ä¸¤ç§æ–°çš„æ–¹æ³•æ¥å¸®åŠ©æ‚¨ç®¡ç†ä¿å­˜ç‚¹</p><ul><li><code>setSavepoint(String savepointName)</code>ï¼šå®šä¹‰æ–°çš„ä¿å­˜ç‚¹ã€è¿”å›ä¸€ä¸ªSavepointå¯¹è±¡</li><li><code>releaseSavepoint(Savepoint savepointName)</code>ï¼šåˆ é™¤ä¿å­˜ç‚¹ã€å®ƒéœ€è¦ä¸€ä¸ªSavepoint å¯¹è±¡ä½œä¸ºå‚æ•°</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//Assume a valid connection object conn</span>
    conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Savepoint</span> savepoint1 <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">setSavepoint</span><span class="token punctuation">(</span><span class="token string">&quot;Savepoint1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO Employees VALUES (106, 20, &#39;Rita&#39;, &#39;Tez&#39;)&quot;</span><span class="token punctuation">;</span>
    stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> SQL <span class="token operator">=</span> <span class="token string">&quot;INSERTED IN Employees VALUES (107, 22, &#39;Sita&#39;, &#39;Tez&#39;)&quot;</span><span class="token punctuation">;</span>
    stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span>SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> se<span class="token punctuation">)</span><span class="token punctuation">{</span>
    conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span>savepoint1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¿…é¡»æ˜¯æ²¡æœ‰commitå‰ä½¿ç”¨çš„,å³æ‰§è¡Œåˆ°commitä¹‹å‰è¦å‘ç”Ÿå¼‚å¸¸ï¼Œè¿™ä¸ªè¯­å¥æ‰æœ‰æ„ä¹‰</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-jdbcæ‰¹å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-jdbcæ‰¹å¤„ç†" aria-hidden="true">#</a> 2. JDBCæ‰¹å¤„ç†</h3><p>æ‰¹é‡å¤„ç†ï¼šä¹Ÿå°±æ˜¯æ‰¹é‡çš„æ‰§è¡ŒSQLè¯­å¥ã€‚</p><p>å³å°†ç›¸å…³çš„SQLè¯­å¥åˆ†ç»„åˆ°æ‰¹å¤„ç†ä¸­ï¼Œå¹¶é€šè¿‡å¯¹æ•°æ®åº“çš„ä¸€æ¬¡è°ƒç”¨æäº¤å®ƒä»¬ã€‚</p><p>å½“éœ€è¦ä¸€æ¬¡å‘æ•°æ®åº“å‘é€å¤šä¸ªSQLè¯­å¥æ—¶ï¼Œå¯ä»¥å‡å°‘è¿æ¥æ•°æ®åº“çš„å¼€é”€ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p><br><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># éœ€è¦ç»™MySQLçš„urlæ·»åŠ é…ç½® rewriteBatchedStatements=true</span>

<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/academy?useSSL=false&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//  Statementæ‰¹å¤„ç†</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertByStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">Statement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        connection <span class="token operator">=</span> <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into user values (&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span><span class="token string">&quot;, &#39;zhangsan&quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot;&#39;)&quot;</span><span class="token punctuation">;</span>
            statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        statement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> statement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;insertByStatementï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 6075ms</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// PreparedStatementæ‰¹å¤„ç†</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">insertByPreparedStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> pps <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        connection <span class="token operator">=</span> <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pps <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">&quot;insert into user values (?,?)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            pps<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        pps<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> pps<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;insertByPreparedStatementï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ms&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 241ms</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><blockquote><p>æ€»ç»“ï¼šæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œä½¿ç”¨PrepareStatementè¿›è¡Œæ‰¹å¤„ç†æ•ˆç‡æœ€é«˜ï¼Œè¿œå¤§äºå…¶ä»–ä¸¤ç§æ–¹å¼çš„æ‰§è¡Œæ•ˆç‡ã€‚</p></blockquote><table><thead><tr><th>ï¼ˆå‡å¦‚å¾ªç¯næ¬¡ï¼‰</th><th>é€šä¿¡æ¬¡æ•°</th><th>ç¼–è¯‘æ¬¡æ•°</th><th>æ‰§è¡Œæ—¶é—´</th></tr></thead><tbody><tr><td>forå¾ªç¯</td><td>n</td><td>n</td><td>æœ€é•¿</td></tr><tr><td>statementæ‰¹å¤„ç†</td><td>1</td><td>n</td><td>æ¬¡ä¹‹</td></tr><tr><td>PrepareStatementæ‰¹å¤„ç†</td><td>2</td><td>1</td><td>æœ€çŸ­</td></tr></tbody></table><br><p>statementä¸PrepareStatementæ‰¹å¤„ç†å¯¹æ¯”ï¼š</p><ul><li>PrepareStatementæ‰¹å¤„ç†æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºMySQLæœåŠ¡å™¨åªå¯¹SQLè¯­å¥ç¼–è¯‘äº†ä¸€æ¬¡</li><li>PrepareStatementæ‰¹å¤„ç†çš„æ—¶å€™ï¼Œè¦æ±‚æ‰€æœ‰çš„SQLè¯­å¥çš„æ ¼å¼æ˜¯ä¸€æ ·çš„ï¼Œåªæœ‰å‚æ•°ä¸ä¸€æ ·ï¼Œè€Œstatementè¿›è¡Œæ‰¹å¤„ç†çš„æ—¶å€™ï¼Œå¯ä»¥æœ‰ä¸åŒæ ¼å¼ï¼Œä¸åŒç±»å‹çš„SQLè¯­å¥</li></ul><br><h2 id="å››-æ•°æ®åº“è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#å››-æ•°æ®åº“è¿æ¥æ± " aria-hidden="true">#</a> å›› æ•°æ®åº“è¿æ¥æ± </h2><p>æ•°æ®è¿æ¥æ± åŸç†ï¼š è¿æ¥æ± åŸºæœ¬çš„æ€æƒ³æ˜¯åœ¨ç³»ç»Ÿåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°†æ•°æ®åº“è¿æ¥ä½œä¸ºå¯¹è±¡å­˜å‚¨åœ¨å†…å­˜ä¸­</p><ul><li>å½“ç”¨æˆ·éœ€è¦è®¿é—®æ•°æ®åº“æ—¶ï¼Œå¹¶éå»ºç«‹ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œè€Œæ˜¯ä»è¿æ¥æ± ä¸­å–å‡ºä¸€ä¸ªå·²å»ºç«‹çš„ç©ºé—²è¿æ¥å¯¹è±¡</li><li>ä½¿ç”¨å®Œæ¯•åï¼Œç”¨æˆ·ä¹Ÿå¹¶éå°†è¿æ¥å…³é—­ï¼Œè€Œæ˜¯å°†è¿æ¥æ”¾å›è¿æ¥æ± ä¸­ï¼Œä»¥ä¾›ä¸‹ä¸€ä¸ªè¯·æ±‚è®¿é—®ä½¿ç”¨</li></ul><p>è€Œè¿æ¥çš„å»ºç«‹ã€æ–­å¼€éƒ½ç”±è¿æ¥æ± è‡ªèº«æ¥ç®¡ç†ã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡è®¾ç½®è¿æ¥æ± çš„å‚æ•°æ¥æ§åˆ¶è¿æ¥æ± ä¸­çš„åˆå§‹è¿æ¥æ•°ã€è¿æ¥çš„ä¸Šä¸‹é™æ•° ä»¥åŠæ¯ä¸ªè¿æ¥çš„æœ€å¤§ä½¿ç”¨æ¬¡æ•°ã€æœ€å¤§ç©ºé—²æ—¶é—´ç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¶è‡ªèº«çš„ç®¡ç†æœºåˆ¶æ¥ç›‘è§†æ•°æ®åº“è¿æ¥çš„ æ•°é‡ã€ä½¿ç”¨æƒ…å†µç­‰ã€‚</p><br><p>å¸‚é¢ä¸Šæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹å¼€æºçš„æ•°æ®åº“è¿æ¥æ± ï¼Œé‚£ä¹ˆè¿™äº›è¿æ¥æ± é‡Œé¢çš„æ–¹æ³•åå¯èƒ½ä¸ä¸€æ ·ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼š</p><p>Aï¼šgetConnection</p><p>B: aquireConnection</p><p>C: get()</p></blockquote><p>è¿™æ ·å¯¹äºJavaçš„ä½¿ç”¨è€…æ¥è¯´å»ä½¿ç”¨ç¬¬ä¸‰æ–¹å¼€æºçš„æ•°æ®åº“è¿æ¥æ± å°±å¯èƒ½ä¸å¤ªæ–¹ä¾¿ï¼Œé‚£ä¹ˆJavaå¼€å‘è€…å°±åœ¨JDBCä¸­å®šä¹‰äº†ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± çš„æ¥å£ï¼ˆ<code>javax.sql.Datasource</code>ï¼‰ï¼Œå…¶ä»–çš„æ•°æ®åº“è¿æ¥æ± çš„å®ç°éƒ½éœ€è¦å»å®ç°è¿™ä¸ªæ¥å£ï¼Œè¿™å°±å¯¹æˆ‘ä»¬Javaå¼€å‘è€…æ¥è¯´é€ æˆäº†æå¤§çš„ä¾¿åˆ©ï¼Œæ–¹ä¾¿æˆ‘ä»¬å»åœ¨Javaä¸­ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Javaä¸­å®šä¹‰çš„æ•°æ®åº“è¿æ¥æ± çš„æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DataSource</span>  <span class="token keyword">extends</span> <span class="token class-name">CommonDataSource</span><span class="token punctuation">,</span> <span class="token class-name">Wrapper</span> <span class="token punctuation">{</span>

      <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

      <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªæ¥å£ä¸­ï¼Œåªå®šä¹‰äº†è·å–è¿æ¥çš„æ–¹æ³•ï¼Œæ²¡æœ‰å®šä¹‰è¿”å›è¿æ¥çš„æ–¹æ³•ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="/blog/assets/image-20220323115603796.746ccb47.png" alt="image-20220323115603796" loading="lazy"></p><p>é‚£æˆ‘ä»¬ä»ä¸Šé¢å¯ä»¥çŸ¥é“ï¼š</p><ol><li><p>åœ¨Datasourceæ¥å£ä¸­ï¼Œæ²¡æœ‰å®šä¹‰è¿”å›è¿æ¥çš„æ–¹æ³•ï¼Œæ˜¯å› ä¸ºæ¥å£çš„åˆ¶å®šè€…ä¸èƒ½é˜»æ­¢ç”¨æˆ·å»ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± çš„å®ç°çš„æ—¶å€™ï¼Œæ¥å…ˆè°ƒç”¨å…³é—­è¿æ¥çš„æ–¹æ³•ï¼Œå†è°ƒç”¨è¿”å›è¿æ¥çš„æ–¹æ³•ã€‚</p></li><li><p>åœ¨ç¬¬ä¸‰æ–¹å¼€æºçš„æ•°æ®åº“è¿æ¥æ± çš„ä½¿ç”¨ä¸­ï¼Œä¸éœ€è¦æ‰‹åŠ¨å»è°ƒç”¨è¿”å›è¿æ¥çš„æ–¹æ³•ï¼ˆè¿”å›è¿æ¥é€šè¿‡connection.close()æ–¹æ³•æ¥è¿”å›ï¼‰</p></li></ol><br><h3 id="_1-è‡ªå®šä¹‰è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#_1-è‡ªå®šä¹‰è¿æ¥æ± " aria-hidden="true">#</a> 1. è‡ªå®šä¹‰è¿æ¥æ± </h3><p>éœ€è¦å®ç°çš„åŸºæœ¬åŠŸèƒ½ï¼š</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>1. æ ¹æ®é…ç½®æ–‡ä»¶è¿æ¥æ•°æ®åº“ï¼Œå¹¶å¯ä»¥æŒ‡å®šè¿æ¥æ± çš„æœ€å¤§å€¼ã€æœ€å°ç©ºé—²è¿æ¥æ•°å’Œåˆå§‹åŒ–å¤§å°
2. å¯ä»¥è·å–è¿æ¥ã€è¿”å›è¿æ¥
3. æ ¹æ®é…ç½®æ–‡ä»¶å‚æ•°ï¼ˆæˆ–é»˜è®¤å‚æ•°ï¼‰åœ¨é€‚å½“çš„æ—¶å€™è¿›è¡Œæ‰©å®¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># db.properties</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/academy?useSSL=false&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>

<span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">50</span>
<span class="token key attr-name">minIdle</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿æ¥æ± å®ç°ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// åŸºç¡€çš„JDBCéƒ¨åˆ†</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> driverClassName<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> url<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">Properties</span> prop<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;db.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fileInputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
            prop <span class="token operator">=</span> properties<span class="token punctuation">;</span>

            driverClassName <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driverClassName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            username <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è·å–è¿æ¥
     * <span class="token keyword">@author</span> itdrizzle
     * <span class="token keyword">@date</span> 2022/3/21 20:34
     * <span class="token keyword">@return</span> <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Connection</span></span><span class="token punctuation">}</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// DriverManager.registerDriver(new Driver());</span>
            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driverClassName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> <span class="token operator">|</span> <span class="token class-name">ClassNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * é‡Šæ”¾èµ„æº
     * <span class="token keyword">@author</span> itdrizzle
     * <span class="token keyword">@date</span> 2022/3/21 20:33
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> conn<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>rs <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> rs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>conn <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Properties</span> <span class="token function">getProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> prop<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è¿æ¥æ± å®ç°éƒ¨åˆ†</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleDatasource</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ‰©å®¹å¤§å°</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ADD_CAPACITY <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// è¿æ¥æ•°ï¼ˆåŒ…å«æ­£åœ¨ä½¿ç”¨çš„è¿æ¥ï¼‰</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> initialSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> maxActive <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> minIdle <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Connection</span><span class="token punctuation">&gt;</span></span> dataSource<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token function">readProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">addCapacity</span><span class="token punctuation">(</span>initialSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * ä»è¿æ¥æ± ä¸­è·å–è¿æ¥ï¼ˆConnectionï¼‰
     * <span class="token keyword">@author</span> itdrizzle
     * <span class="token keyword">@date</span> 2022/3/23 15:34
     * <span class="token keyword">@return</span> <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Connection</span></span><span class="token punctuation">}</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ç©ºé—²è¿æ¥æ•°å°‘äº minIdleæ—¶éœ€è¦æ‰©å®¹</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataSource<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> minIdle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">addCapacity</span><span class="token punctuation">(</span>ADD_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// æ‰©å®¹åè¿˜æ˜¯æ²¡æœ‰ç©ºé—²è¿æ¥ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataSource<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;No Idle Connection&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è¿”å›è¿æ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>  <span class="token function">returnConnection</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span><span class="token punctuation">{</span>
        dataSource<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * æ‰©å®¹
     * <span class="token keyword">@author</span> itdrizzle
     * <span class="token keyword">@date</span> 2022/3/23 15:29
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è¿æ¥æ•°ä¸èƒ½è¶…è¿‡æœ€å¤§å€¼</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;=</span> maxActive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">+</span> len <span class="token operator">&gt;</span> maxActive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            len <span class="token operator">=</span> maxActive <span class="token operator">-</span> size<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataSource <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> dataSource<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            dataSource<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">SingleDatasource</span><span class="token punctuation">.</span>size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after size: &quot;</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è¯»å–é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®è¿æ¥æ± çš„ç›¸å…³å‚æ•°
     * <span class="token keyword">@author</span> itdrizzle
     * <span class="token keyword">@date</span> 2022/3/23 15:29
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">readProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token class-name">JDBCUtil</span><span class="token punctuation">.</span><span class="token function">getProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        value <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;initialSize&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            initialSize <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        value <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;maxActive&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            maxActive <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        value <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;minIdle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            minIdle <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æµ‹è¯•ç¤ºä¾‹ï¼š</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingleDatasourceDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">51</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">SingleDatasource</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/** è¾“å‡ºï¼š
after size: 10
after size: 20
after size: 30
after size: 40
after size: 50
Exception in thread &quot;main&quot; java.lang.RuntimeException: No Idle Connection
    at cn.itdrizzle.jdbc.util.SingleDatasource.getConnection(SingleDatasource.java:45)
    at cn.itdrizzle.jdbc.day05.SingleDatasourceDemo.main(SingleDatasourceDemo.java:16)

Process finished with exit code 1

å¯ä»¥çœ‹åˆ°ï¼šåœ¨æœ€å¤§å€¼ä»¥ä¸‹å¯ä»¥æ­£å¸¸æ‰©å®¹, è¶…è¿‡æœ€å¤§å€¼ç»§ç»­è·å–è¿æ¥åˆ™æŠ›å‡ºå¼‚å¸¸
</span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-dbcpè¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#_2-dbcpè¿æ¥æ± " aria-hidden="true">#</a> 2. DBCPè¿æ¥æ± </h3><p>DBCPæ˜¯ä¸€ä¸ªä¾èµ–<code>Jakarta commons-pool</code>å¯¹è±¡æ± æœºåˆ¶çš„æ•°æ®åº“è¿æ¥æ± .</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>DBCPæ˜¯Apacheè½¯ä»¶åŸºé‡‘ç»„ç»‡ä¸‹é¢çš„ä¸€ä¸ªå¼€æºçš„æ•°æ®åº“è¿æ¥æ± çš„å®ç°ã€‚

Apacheï¼šè½¯ä»¶åŸºé‡‘ç»„ç»‡ï¼Œæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„å¼€æºç»„ç»‡ã€‚è¿™ä¸ªç»„ç»‡ä¸‹é¢ç®¡ç†å¾ˆå¤šå¼€æºçš„åº”ç”¨ã€‚è¿™äº›å¼€æºçš„åº”ç”¨å¤§å¤šæ•°éƒ½æ¥æºäºå„ä¸ªå¤§å…¬å¸æèµ ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DBCPå¯ä»¥ç›´æ¥çš„åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ (Tomcatçš„æ•°æ®æºä½¿ç”¨çš„å°±æ˜¯DBCP)</p><br><p>å¯¼åŒ…ï¼šä½¿ç”¨DBCPéœ€è¦å¯¼å…¥çš„jaråŒ…ï¼š<code>commons-dbcp.jar</code> ã€<code>commons-pool.jar</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--mavenå¯¼å…¥ä¾èµ–ï¼šä¼šè‡ªåŠ¨å¯¼å…¥å…¶éœ€è¦çš„jar,æ¯”å¦‚commons-pool.jar --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-dbcp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-dbcp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>é…ç½®æ–‡ä»¶ï¼š</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># è¿æ¥è®¾ç½® ( dbcp.properties )</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/m</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>

<span class="token comment"># åˆå§‹åŒ–å¤§å°</span>
<span class="token key attr-name">initialSize</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>

<span class="token comment">#æœ€å¤§è¿æ¥æ•°é‡</span>
<span class="token key attr-name">maxActive</span><span class="token punctuation">=</span><span class="token value attr-value">50</span>

<span class="token comment"># æœ€å¤§é—²ç½®çš„æ•°é‡</span>
<span class="token key attr-name">maxIdle</span><span class="token punctuation">=</span><span class="token value attr-value">20</span>

<span class="token comment"># æœ€å°é—²ç½®</span>
<span class="token key attr-name">minIdle</span><span class="token punctuation">=</span><span class="token value attr-value">5</span>

<span class="token comment"># ç­‰å¾…æ—¶é—´  è¶…æ—¶ç­‰å¾…æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½ 6000æ¯«ç§’/1000ç­‰äº60ç§’</span>
<span class="token key attr-name">maxWait</span><span class="token punctuation">=</span><span class="token value attr-value">60000</span>

<span class="token comment">#JDBCé©±åŠ¨å»ºç«‹è¿æ¥æ—¶é™„å¸¦çš„è¿æ¥å±æ€§å±æ€§çš„æ ¼å¼å¿…é¡»ä¸ºè¿™æ ·ï¼š[å±æ€§å=property;]</span>
<span class="token comment">#æ³¨æ„ï¼š&quot;user&quot; ä¸ &quot;password&quot; ä¸¤ä¸ªå±æ€§ä¼šè¢«æ˜ç¡®åœ°ä¼ é€’ï¼Œå› æ­¤è¿™é‡Œä¸éœ€è¦åŒ…å«ä»–ä»¬ã€‚</span>
<span class="token key attr-name">connectionProperties</span><span class="token punctuation">=</span><span class="token value attr-value">useSSL=false;characterEncoding=utf8</span>

<span class="token comment">#æŒ‡å®šç”±è¿æ¥æ± æ‰€åˆ›å»ºçš„è¿æ¥çš„è‡ªåŠ¨æäº¤ï¼ˆauto-commitï¼‰çŠ¶æ€ã€‚</span>
<span class="token key attr-name">defaultAutoCommit</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>

<span class="token comment">#driver default æŒ‡å®šç”±è¿æ¥æ± æ‰€åˆ›å»ºçš„è¿æ¥çš„åªè¯»ï¼ˆread-onlyï¼‰çŠ¶æ€ã€‚</span>
<span class="token comment">#å¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å€¼ï¼Œåˆ™â€œsetReadOnlyâ€æ–¹æ³•å°†ä¸è¢«è°ƒç”¨ã€‚ï¼ˆæŸäº›é©±åŠ¨å¹¶ä¸æ”¯æŒåªè¯»æ¨¡å¼ï¼Œå¦‚ï¼šInformixï¼‰</span>
<span class="token key attr-name">defaultReadOnly</span><span class="token punctuation">=</span>

<span class="token comment">#driver default æŒ‡å®šç”±è¿æ¥æ± æ‰€åˆ›å»ºçš„è¿æ¥çš„äº‹åŠ¡çº§åˆ«ï¼ˆTransactionIsolationï¼‰ã€‚</span>
<span class="token comment">#å¯ç”¨å€¼ä¸ºä¸‹åˆ—ä¹‹ä¸€ï¼šï¼ˆè¯¦æƒ…å¯è§javadocã€‚ï¼‰NONE,READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE</span>
<span class="token key attr-name">defaultTransactionIsolation</span><span class="token punctuation">=</span><span class="token value attr-value">REPEATABLE_READ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>ä½¿ç”¨æ–¹å¼ä¸€ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DBCPUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;dbcp.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fileInputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

            dataSource <span class="token operator">=</span> <span class="token class-name">BasicDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token class-name">Statement</span> statement<span class="token punctuation">,</span> <span class="token class-name">Connection</span> connection<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// è¿™é‡Œè°ƒç”¨Connectionçš„closeæ–¹æ³•ä¸ä¼šé‡Šæ”¾èµ„æºï¼Œè€Œæ˜¯è¿”å›ç»™äº†è¿æ¥æ± ï¼ˆä¸€èˆ¬è¿æ¥æ± éƒ½ä¼šé‡å†™closeæ–¹æ³•ï¼‰</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>ä½¿ç”¨æ–¹å¼äºŒï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 1.åˆ›å»ºdbcpçš„å·¥å…·ç±»å¯¹è±¡</span>
<span class="token keyword">static</span> <span class="token class-name">BasicDataSource</span> datasource<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">BasicDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.åŠ è½½é©±åŠ¨</span>
<span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2.1. åŠ è½½å±æ€§æ–‡ä»¶</span>
        <span class="token class-name">ResourceBundle</span> bundle <span class="token operator">=</span> <span class="token class-name">ResourceBundle</span><span class="token punctuation">.</span><span class="token function">getBundle</span><span class="token punctuation">(</span><span class="token string">&quot;db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        driverClass <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;driverclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        url <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        username <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;uname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        password <span class="token operator">=</span> bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;upass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        init<span class="token operator">=</span>bundle<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;initsize&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.2.å°†é©±åŠ¨åœ°å€ç­‰ä¿¡æ¯ä¼ é€’ç»™dbcp</span>
        datasource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span>driverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
        datasource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        datasource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        datasource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        datasource<span class="token punctuation">.</span><span class="token function">setInitialSize</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>init<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3.è·å¾—è¿æ¥</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        con<span class="token operator">=</span> datasource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> con<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3-c3p0è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#_3-c3p0è¿æ¥æ± " aria-hidden="true">#</a> 3. C3P0è¿æ¥æ± </h3><p>c3p0ä¸dbcpåŒºåˆ«ï¼š</p><ul><li>dbcpæ²¡æœ‰è‡ªåŠ¨å›æ”¶ç©ºé—²è¿æ¥çš„åŠŸèƒ½ã€ c3p0æœ‰è‡ªåŠ¨å›æ”¶ç©ºé—²è¿æ¥åŠŸèƒ½</li><li>dbcpéœ€è¦æ‰‹åŠ¨è®¾ç½®é…ç½®æ–‡ä»¶ã€ c3p0ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®</li></ul><br><p>ä½¿ç”¨C3P0éœ€è¦å¯¼å…¥jaråŒ…ï¼š<code> c3p0-0.9.5.2.jar</code> ã€ mavenå¯¼å…¥ä¾èµ–ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mchange<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>c3p0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.5.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>c3p0æ˜¯åœ¨å¤–éƒ¨æ·»åŠ é…ç½®æ–‡ä»¶,å·¥å…·ç›´æ¥è¿›è¡Œåº”ç”¨,å› ä¸ºç›´æ¥å¼•ç”¨,æ‰€ä»¥è¦æ±‚å›ºå®šçš„å‘½åå’Œæ–‡ä»¶ä½ç½®</p><ul><li><p>æ–‡ä»¶ä½ç½®: æ™®é€šjavaé¡¹ç›®æ”¾åœ¨srcç›®å½•ä¸‹ã€mavené¡¹ç›®æ”¾åœ¨resourcesç›®å½•ä¸‹</p></li><li><p>æ–‡ä»¶å‘½å: <code>c3p0-config.xml / c3p0-config.properties</code></p><p>å®˜ç½‘xmlé…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š<a href="https://www.mchange.com/projects/c3p0/#c3p0-config.xml" target="_blank" rel="noopener noreferrer">https://www.mchange.com/projects/c3p0/#c3p0-config.xml<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ul><br><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- c3p0-config.xml --&gt;</span>
<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- é»˜è®¤é…ç½®ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™ä½¿ç”¨è¿™ä¸ªé…ç½® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>default-config</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- åŸºæœ¬é…ç½® --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/tempdb?useSSL=false&amp;characterEncoding=utf8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--æ‰©å±•é…ç½®--&gt;</span>
        <span class="token comment">&lt;!-- è¿æ¥è¶…è¿‡30ç§’æŠ¥é”™--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkoutTimeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>30000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--30ç§’æ£€æŸ¥ç©ºé—²è¿æ¥ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idleConnectionTestPeriod<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 30ç§’ä¸é€‚ç”¨ä¸¢å¼ƒ--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxIdleTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatements<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>200<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

         <span class="token comment">&lt;!-- å¦‚æœæ± ä¸­æ•°æ®è¿æ¥ä¸å¤Ÿæ—¶ã€ä¸€æ¬¡å¢é•¿å¤šå°‘ä¸ª --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>acquireIncrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>default-config</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- å¤šæ•°æ®æºçš„é…ç½®ï¼ˆc3p0å¯ä»¥é…ç½®å¤šä¸ªæ•°æ®æºï¼‰ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>named-config</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>abc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>com.mysql.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>jdbc:mysql://localhost:3306/dbname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- å¦‚æœæ± ä¸­æ•°æ®è¿æ¥ä¸å¤Ÿæ—¶ä¸€æ¬¡å¢é•¿å¤šå°‘ä¸ª --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>acquireIncrement<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxPoolSize<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>40<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatements<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxStatementsPerConnection<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>named-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>c3p0-config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„:</p><p>c3p0çš„é…ç½®æ–‡ä»¶å†…éƒ¨å¯ä»¥åŒ…å«å‘½åé…ç½®æ–‡ä»¶å’Œé»˜è®¤é…ç½®æ–‡ä»¶! é»˜è®¤æ˜¯é€‰æ‹©é»˜è®¤é…ç½®!</p><p>å¦‚æœéœ€è¦åˆ‡æ¢å‘½åé…ç½®å¯ä»¥åœ¨åˆ›å»ºc3p0è¿æ¥æ± çš„æ—¶å€™å¡«å…¥å‘½åå³å¯!</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Connection</span> con<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token class-name">ComboPooledDataSource</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨è‡ªå‘½åçš„é…ç½®æ–‡ä»¶</span>

<span class="token keyword">public</span> <span class="token class-name">Connection</span> <span class="token function">getCon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        con<span class="token operator">=</span>db<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> con<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// C3p0Util.java   -- c3p0ä½¿ç”¨ç¤ºä¾‹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">C3p0Util</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è·å–è¿æ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_4-druidè¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#_4-druidè¿æ¥æ± " aria-hidden="true">#</a> 4. Druidè¿æ¥æ± </h3><p>Druidé’ˆå¯¹Oracleå’ŒMySqlåšäº†ç‰¹åˆ«ä¼˜åŒ–ã€æä¾›äº†MySqlã€Oracleã€Postgresqlã€SQL-92çš„SQLçš„å®Œæ•´æ”¯æŒï¼Œè¿™æ˜¯ä¸€ä¸ªæ‰‹å†™çš„é«˜æ€§èƒ½SQL Parserï¼Œæ”¯æŒVisitoræ¨¡å¼ï¼Œä½¿å¾—åˆ†æSQLçš„æŠ½è±¡è¯­æ³•æ ‘å¾ˆæ–¹ä¾¿ã€‚</p><p>ä½¿ç”¨Druidéœ€è¦å¯¼å…¥jaråŒ…ï¼š</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.28<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># druid.properties</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/dbname?characterEncoding=utf8&amp;useSSL=false</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Druidä½¿ç”¨æ–¹å¼ä¸€</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidUtils</span> <span class="token punctuation">{</span>
    <span class="token comment">//å£°æ˜è¿æ¥æ± å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DruidDataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token comment">///å®ä¾‹åŒ–æ•°æ®åº“è¿æ¥æ± å¯¹è±¡</span>
        ds<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å®ä¾‹åŒ–é…ç½®å¯¹è±¡</span>
        <span class="token class-name">Properties</span> properties<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//åŠ è½½é…ç½®æ–‡ä»¶å†…å®¹</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">DruidUtils</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;config.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®é©±åŠ¨ç±»å…¨ç§°</span>
            ds<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driverClassName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®è¿æ¥çš„æ•°æ®åº“</span>
            ds<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®ç”¨æˆ·å</span>
            ds<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®å¯†ç </span>
            ds<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//è®¾ç½®æœ€å¤§è¿æ¥æ•°é‡</span>
            ds<span class="token punctuation">.</span><span class="token function">setMaxActive</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;maxActive&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//è·å–è¿æ¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨: åœ¨Druidè¿æ¥æ± çš„é…ç½®ä¸­ï¼ŒdriverClassNameå¯é…å¯ä¸é…ï¼Œå¦‚æœä¸é…ç½®ä¼šæ ¹æ®urlè‡ªåŠ¨è¯†åˆ«dbType(æ•° æ®åº“ç±»å‹)ï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„driverClassNameã€‚</p><br><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Druidä½¿ç”¨æ–¹å¼äºŒ</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidUtil</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fileInputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

            dataSource <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è·å–è¿æ¥</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> connection<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h2 id="äº”-dbutilsåº“" tabindex="-1"><a class="header-anchor" href="#äº”-dbutilsåº“" aria-hidden="true">#</a> äº” DbUtilsåº“</h2><p>DBUtilsæ˜¯Apacheç»„ç»‡å¼€æºçš„ä¸€ä¸ªå…³äºæ“ä½œJDBCçš„ä¸€ä¸ªç®€å•çš„å·¥å…·ç±»åº“ã€‚å®ƒå¯¹JDBCçš„ä¸€äº›æ“ä½œè¿›è¡Œäº†ç®€å•çš„å°è£…ã€‚</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--å¯¼åŒ…å³å¯ä½¿ç”¨ï¼Œæ— éœ€é…ç½®--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-dbutils<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-dbutils<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_1-queryrunner" tabindex="-1"><a class="header-anchor" href="#_1-queryrunner" aria-hidden="true">#</a> 1. QueryRunner</h3><p>QueryRunneræ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬å»å‡å°‘æ‰§è¡ŒSQLè¯­å¥çš„æ­¥éª¤çš„ä¸€ä¸ªç±»ã€‚å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¸®åŠ©æˆ‘ä»¬ç®€åŒ–JDBCæ“ä½œçš„æµç¨‹</p><p>QueryRunneré‡Œé¢æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ— å‚æ„é€ </span>
<span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æœ‰å‚æ„é€ </span>
<span class="token class-name">QueryRunner</span> queryRunnerWithDatasource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨QueryRunnerçš„æ— å‚æ„é€ æ–¹æ³•ï¼Œåç»­å†æ‰§è¡ŒAPIçš„æ—¶å€™ï¼Œéœ€è¦ä¼ å…¥Connectionã€‚</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ— å‚æ„é€ çš„æ–¹å¼</span>
<span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä½¿ç”¨æ— å‚æ„é€ çš„æ–¹å¼åœ¨ä½¿ç”¨æ—¶éœ€è¦ Connection</span>
<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DruidUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> affectedRows <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token string">&quot;é²æ™ºæ·±&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;affectedRows = &quot;</span> <span class="token operator">+</span> affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// æœ‰å‚æ„é€ çš„æ–¹å¼</span>
<span class="token class-name">QueryRunner</span> qr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> affectedRows <span class="token operator">=</span> qr<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token string">&quot;æ—å†²&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;affectedRows = &quot;</span> <span class="token operator">+</span> affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2-resultsethandler" tabindex="-1"><a class="header-anchor" href="#_2-resultsethandler" aria-hidden="true">#</a> 2. ResultSetHandler</h3><p>ResultSetHandleræ˜¯ä¸€ä¸ªæ¥å£ã€‚æ˜¯å¸®åŠ©æˆ‘ä»¬å»è§£æç»“æœé›†çš„ä¸€ä¸ªæ¥å£ã€‚æˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªç®€å•çš„å®ç°ç±»ï¼š</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// è°ƒç”¨</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> accounts <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyResultSetHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è‡ªå·±å®ç°æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyResultSetHandler</span> <span class="token keyword">implements</span> <span class="token class-name">ResultSetHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> id <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> nickname <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;nickname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> money <span class="token operator">=</span> rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Account</span> account <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            account<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            account<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            account<span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>
            account<span class="token punctuation">.</span><span class="token function">setNickname</span><span class="token punctuation">(</span>nickname<span class="token punctuation">)</span><span class="token punctuation">;</span>

            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>æ­¤å¤„æ˜ç™½åŸç†å³å¯ï¼Œå› ä¸ºDBUtilså·²ç»é€šè¿‡åå°„çš„æ–¹å¼å®ç°äº†ä¸€äº›å¸¸ç”¨çš„ç±»</p><p><img src="/blog/assets/image-20220324201329980.014301cc.png" alt="image-20220324201329980" loading="lazy"></p><p>ä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„å®ç°ç±»ï¼š</p><br><h4 id="_1-beanhandler" tabindex="-1"><a class="header-anchor" href="#_1-beanhandler" aria-hidden="true">#</a> 1) BeanHandler</h4><p>è¿™ä¸ªæ¥å£å®ç°ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠç»“æœé›†è½¬åŒ–ä¸ºå•ä¸ªBeanï¼ˆBeanHandlerä¼šæŠŠç¬¬ä¸€è¡Œè½¬åŒ–ä¸ºJavaBeanï¼‰</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBeanHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user where id=?&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// ä¸Šè¿°ä»£ç å¼•ç”¨çš„ dataSource æ¥è‡ªäºæ•°æ®åº“è¿æ¥æ± çš„æ•°æ®æºï¼Œä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¹Ÿä¸€æ ·
public class DbutilsDemo {
    static DataSource dataSource;

    static {
        dataSource = C3p0Util.getDataSource();
    }
    ......
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_2-beanlisthandler" tabindex="-1"><a class="header-anchor" href="#_2-beanlisthandler" aria-hidden="true">#</a> 2) BeanListHandler</h4><p>è¿™ä¸ªæ¥å£çš„å®ç°ç±»å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠç»“æœé›†è½¬åŒ–ä¸ºä¸€ä¸ªJavaBeançš„é›†åˆ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBeanListHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from user&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BeanListHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_3-columnlisthandler" tabindex="-1"><a class="header-anchor" href="#_3-columnlisthandler" aria-hidden="true">#</a> 3) ColumnListHandler</h4><p>å¯ä»¥å°†å•åˆ—çš„ç»“æœé›†æ”¾åˆ°ä¸€ä¸ªListä¸­</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testColumnListHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select username from user&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ColumnListHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;names = &quot;</span> <span class="token operator">+</span> names<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h4 id="_4-scalarhandler" tabindex="-1"><a class="header-anchor" href="#_4-scalarhandler" aria-hidden="true">#</a> 4) ScalarHandler</h4><p>å¯ä»¥æ¥å—å•ä¸ªå€¼çš„ç»“æœ</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testScalarHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select username from user where id=?&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>é€šè¿‡ä»¥ä¸Šçš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼ŒDBUtilsæœ‰ä¸€å®šçš„ä½œç”¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æé«˜JDBCå¼€å‘çš„æ•ˆç‡ï¼Œç®€åŒ–JDBCçš„æµç¨‹ã€‚</p><br><h3 id="_3-dbutilsç±»" tabindex="-1"><a class="header-anchor" href="#_3-dbutilsç±»" aria-hidden="true">#</a> 3. DBUtilsç±»</h3><p>DBUtilsä¸»è¦æ˜¯æä¾›äº†ä¸€ä¸ªå…³äºConnectionã€Statementã€ResultSetæ“ä½œç›¸å…³çš„API</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token class-name">Statement</span> stat<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">closeQuietly</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">commit</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DBUtilsè¿™ä¸ªç±»é‡Œé¢å°è£…çš„æ–¹æ³•éƒ½æ¯”è¾ƒç®€å•ï¼Œ æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œå¼€å‘è€…ç”¨çš„å¾ˆå°‘</p><br></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/develop-note/edit/main/demo/src/Database/mysql/jdbc.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/blog/Database/mysql/innodb.html" class="nav-link prev" aria-label="InnoDBå­˜å‚¨å¼•æ“"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->InnoDBå­˜å‚¨å¼•æ“</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Drizzle</div><div class="copyright">Copyright Â© 2022 csdrizzle</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.3dc893b0.js" defer></script>
  </body>
</html>
